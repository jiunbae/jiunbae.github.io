"use strict";(self.webpackChunkjiunbae_github_io=self.webpackChunkjiunbae_github_io||[]).push([[7799],{7799:function(e,n,t){t.r(n),t.d(n,{CyberFlowerScene:function(){return d}});var o=t(546),i=t(3851),r=t(512),s=t(7855),a=t(4164),l=t(4797),c=t(6174);let d=function(){function e(e){this.raycaster=new i.tBo,this.flowers=[],this.clock=new i.zD7,this.animationId=0,this.disposed=!1,this.timedShaderMaterials=[],this.flowerStyle="neon",this.accentColor="#00ffff",this.handleContextLost=e=>{e.preventDefault(),cancelAnimationFrame(this.animationId);const n=document.createElement("div");n.style.cssText="position:absolute;inset:0;display:flex;align-items:center;justify-content:center;background:rgba(0,0,0,0.8);color:#fff;font:14px/1.5 sans-serif;cursor:pointer;z-index:100",n.textContent="WebGL context lost â€” click to reload",n.addEventListener("click",()=>location.reload()),this.container.style.position="relative",this.container.appendChild(n)},this.handleContextRestored=()=>{location.reload()},this.animate=()=>{if(this.disposed)return;this.animationId=requestAnimationFrame(this.animate);const e=this.clock.getElapsedTime();this.controls.update();for(const n of this.timedShaderMaterials)n.uniforms.uTime.value=e;if(this.particles){this.particles.material.uniforms.uTime.value=e}for(const n of this.flowers){const t=e-n.birthTime,o=Math.min(t/.8,1),i=(1-Math.pow(1-o,3))*n.targetScale;n.group.scale.set(i,i,i);const r=.03*Math.sin(e*n.swaySpeed+n.swayOffset);n.group.rotation.x=r,n.group.rotation.z=.7*r}this.composer.render()},this.onResize=()=>{if(this.disposed)return;const{clientWidth:e,clientHeight:n}=this.container;this.camera.aspect=e/n,this.camera.updateProjectionMatrix(),this.renderer.setSize(e,n),this.composer.setSize(e,n)},this.container=e,this.init(),this.createEnvironment(),this.createParticles(),this.animate()}var n=e.prototype;return n.resetCamera=function(){this.controls&&this.camera&&(this.camera.position.set(0,6,10),this.controls.target.set(0,1,0),this.controls.update())},n.init=function(){const{clientWidth:e,clientHeight:n}=this.container;this.renderer=new r.JeP({antialias:!0,alpha:!1}),this.renderer.setSize(e,n),this.renderer.setPixelRatio(Math.min(window.devicePixelRatio,2)),this.renderer.toneMapping=i.FV,this.renderer.toneMappingExposure=1.2,this.container.appendChild(this.renderer.domElement),this.renderer.domElement.addEventListener("webglcontextlost",this.handleContextLost),this.renderer.domElement.addEventListener("webglcontextrestored",this.handleContextRestored),this.scene=new i.Z58,this.scene.background=new i.Q1f(657930),this.scene.fog=new i.cRK(657930,.035),this.camera=new i.ubm(60,e/n,.1,100),this.camera.position.set(0,6,10),this.controls=new s.N(this.camera,this.renderer.domElement),this.controls.enableDamping=!0,this.controls.dampingFactor=.05,this.controls.autoRotate=!0,this.controls.autoRotateSpeed=.5,this.controls.maxPolarAngle=Math.PI/2.1,this.controls.minDistance=3,this.controls.maxDistance=25,this.controls.target.set(0,1,0),this.composer=new a.s(this.renderer),this.composer.addPass(new l.A(this.scene,this.camera)),this.bloomPass=new c.C(new i.I9Y(e,n),1,.4,.2),this.composer.addPass(this.bloomPass);const t=new i.$p8(1118498,.5);this.scene.add(t);const o=new i.HiM(65535,2,30);o.position.set(5,8,5),this.scene.add(o);const d=new i.HiM(16711935,2,30);d.position.set(-5,8,-5),this.scene.add(d);const h=new i.HiM(16740039,1.5,20);h.position.set(0,3,8),this.scene.add(h),window.addEventListener("resize",this.onResize)},n.createEnvironment=function(){const e=new i.bdM(40,40),n=new i.BKk({transparent:!0,uniforms:{uTime:{value:0},uColor1:{value:new i.Q1f(65535)},uColor2:{value:new i.Q1f(16711935)}},vertexShader:"\n        varying vec2 vUv;\n        void main() {\n          vUv = uv;\n          gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);\n        }\n      ",fragmentShader:"\n        uniform float uTime;\n        uniform vec3 uColor1;\n        uniform vec3 uColor2;\n        varying vec2 vUv;\n\n        void main() {\n          vec2 grid = abs(fract(vUv * 20.0 - 0.5) - 0.5);\n          float line = min(grid.x, grid.y);\n          float gridLine = 1.0 - smoothstep(0.0, 0.03, line);\n\n          vec2 grid2 = abs(fract(vUv * 4.0 - 0.5) - 0.5);\n          float line2 = min(grid2.x, grid2.y);\n          float majorLine = 1.0 - smoothstep(0.0, 0.02, line2);\n\n          float dist = length(vUv - 0.5) * 2.0;\n          float fade = 1.0 - smoothstep(0.2, 1.0, dist);\n\n          vec3 color = mix(uColor1, uColor2, sin(uTime * 0.3 + dist * 3.0) * 0.5 + 0.5);\n          float alpha = (gridLine * 0.15 + majorLine * 0.3) * fade;\n\n          gl_FragColor = vec4(color, alpha);\n        }\n      "}),t=new i.eaF(e,n);t.rotation.x=-Math.PI/2,t.position.y=-.01,this.scene.add(t),this.timedShaderMaterials.push(n);const o=new i.bdM(40,40),r=new i.V9B({visible:!1});this.groundPlane=new i.eaF(o,r),this.groundPlane.rotation.x=-Math.PI/2,this.scene.add(this.groundPlane)},n.createParticles=function(){const e=500,n=new Float32Array(1500),t=new Float32Array(1500),o=new Float32Array(e),r=[new i.Q1f(65535),new i.Q1f(16711935),new i.Q1f(16740039),new i.Q1f(8087790)];for(let i=0;i<e;i++){n[3*i]=30*(Math.random()-.5),n[3*i+1]=15*Math.random(),n[3*i+2]=30*(Math.random()-.5);const e=r[Math.floor(Math.random()*r.length)];t[3*i]=e.r,t[3*i+1]=e.g,t[3*i+2]=e.b,o[i]=3*Math.random()+1}const s=new i.LoY;s.setAttribute("position",new i.THS(n,3)),s.setAttribute("color",new i.THS(t,3)),s.setAttribute("size",new i.THS(o,1));const a=new i.BKk({transparent:!0,depthWrite:!1,vertexColors:!0,uniforms:{uTime:{value:0},uPixelRatio:{value:Math.min(window.devicePixelRatio,2)}},vertexShader:"\n        attribute float size;\n        varying vec3 vColor;\n        uniform float uTime;\n        uniform float uPixelRatio;\n\n        void main() {\n          vColor = color;\n          vec3 pos = position;\n          pos.y += sin(uTime * 0.5 + position.x * 0.5) * 0.3;\n          pos.x += cos(uTime * 0.3 + position.z * 0.3) * 0.2;\n\n          vec4 mvPos = modelViewMatrix * vec4(pos, 1.0);\n          gl_Position = projectionMatrix * mvPos;\n          gl_PointSize = size * uPixelRatio * (8.0 / -mvPos.z);\n        }\n      ",fragmentShader:"\n        varying vec3 vColor;\n\n        void main() {\n          float d = length(gl_PointCoord - 0.5);\n          if (d > 0.5) discard;\n          float alpha = 1.0 - smoothstep(0.2, 0.5, d);\n          gl_FragColor = vec4(vColor, alpha * 0.6);\n        }\n      "});this.particles=new i.ONl(s,a),this.scene.add(this.particles)},n.plantFlower=function(e,n){const t=new i.I9Y(e,n);this.raycaster.setFromCamera(t,this.camera);const o=this.raycaster.intersectObject(this.groundPlane);if(0===o.length)return;const r=o[0].point;if(Math.abs(r.x)>12||Math.abs(r.z)>12)return;const s=this.createFlower(this.flowerStyle,new i.Q1f(this.accentColor));s.position.copy(r),s.position.y=0,this.scene.add(s),s.traverse(e=>{e instanceof i.eaF&&e.material instanceof i.BKk&&e.material.uniforms.uTime&&this.timedShaderMaterials.push(e.material)}),this.flowers.push({group:s,style:this.flowerStyle,birthTime:this.clock.getElapsedTime(),swayOffset:Math.random()*Math.PI*2,swaySpeed:.5+.5*Math.random(),targetScale:.8+.4*Math.random()})},n.createFlower=function(e,n){const t=new i.YJl;switch(t.scale.set(.01,.01,.01),e){case"neon":this.buildNeonFlower(t,n);break;case"holographic":this.buildHolographicFlower(t,n);break;case"retro":this.buildRetroFlower(t,n)}return t},n.buildNeonFlower=function(e,n){const t=1.5+1.5*Math.random(),o=5+Math.floor(4*Math.random()),r=new i.B6O([new i.Pq0(0,0,0),new i.Pq0(.1,.3*t,.05),new i.Pq0(-.05,.7*t,-.05),new i.Pq0(0,t,0)]),s=new i.j6(r,16,.04,8,!1),a=new i._4j({color:n,emissive:n,emissiveIntensity:.8,roughness:.3});e.add(new i.eaF(s,a));const l=new i.j6(r,8,.06,6,!1),c=new i.V9B({color:n,wireframe:!0,transparent:!0,opacity:.3});e.add(new i.eaF(l,c));const d=new i.Gu$(.15,16,16),h=new i._4j({color:16777215,emissive:n,emissiveIntensity:2}),m=new i.eaF(d,h);m.position.y=t,e.add(m);for(let v=0;v<o;v++){const r=v/o*Math.PI*2,s=new i.ypk;s.moveTo(0,0),s.bezierCurveTo(.15,.1,.2,.4,0,.6),s.bezierCurveTo(-.2,.4,-.15,.1,0,0);const a=new i.MSw(s),l=new i._4j({color:n,emissive:n,emissiveIntensity:1.2,side:i.$EB,transparent:!0,opacity:.85}),c=new i.eaF(a,l);c.position.y=t,c.rotation.y=r,c.rotation.x=-.3-.3*Math.random(),e.add(c)}},n.buildHolographicFlower=function(e,n){const t=1.5+1.5*Math.random(),o=6+Math.floor(3*Math.random()),r=new i.B6O([new i.Pq0(0,0,0),new i.Pq0(-.08,.4*t,.08),new i.Pq0(.05,.6*t,-.03),new i.Pq0(0,t,0)]),s=new i.j6(r,16,.035,8,!1),a=new i.BKk({transparent:!0,side:i.$EB,uniforms:{uTime:{value:0},uAccent:{value:n}},vertexShader:"\n        varying vec3 vNormal;\n        varying vec3 vViewDir;\n        void main() {\n          vNormal = normalize(normalMatrix * normal);\n          vec4 mvPos = modelViewMatrix * vec4(position, 1.0);\n          vViewDir = normalize(-mvPos.xyz);\n          gl_Position = projectionMatrix * mvPos;\n        }\n      ",fragmentShader:"\n        uniform float uTime;\n        uniform vec3 uAccent;\n        varying vec3 vNormal;\n        varying vec3 vViewDir;\n\n        void main() {\n          float fresnel = pow(1.0 - abs(dot(vNormal, vViewDir)), 3.0);\n          vec3 col = mix(uAccent, vec3(1.0, 0.4, 1.0), fresnel);\n          col += vec3(0.2, 0.5, 1.0) * fresnel * 0.5;\n          gl_FragColor = vec4(col, 0.6 + fresnel * 0.4);\n        }\n      "});e.add(new i.eaF(s,a));const l=new i.WBB(.18,2),c=new i.BKk({transparent:!0,uniforms:{uTime:{value:0},uAccent:{value:n}},vertexShader:"\n        varying vec3 vNormal;\n        varying vec3 vViewDir;\n        void main() {\n          vNormal = normalize(normalMatrix * normal);\n          vec4 mvPos = modelViewMatrix * vec4(position, 1.0);\n          vViewDir = normalize(-mvPos.xyz);\n          gl_Position = projectionMatrix * mvPos;\n        }\n      ",fragmentShader:"\n        uniform float uTime;\n        uniform vec3 uAccent;\n        varying vec3 vNormal;\n        varying vec3 vViewDir;\n        void main() {\n          float fresnel = pow(1.0 - abs(dot(vNormal, vViewDir)), 2.0);\n          vec3 rainbow = 0.5 + 0.5 * cos(6.28318 * (fresnel + uTime * 0.2 + vec3(0.0, 0.33, 0.67)));\n          vec3 col = mix(uAccent, rainbow, 0.7);\n          gl_FragColor = vec4(col, 0.7 + fresnel * 0.3);\n        }\n      "}),d=new i.eaF(l,c);d.position.y=t,e.add(d);for(let h=0;h<o;h++){const r=h/o*Math.PI*2,s=new i.tcD(.35,16,0,Math.PI),a=new i.BKk({transparent:!0,side:i.$EB,uniforms:{uTime:{value:0},uAccent:{value:n},uIndex:{value:h/o}},vertexShader:"\n          varying vec2 vUv;\n          varying vec3 vNormal;\n          varying vec3 vViewDir;\n          void main() {\n            vUv = uv;\n            vNormal = normalize(normalMatrix * normal);\n            vec4 mvPos = modelViewMatrix * vec4(position, 1.0);\n            vViewDir = normalize(-mvPos.xyz);\n            gl_Position = projectionMatrix * mvPos;\n          }\n        ",fragmentShader:"\n          uniform float uTime;\n          uniform vec3 uAccent;\n          uniform float uIndex;\n          varying vec2 vUv;\n          varying vec3 vNormal;\n          varying vec3 vViewDir;\n          void main() {\n            float fresnel = pow(1.0 - abs(dot(vNormal, vViewDir)), 2.5);\n            vec3 rainbow = 0.5 + 0.5 * cos(6.28318 * (fresnel * 2.0 + uTime * 0.15 + uIndex + vec3(0.0, 0.33, 0.67)));\n            vec3 col = mix(uAccent * 0.5, rainbow, fresnel * 0.8 + 0.2);\n            float alpha = (0.3 + fresnel * 0.5) * smoothstep(0.0, 0.1, vUv.y);\n            gl_FragColor = vec4(col, alpha);\n          }\n        "}),l=new i.eaF(s,a);l.position.y=t,l.rotation.y=r,l.rotation.x=-.5-.2*Math.random(),e.add(l)}},n.buildRetroFlower=function(e,n){const t=1.2+1.8*Math.random(),o=4+Math.floor(4*Math.random()),r=new i.B6O([new i.Pq0(0,0,0),new i.Pq0(.12,.5*t,.06),new i.Pq0(-.06,.8*t,-.04),new i.Pq0(0,t,0)]),s=new i.j6(r,12,.045,6,!1),a=new i.uSd({color:11184810,metalness:.9,roughness:.1,envMapIntensity:1.5,clearcoat:1});e.add(new i.eaF(s,a));const l=new i.nEu(.2,0),c=new i.uSd({color:n,metalness:.8,roughness:.15,emissive:n,emissiveIntensity:.6,clearcoat:1}),d=new i.eaF(l,c);d.position.y=t,e.add(d);const h=[16740039,8087790,52945,16716947];for(let m=0;m<o;m++){const n=m/o*Math.PI*2,r=new i.ypk;r.moveTo(0,0),r.lineTo(.15,.25),r.lineTo(0,.55),r.lineTo(-.15,.25),r.closePath();const s=new i.MSw(r),a=new i.Q1f(h[m%h.length]),l=new i.uSd({color:a,metalness:.7,roughness:.2,emissive:a,emissiveIntensity:.4,side:i.$EB,clearcoat:.8}),c=new i.eaF(s,l);c.position.y=t,c.rotation.y=n,c.rotation.x=-.4-.3*Math.random();const d=new i.TDQ(s),v=new i.mrM({color:16777215,transparent:!0,opacity:.4});c.add(new i.DXC(d,v)),e.add(c)}},n.clearFlowers=function(){for(const e of this.flowers)this.scene.remove(e.group),e.group.traverse(e=>{e instanceof i.eaF&&(e.geometry.dispose(),Array.isArray(e.material)?e.material.forEach(e=>e.dispose()):e.material.dispose())});this.flowers=[],this.timedShaderMaterials=this.timedShaderMaterials.slice(0,1)},n.dispose=function(){this.disposed=!0,cancelAnimationFrame(this.animationId),window.removeEventListener("resize",this.onResize),this.controls.dispose(),this.clearFlowers(),this.scene.traverse(e=>{e instanceof i.eaF&&(e.geometry.dispose(),Array.isArray(e.material)?e.material.forEach(e=>e.dispose()):e.material.dispose())}),this.renderer.domElement.removeEventListener("webglcontextlost",this.handleContextLost),this.renderer.domElement.removeEventListener("webglcontextrestored",this.handleContextRestored),this.renderer.dispose(),this.composer.dispose(),this.renderer.domElement.parentElement&&this.renderer.domElement.parentElement.removeChild(this.renderer.domElement)},(0,o.A)(e,[{key:"autoRotate",get:function(){var e,n;return null===(e=null===(n=this.controls)||void 0===n?void 0:n.autoRotate)||void 0===e||e},set:function(e){this.controls&&(this.controls.autoRotate=e)}},{key:"autoRotateSpeed",get:function(){var e,n;return null!==(e=null===(n=this.controls)||void 0===n?void 0:n.autoRotateSpeed)&&void 0!==e?e:.5},set:function(e){this.controls&&(this.controls.autoRotateSpeed=e)}},{key:"bloomStrength",get:function(){var e,n;return null!==(e=null===(n=this.bloomPass)||void 0===n?void 0:n.strength)&&void 0!==e?e:1},set:function(e){this.bloomPass&&(this.bloomPass.strength=e)}},{key:"particlesVisible",get:function(){var e,n;return null===(e=null===(n=this.particles)||void 0===n?void 0:n.visible)||void 0===e||e},set:function(e){this.particles&&(this.particles.visible=e)}},{key:"flowerCount",get:function(){return this.flowers.length}}])}()}}]);
//# sourceMappingURL=7799-fa9f5538eb2c0f3013ef.js.map