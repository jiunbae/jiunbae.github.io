"use strict";(self.webpackChunkjiunbae_github_io=self.webpackChunkjiunbae_github_io||[]).push([[4532,7994],{4532:function(e,t,a){a.d(t,{getFFmpeg:function(){return p}});var s;!function(e){e.LOAD="LOAD",e.EXEC="EXEC",e.FFPROBE="FFPROBE",e.WRITE_FILE="WRITE_FILE",e.READ_FILE="READ_FILE",e.DELETE_FILE="DELETE_FILE",e.RENAME="RENAME",e.CREATE_DIR="CREATE_DIR",e.LIST_DIR="LIST_DIR",e.DELETE_DIR="DELETE_DIR",e.ERROR="ERROR",e.DOWNLOAD="DOWNLOAD",e.PROGRESS="PROGRESS",e.LOG="LOG",e.MOUNT="MOUNT",e.UNMOUNT="UNMOUNT"}(s||(s={}));const r=(()=>{let e=0;return()=>e++})(),n=(new Error("unknown message type"),new Error("ffmpeg is not loaded, call `await ffmpeg.load()` first")),o=new Error("called FFmpeg.terminate()");new Error("failed to import ffmpeg-core.js");class i{#e=null;#t={};#a={};#s=[];#r=[];loaded=!1;#n=()=>{this.#e&&(this.#e.onmessage=({data:{id:e,type:t,data:a}})=>{switch(t){case s.LOAD:this.loaded=!0,this.#t[e](a);break;case s.MOUNT:case s.UNMOUNT:case s.EXEC:case s.FFPROBE:case s.WRITE_FILE:case s.READ_FILE:case s.DELETE_FILE:case s.RENAME:case s.CREATE_DIR:case s.LIST_DIR:case s.DELETE_DIR:this.#t[e](a);break;case s.LOG:this.#s.forEach(e=>e(a));break;case s.PROGRESS:this.#r.forEach(e=>e(a));break;case s.ERROR:this.#a[e](a)}delete this.#t[e],delete this.#a[e]})};#o=({type:e,data:t},a=[],s)=>this.#e?new Promise((n,o)=>{const i=r();this.#e&&this.#e.postMessage({id:i,type:e,data:t},a),this.#t[i]=n,this.#a[i]=o,s?.addEventListener("abort",()=>{o(new DOMException(`Message # ${i} was aborted`,"AbortError"))},{once:!0})}):Promise.reject(n);on(e,t){"log"===e?this.#s.push(t):"progress"===e&&this.#r.push(t)}off(e,t){"log"===e?this.#s=this.#s.filter(e=>e!==t):"progress"===e&&(this.#r=this.#r.filter(e=>e!==t))}load=({classWorkerURL:e,...t}={},{signal:r}={})=>(this.#e||(this.#e=e?new Worker(new URL(e,"file:///Users/jiun/workspace/jiunbae.github.io/node_modules/.pnpm/@ffmpeg+ffmpeg@0.12.15/node_modules/@ffmpeg/ffmpeg/dist/esm/classes.js"),{type:"module"}):new Worker(new URL(a.p+a.u(2986),a.b),{type:void 0}),this.#n()),this.#o({type:s.LOAD,data:t},void 0,r));exec=(e,t=-1,{signal:a}={})=>this.#o({type:s.EXEC,data:{args:e,timeout:t}},void 0,a);ffprobe=(e,t=-1,{signal:a}={})=>this.#o({type:s.FFPROBE,data:{args:e,timeout:t}},void 0,a);terminate=()=>{const e=Object.keys(this.#a);for(const t of e)this.#a[t](o),delete this.#a[t],delete this.#t[t];this.#e&&(this.#e.terminate(),this.#e=null,this.loaded=!1)};writeFile=(e,t,{signal:a}={})=>{const r=[];return t instanceof Uint8Array&&r.push(t.buffer),this.#o({type:s.WRITE_FILE,data:{path:e,data:t}},r,a)};mount=(e,t,a)=>this.#o({type:s.MOUNT,data:{fsType:e,options:t,mountPoint:a}},[]);unmount=e=>this.#o({type:s.UNMOUNT,data:{mountPoint:e}},[]);readFile=(e,t="binary",{signal:a}={})=>this.#o({type:s.READ_FILE,data:{path:e,encoding:t}},void 0,a);deleteFile=(e,{signal:t}={})=>this.#o({type:s.DELETE_FILE,data:{path:e}},void 0,t);rename=(e,t,{signal:a}={})=>this.#o({type:s.RENAME,data:{oldPath:e,newPath:t}},void 0,a);createDir=(e,{signal:t}={})=>this.#o({type:s.CREATE_DIR,data:{path:e}},void 0,t);listDir=(e,{signal:t}={})=>this.#o({type:s.LIST_DIR,data:{path:e}},void 0,t);deleteDir=(e,{signal:t}={})=>this.#o({type:s.DELETE_DIR,data:{path:e}},void 0,t)}var l;!function(e){e.MEMFS="MEMFS",e.NODEFS="NODEFS",e.NODERAWFS="NODERAWFS",e.IDBFS="IDBFS",e.WORKERFS="WORKERFS",e.PROXYFS="PROXYFS"}(l||(l={}));var d=a(7994);let c=null,E=null,h=null;const f="https://unpkg.com/@ffmpeg/core@0.12.6/dist/umd";async function p(e){return c&&c.loaded?(h&&(c.off("progress",h),h=null),e&&(h=t=>{let{progress:a}=t;e(Math.min(1,Math.max(0,a)))},c.on("progress",h)),c):E||(E=(async()=>{const t=new i;return e&&(h=t=>{let{progress:a}=t;e(Math.min(1,Math.max(0,a)))},t.on("progress",h)),await t.load({coreURL:await(0,d.KA)(`${f}/ffmpeg-core.js`,"text/javascript"),wasmURL:await(0,d.KA)(`${f}/ffmpeg-core.wasm`,"application/wasm")}),c=t,t})().catch(e=>{throw E=null,c=null,h=null,e}),E)}},7994:function(e,t,a){a.d(t,{fetchFile:function(){return n},KA:function(){return o}});const s=new Error("failed to get response body reader"),r=new Error("failed to complete download"),n=async e=>{let t;if("string"==typeof e)t=/data:_data\/([a-zA-Z]*);base64,([^"]*)/.test(e)?atob(e.split(",")[1]).split("").map(e=>e.charCodeAt(0)):await(await fetch(e)).arrayBuffer();else if(e instanceof URL)t=await(await fetch(e)).arrayBuffer();else{if(!(e instanceof File||e instanceof Blob))return new Uint8Array;t=await(a=e,new Promise((e,t)=>{const s=new FileReader;s.onload=()=>{const{result:t}=s;t instanceof ArrayBuffer?e(new Uint8Array(t)):e(new Uint8Array)},s.onerror=e=>{t(Error(`File could not be read! Code=${e?.target?.error?.code||-1}`))},s.readAsArrayBuffer(a)}))}var a;return new Uint8Array(t)},o=async(e,t,a=!1,n)=>{const o=a?await(async(e,t)=>{const a=await fetch(e);let n;try{const o=parseInt(a.headers.get("Content-Length")||"-1"),i=a.body?.getReader();if(!i)throw s;const l=[];let d=0;for(;;){const{done:a,value:s}=await i.read(),n=s?s.length:0;if(a){if(-1!=o&&o!==d)throw r;t&&t({url:e,total:o,received:d,delta:n,done:a});break}l.push(s),d+=n,t&&t({url:e,total:o,received:d,delta:n,done:a})}const c=new Uint8Array(d);let E=0;for(const e of l)c.set(e,E),E+=e.length;n=c.buffer}catch(o){console.log("failed to send download progress event: ",o),n=await a.arrayBuffer(),t&&t({url:e,total:n.byteLength,received:n.byteLength,delta:0,done:!0})}return n})(e,n):await(await fetch(e)).arrayBuffer(),i=new Blob([o],{type:t});return URL.createObjectURL(i)}}}]);
//# sourceMappingURL=4532-4941ea5d2889d0d86467.js.map