{"version":3,"file":"f54b42984bfe4d114461fcea2710af414ac1fe74-825e6fd88153ca282d5d.js","mappings":"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","sources":["webpack://jiunbae.github.io/./node_modules/.pnpm/three@0.183.1/node_modules/three/examples/jsm/postprocessing/ShaderPass.js","webpack://jiunbae.github.io/./node_modules/.pnpm/three@0.183.1/node_modules/three/examples/jsm/postprocessing/MaskPass.js","webpack://jiunbae.github.io/./node_modules/.pnpm/three@0.183.1/node_modules/three/examples/jsm/postprocessing/EffectComposer.js","webpack://jiunbae.github.io/./node_modules/.pnpm/three@0.183.1/node_modules/three/examples/jsm/postprocessing/Pass.js","webpack://jiunbae.github.io/./node_modules/.pnpm/three@0.183.1/node_modules/three/examples/jsm/postprocessing/RenderPass.js","webpack://jiunbae.github.io/./node_modules/.pnpm/three@0.183.1/node_modules/three/examples/jsm/shaders/LuminosityHighPassShader.js","webpack://jiunbae.github.io/./node_modules/.pnpm/three@0.183.1/node_modules/three/examples/jsm/postprocessing/UnrealBloomPass.js","webpack://jiunbae.github.io/./node_modules/.pnpm/three@0.183.1/node_modules/three/examples/jsm/shaders/CopyShader.js"],"sourcesContent":["import {\n\tShaderMaterial,\n\tUniformsUtils\n} from 'three';\nimport { Pass, FullScreenQuad } from './Pass.js';\n\n/**\n * This pass can be used to create a post processing effect\n * with a raw GLSL shader object. Useful for implementing custom\n * effects.\n *\n * ```js\n * const fxaaPass = new ShaderPass( FXAAShader );\n * composer.addPass( fxaaPass );\n * ```\n *\n * @augments Pass\n * @three_import import { ShaderPass } from 'three/addons/postprocessing/ShaderPass.js';\n */\nclass ShaderPass extends Pass {\n\n\t/**\n\t * Constructs a new shader pass.\n\t *\n\t * @param {Object|ShaderMaterial} [shader] - A shader object holding vertex and fragment shader as well as\n\t * defines and uniforms. It's also valid to pass a custom shader material.\n\t * @param {string} [textureID='tDiffuse'] - The name of the texture uniform that should sample\n\t * the read buffer.\n\t */\n\tconstructor( shader, textureID = 'tDiffuse' ) {\n\n\t\tsuper();\n\n\t\t/**\n\t\t * The name of the texture uniform that should sample the read buffer.\n\t\t *\n\t\t * @type {string}\n\t\t * @default 'tDiffuse'\n\t\t */\n\t\tthis.textureID = textureID;\n\n\t\t/**\n\t\t * The pass uniforms.\n\t\t *\n\t\t * @type {?Object}\n\t\t */\n\t\tthis.uniforms = null;\n\n\t\t/**\n\t\t * The pass material.\n\t\t *\n\t\t * @type {?ShaderMaterial}\n\t\t */\n\t\tthis.material = null;\n\n\t\tif ( shader instanceof ShaderMaterial ) {\n\n\t\t\tthis.uniforms = shader.uniforms;\n\n\t\t\tthis.material = shader;\n\n\t\t} else if ( shader ) {\n\n\t\t\tthis.uniforms = UniformsUtils.clone( shader.uniforms );\n\n\t\t\tthis.material = new ShaderMaterial( {\n\n\t\t\t\tname: ( shader.name !== undefined ) ? shader.name : 'unspecified',\n\t\t\t\tdefines: Object.assign( {}, shader.defines ),\n\t\t\t\tuniforms: this.uniforms,\n\t\t\t\tvertexShader: shader.vertexShader,\n\t\t\t\tfragmentShader: shader.fragmentShader\n\n\t\t\t} );\n\n\t\t}\n\n\t\t// internals\n\n\t\tthis._fsQuad = new FullScreenQuad( this.material );\n\n\t}\n\n\t/**\n\t * Performs the shader pass.\n\t *\n\t * @param {WebGLRenderer} renderer - The renderer.\n\t * @param {WebGLRenderTarget} writeBuffer - The write buffer. This buffer is intended as the rendering\n\t * destination for the pass.\n\t * @param {WebGLRenderTarget} readBuffer - The read buffer. The pass can access the result from the\n\t * previous pass from this buffer.\n\t * @param {number} deltaTime - The delta time in seconds.\n\t * @param {boolean} maskActive - Whether masking is active or not.\n\t */\n\trender( renderer, writeBuffer, readBuffer /*, deltaTime, maskActive */ ) {\n\n\t\tif ( this.uniforms[ this.textureID ] ) {\n\n\t\t\tthis.uniforms[ this.textureID ].value = readBuffer.texture;\n\n\t\t}\n\n\t\tthis._fsQuad.material = this.material;\n\n\t\tif ( this.renderToScreen ) {\n\n\t\t\trenderer.setRenderTarget( null );\n\t\t\tthis._fsQuad.render( renderer );\n\n\t\t} else {\n\n\t\t\trenderer.setRenderTarget( writeBuffer );\n\t\t\t// TODO: Avoid using autoClear properties, see https://github.com/mrdoob/three.js/pull/15571#issuecomment-465669600\n\t\t\tif ( this.clear ) renderer.clear( renderer.autoClearColor, renderer.autoClearDepth, renderer.autoClearStencil );\n\t\t\tthis._fsQuad.render( renderer );\n\n\t\t}\n\n\t}\n\n\t/**\n\t * Frees the GPU-related resources allocated by this instance. Call this\n\t * method whenever the pass is no longer used in your app.\n\t */\n\tdispose() {\n\n\t\tthis.material.dispose();\n\n\t\tthis._fsQuad.dispose();\n\n\t}\n\n}\n\nexport { ShaderPass };\n","import { Pass } from './Pass.js';\n\n/**\n * This pass can be used to define a mask during post processing.\n * Meaning only areas of subsequent post processing are affected\n * which lie in the masking area of this pass. Internally, the masking\n * is implemented with the stencil buffer.\n *\n * ```js\n * const maskPass = new MaskPass( scene, camera );\n * composer.addPass( maskPass );\n * ```\n *\n * @augments Pass\n * @three_import import { MaskPass } from 'three/addons/postprocessing/MaskPass.js';\n */\nclass MaskPass extends Pass {\n\n\t/**\n\t * Constructs a new mask pass.\n\t *\n\t * @param {Scene} scene - The 3D objects in this scene will define the mask.\n\t * @param {Camera} camera - The camera.\n\t */\n\tconstructor( scene, camera ) {\n\n\t\tsuper();\n\n\t\t/**\n\t\t * The scene that defines the mask.\n\t\t *\n\t\t * @type {Scene}\n\t\t */\n\t\tthis.scene = scene;\n\n\t\t/**\n\t\t * The camera.\n\t\t *\n\t\t * @type {Camera}\n\t\t */\n\t\tthis.camera = camera;\n\n\t\t/**\n\t\t * Overwritten to perform a clear operation by default.\n\t\t *\n\t\t * @type {boolean}\n\t\t * @default true\n\t\t */\n\t\tthis.clear = true;\n\n\t\t/**\n\t\t * Overwritten to disable the swap.\n\t\t *\n\t\t * @type {boolean}\n\t\t * @default false\n\t\t */\n\t\tthis.needsSwap = false;\n\n\t\t/**\n\t\t * Whether to inverse the mask or not.\n\t\t *\n\t\t * @type {boolean}\n\t\t * @default false\n\t\t */\n\t\tthis.inverse = false;\n\n\t}\n\n\t/**\n\t * Performs a mask pass with the configured scene and camera.\n\t *\n\t * @param {WebGLRenderer} renderer - The renderer.\n\t * @param {WebGLRenderTarget} writeBuffer - The write buffer. This buffer is intended as the rendering\n\t * destination for the pass.\n\t * @param {WebGLRenderTarget} readBuffer - The read buffer. The pass can access the result from the\n\t * previous pass from this buffer.\n\t * @param {number} deltaTime - The delta time in seconds.\n\t * @param {boolean} maskActive - Whether masking is active or not.\n\t */\n\trender( renderer, writeBuffer, readBuffer /*, deltaTime, maskActive */ ) {\n\n\t\tconst context = renderer.getContext();\n\t\tconst state = renderer.state;\n\n\t\t// don't update color or depth\n\n\t\tstate.buffers.color.setMask( false );\n\t\tstate.buffers.depth.setMask( false );\n\n\t\t// lock buffers\n\n\t\tstate.buffers.color.setLocked( true );\n\t\tstate.buffers.depth.setLocked( true );\n\n\t\t// set up stencil\n\n\t\tlet writeValue, clearValue;\n\n\t\tif ( this.inverse ) {\n\n\t\t\twriteValue = 0;\n\t\t\tclearValue = 1;\n\n\t\t} else {\n\n\t\t\twriteValue = 1;\n\t\t\tclearValue = 0;\n\n\t\t}\n\n\t\tstate.buffers.stencil.setTest( true );\n\t\tstate.buffers.stencil.setOp( context.REPLACE, context.REPLACE, context.REPLACE );\n\t\tstate.buffers.stencil.setFunc( context.ALWAYS, writeValue, 0xffffffff );\n\t\tstate.buffers.stencil.setClear( clearValue );\n\t\tstate.buffers.stencil.setLocked( true );\n\n\t\t// draw into the stencil buffer\n\n\t\trenderer.setRenderTarget( readBuffer );\n\t\tif ( this.clear ) renderer.clear();\n\t\trenderer.render( this.scene, this.camera );\n\n\t\trenderer.setRenderTarget( writeBuffer );\n\t\tif ( this.clear ) renderer.clear();\n\t\trenderer.render( this.scene, this.camera );\n\n\t\t// unlock color and depth buffer and make them writable for subsequent rendering/clearing\n\n\t\tstate.buffers.color.setLocked( false );\n\t\tstate.buffers.depth.setLocked( false );\n\n\t\tstate.buffers.color.setMask( true );\n\t\tstate.buffers.depth.setMask( true );\n\n\t\t// only render where stencil is set to 1\n\n\t\tstate.buffers.stencil.setLocked( false );\n\t\tstate.buffers.stencil.setFunc( context.EQUAL, 1, 0xffffffff ); // draw if == 1\n\t\tstate.buffers.stencil.setOp( context.KEEP, context.KEEP, context.KEEP );\n\t\tstate.buffers.stencil.setLocked( true );\n\n\t}\n\n}\n\n/**\n * This pass can be used to clear a mask previously defined with {@link MaskPass}.\n *\n * ```js\n * const clearPass = new ClearMaskPass();\n * composer.addPass( clearPass );\n * ```\n *\n * @augments Pass\n */\nclass ClearMaskPass extends Pass {\n\n\t/**\n\t * Constructs a new clear mask pass.\n\t */\n\tconstructor() {\n\n\t\tsuper();\n\n\t\t/**\n\t\t * Overwritten to disable the swap.\n\t\t *\n\t\t * @type {boolean}\n\t\t * @default false\n\t\t */\n\t\tthis.needsSwap = false;\n\n\t}\n\n\t/**\n\t * Performs the clear of the currently defined mask.\n\t *\n\t * @param {WebGLRenderer} renderer - The renderer.\n\t * @param {WebGLRenderTarget} writeBuffer - The write buffer. This buffer is intended as the rendering\n\t * destination for the pass.\n\t * @param {WebGLRenderTarget} readBuffer - The read buffer. The pass can access the result from the\n\t * previous pass from this buffer.\n\t * @param {number} deltaTime - The delta time in seconds.\n\t * @param {boolean} maskActive - Whether masking is active or not.\n\t */\n\trender( renderer /*, writeBuffer, readBuffer, deltaTime, maskActive */ ) {\n\n\t\trenderer.state.buffers.stencil.setLocked( false );\n\t\trenderer.state.buffers.stencil.setTest( false );\n\n\t}\n\n}\n\nexport { MaskPass, ClearMaskPass };\n","import {\n\tHalfFloatType,\n\tNoBlending,\n\tTimer,\n\tVector2,\n\tWebGLRenderTarget\n} from 'three';\nimport { CopyShader } from '../shaders/CopyShader.js';\nimport { ShaderPass } from './ShaderPass.js';\nimport { ClearMaskPass, MaskPass } from './MaskPass.js';\n\n/**\n * Used to implement post-processing effects in three.js.\n * The class manages a chain of post-processing passes to produce the final visual result.\n * Post-processing passes are executed in order of their addition/insertion.\n * The last pass is automatically rendered to screen.\n *\n * This module can only be used with {@link WebGLRenderer}.\n *\n * ```js\n * const composer = new EffectComposer( renderer );\n *\n * // adding some passes\n * const renderPass = new RenderPass( scene, camera );\n * composer.addPass( renderPass );\n *\n * const glitchPass = new GlitchPass();\n * composer.addPass( glitchPass );\n *\n * const outputPass = new OutputPass()\n * composer.addPass( outputPass );\n *\n * function animate() {\n *\n * \tcomposer.render(); // instead of renderer.render()\n *\n * }\n * ```\n *\n * @three_import import { EffectComposer } from 'three/addons/postprocessing/EffectComposer.js';\n */\nclass EffectComposer {\n\n\t/**\n\t * Constructs a new effect composer.\n\t *\n\t * @param {WebGLRenderer} renderer - The renderer.\n\t * @param {WebGLRenderTarget} [renderTarget] - This render target and a clone will\n\t * be used as the internal read and write buffers. If not given, the composer creates\n\t * the buffers automatically.\n\t */\n\tconstructor( renderer, renderTarget ) {\n\n\t\t/**\n\t\t * The renderer.\n\t\t *\n\t\t * @type {WebGLRenderer}\n\t\t */\n\t\tthis.renderer = renderer;\n\n\t\tthis._pixelRatio = renderer.getPixelRatio();\n\n\t\tif ( renderTarget === undefined ) {\n\n\t\t\tconst size = renderer.getSize( new Vector2() );\n\t\t\tthis._width = size.width;\n\t\t\tthis._height = size.height;\n\n\t\t\trenderTarget = new WebGLRenderTarget( this._width * this._pixelRatio, this._height * this._pixelRatio, { type: HalfFloatType } );\n\t\t\trenderTarget.texture.name = 'EffectComposer.rt1';\n\n\t\t} else {\n\n\t\t\tthis._width = renderTarget.width;\n\t\t\tthis._height = renderTarget.height;\n\n\t\t}\n\n\t\tthis.renderTarget1 = renderTarget;\n\t\tthis.renderTarget2 = renderTarget.clone();\n\t\tthis.renderTarget2.texture.name = 'EffectComposer.rt2';\n\n\t\t/**\n\t\t * A reference to the internal write buffer. Passes usually write\n\t\t * their result into this buffer.\n\t\t *\n\t\t * @type {WebGLRenderTarget}\n\t\t */\n\t\tthis.writeBuffer = this.renderTarget1;\n\n\t\t/**\n\t\t * A reference to the internal read buffer. Passes usually read\n\t\t * the previous render result from this buffer.\n\t\t *\n\t\t * @type {WebGLRenderTarget}\n\t\t */\n\t\tthis.readBuffer = this.renderTarget2;\n\n\t\t/**\n\t\t * Whether the final pass is rendered to the screen (default framebuffer) or not.\n\t\t *\n\t\t * @type {boolean}\n\t\t * @default true\n\t\t */\n\t\tthis.renderToScreen = true;\n\n\t\t/**\n\t\t * An array representing the (ordered) chain of post-processing passes.\n\t\t *\n\t\t * @type {Array<Pass>}\n\t\t */\n\t\tthis.passes = [];\n\n\t\t/**\n\t\t * A copy pass used for internal swap operations.\n\t\t *\n\t\t * @private\n\t\t * @type {ShaderPass}\n\t\t */\n\t\tthis.copyPass = new ShaderPass( CopyShader );\n\t\tthis.copyPass.material.blending = NoBlending;\n\n\t\t/**\n\t\t * The internal timer for managing time data.\n\t\t *\n\t\t * @private\n\t\t * @type {Timer}\n\t\t */\n\t\tthis.timer = new Timer();\n\n\t}\n\n\t/**\n\t * Swaps the internal read/write buffers.\n\t */\n\tswapBuffers() {\n\n\t\tconst tmp = this.readBuffer;\n\t\tthis.readBuffer = this.writeBuffer;\n\t\tthis.writeBuffer = tmp;\n\n\t}\n\n\t/**\n\t * Adds the given pass to the pass chain.\n\t *\n\t * @param {Pass} pass - The pass to add.\n\t */\n\taddPass( pass ) {\n\n\t\tthis.passes.push( pass );\n\t\tpass.setSize( this._width * this._pixelRatio, this._height * this._pixelRatio );\n\n\t}\n\n\t/**\n\t * Inserts the given pass at a given index.\n\t *\n\t * @param {Pass} pass - The pass to insert.\n\t * @param {number} index - The index into the pass chain.\n\t */\n\tinsertPass( pass, index ) {\n\n\t\tthis.passes.splice( index, 0, pass );\n\t\tpass.setSize( this._width * this._pixelRatio, this._height * this._pixelRatio );\n\n\t}\n\n\t/**\n\t * Removes the given pass from the pass chain.\n\t *\n\t * @param {Pass} pass - The pass to remove.\n\t */\n\tremovePass( pass ) {\n\n\t\tconst index = this.passes.indexOf( pass );\n\n\t\tif ( index !== - 1 ) {\n\n\t\t\tthis.passes.splice( index, 1 );\n\n\t\t}\n\n\t}\n\n\t/**\n\t * Returns `true` if the pass for the given index is the last enabled pass in the pass chain.\n\t *\n\t * @param {number} passIndex - The pass index.\n\t * @return {boolean} Whether the pass for the given index is the last pass in the pass chain.\n\t */\n\tisLastEnabledPass( passIndex ) {\n\n\t\tfor ( let i = passIndex + 1; i < this.passes.length; i ++ ) {\n\n\t\t\tif ( this.passes[ i ].enabled ) {\n\n\t\t\t\treturn false;\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn true;\n\n\t}\n\n\t/**\n\t * Executes all enabled post-processing passes in order to produce the final frame.\n\t *\n\t * @param {number} deltaTime - The delta time in seconds. If not given, the composer computes\n\t * its own time delta value.\n\t */\n\trender( deltaTime ) {\n\n\t\t// deltaTime value is in seconds\n\n\t\tthis.timer.update();\n\n\t\tif ( deltaTime === undefined ) {\n\n\t\t\tdeltaTime = this.timer.getDelta();\n\n\t\t}\n\n\t\tconst currentRenderTarget = this.renderer.getRenderTarget();\n\n\t\tlet maskActive = false;\n\n\t\tfor ( let i = 0, il = this.passes.length; i < il; i ++ ) {\n\n\t\t\tconst pass = this.passes[ i ];\n\n\t\t\tif ( pass.enabled === false ) continue;\n\n\t\t\tpass.renderToScreen = ( this.renderToScreen && this.isLastEnabledPass( i ) );\n\t\t\tpass.render( this.renderer, this.writeBuffer, this.readBuffer, deltaTime, maskActive );\n\n\t\t\tif ( pass.needsSwap ) {\n\n\t\t\t\tif ( maskActive ) {\n\n\t\t\t\t\tconst context = this.renderer.getContext();\n\t\t\t\t\tconst stencil = this.renderer.state.buffers.stencil;\n\n\t\t\t\t\t//context.stencilFunc( context.NOTEQUAL, 1, 0xffffffff );\n\t\t\t\t\tstencil.setFunc( context.NOTEQUAL, 1, 0xffffffff );\n\n\t\t\t\t\tthis.copyPass.render( this.renderer, this.writeBuffer, this.readBuffer, deltaTime );\n\n\t\t\t\t\t//context.stencilFunc( context.EQUAL, 1, 0xffffffff );\n\t\t\t\t\tstencil.setFunc( context.EQUAL, 1, 0xffffffff );\n\n\t\t\t\t}\n\n\t\t\t\tthis.swapBuffers();\n\n\t\t\t}\n\n\t\t\tif ( MaskPass !== undefined ) {\n\n\t\t\t\tif ( pass instanceof MaskPass ) {\n\n\t\t\t\t\tmaskActive = true;\n\n\t\t\t\t} else if ( pass instanceof ClearMaskPass ) {\n\n\t\t\t\t\tmaskActive = false;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\tthis.renderer.setRenderTarget( currentRenderTarget );\n\n\t}\n\n\t/**\n\t * Resets the internal state of the EffectComposer.\n\t *\n\t * @param {WebGLRenderTarget} [renderTarget] - This render target has the same purpose like\n\t * the one from the constructor. If set, it is used to setup the read and write buffers.\n\t */\n\treset( renderTarget ) {\n\n\t\tif ( renderTarget === undefined ) {\n\n\t\t\tconst size = this.renderer.getSize( new Vector2() );\n\t\t\tthis._pixelRatio = this.renderer.getPixelRatio();\n\t\t\tthis._width = size.width;\n\t\t\tthis._height = size.height;\n\n\t\t\trenderTarget = this.renderTarget1.clone();\n\t\t\trenderTarget.setSize( this._width * this._pixelRatio, this._height * this._pixelRatio );\n\n\t\t}\n\n\t\tthis.renderTarget1.dispose();\n\t\tthis.renderTarget2.dispose();\n\t\tthis.renderTarget1 = renderTarget;\n\t\tthis.renderTarget2 = renderTarget.clone();\n\n\t\tthis.writeBuffer = this.renderTarget1;\n\t\tthis.readBuffer = this.renderTarget2;\n\n\t}\n\n\t/**\n\t * Resizes the internal read and write buffers as well as all passes. Similar to {@link WebGLRenderer#setSize},\n\t * this method honors the current pixel ration.\n\t *\n\t * @param {number} width - The width in logical pixels.\n\t * @param {number} height - The height in logical pixels.\n\t */\n\tsetSize( width, height ) {\n\n\t\tthis._width = width;\n\t\tthis._height = height;\n\n\t\tconst effectiveWidth = this._width * this._pixelRatio;\n\t\tconst effectiveHeight = this._height * this._pixelRatio;\n\n\t\tthis.renderTarget1.setSize( effectiveWidth, effectiveHeight );\n\t\tthis.renderTarget2.setSize( effectiveWidth, effectiveHeight );\n\n\t\tfor ( let i = 0; i < this.passes.length; i ++ ) {\n\n\t\t\tthis.passes[ i ].setSize( effectiveWidth, effectiveHeight );\n\n\t\t}\n\n\t}\n\n\t/**\n\t * Sets device pixel ratio. This is usually used for HiDPI device to prevent blurring output.\n\t * Setting the pixel ratio will automatically resize the composer.\n\t *\n\t * @param {number} pixelRatio - The pixel ratio to set.\n\t */\n\tsetPixelRatio( pixelRatio ) {\n\n\t\tthis._pixelRatio = pixelRatio;\n\n\t\tthis.setSize( this._width, this._height );\n\n\t}\n\n\t/**\n\t * Frees the GPU-related resources allocated by this instance. Call this\n\t * method whenever the composer is no longer used in your app.\n\t */\n\tdispose() {\n\n\t\tthis.renderTarget1.dispose();\n\t\tthis.renderTarget2.dispose();\n\n\t\tthis.copyPass.dispose();\n\n\t}\n\n}\n\nexport { EffectComposer };\n","import {\n\tBufferGeometry,\n\tFloat32BufferAttribute,\n\tOrthographicCamera,\n\tMesh\n} from 'three';\n\n/**\n * Abstract base class for all post processing passes.\n *\n * This module is only relevant for post processing with {@link WebGLRenderer}.\n *\n * @abstract\n * @three_import import { Pass } from 'three/addons/postprocessing/Pass.js';\n */\nclass Pass {\n\n\t/**\n\t * Constructs a new pass.\n\t */\n\tconstructor() {\n\n\t\t/**\n\t\t * This flag can be used for type testing.\n\t\t *\n\t\t * @type {boolean}\n\t\t * @readonly\n\t\t * @default true\n\t\t */\n\t\tthis.isPass = true;\n\n\t\t/**\n\t\t * If set to `true`, the pass is processed by the composer.\n\t\t *\n\t\t * @type {boolean}\n\t\t * @default true\n\t\t */\n\t\tthis.enabled = true;\n\n\t\t/**\n\t\t * If set to `true`, the pass indicates to swap read and write buffer after rendering.\n\t\t *\n\t\t * @type {boolean}\n\t\t * @default true\n\t\t */\n\t\tthis.needsSwap = true;\n\n\t\t/**\n\t\t * If set to `true`, the pass clears its buffer before rendering\n\t\t *\n\t\t * @type {boolean}\n\t\t * @default false\n\t\t */\n\t\tthis.clear = false;\n\n\t\t/**\n\t\t * If set to `true`, the result of the pass is rendered to screen. The last pass in the composers\n\t\t * pass chain gets automatically rendered to screen, no matter how this property is configured.\n\t\t *\n\t\t * @type {boolean}\n\t\t * @default false\n\t\t */\n\t\tthis.renderToScreen = false;\n\n\t}\n\n\t/**\n\t * Sets the size of the pass.\n\t *\n\t * @abstract\n\t * @param {number} width - The width to set.\n\t * @param {number} height - The height to set.\n\t */\n\tsetSize( /* width, height */ ) {}\n\n\t/**\n\t * This method holds the render logic of a pass. It must be implemented in all derived classes.\n\t *\n\t * @abstract\n\t * @param {WebGLRenderer} renderer - The renderer.\n\t * @param {WebGLRenderTarget} writeBuffer - The write buffer. This buffer is intended as the rendering\n\t * destination for the pass.\n\t * @param {WebGLRenderTarget} readBuffer - The read buffer. The pass can access the result from the\n\t * previous pass from this buffer.\n\t * @param {number} deltaTime - The delta time in seconds.\n\t * @param {boolean} maskActive - Whether masking is active or not.\n\t */\n\trender( /* renderer, writeBuffer, readBuffer, deltaTime, maskActive */ ) {\n\n\t\tconsole.error( 'THREE.Pass: .render() must be implemented in derived pass.' );\n\n\t}\n\n\t/**\n\t * Frees the GPU-related resources allocated by this instance. Call this\n\t * method whenever the pass is no longer used in your app.\n\t *\n\t * @abstract\n\t */\n\tdispose() {}\n\n}\n\n// Helper for passes that need to fill the viewport with a single quad.\n\nconst _camera = new OrthographicCamera( - 1, 1, 1, - 1, 0, 1 );\n\n// https://github.com/mrdoob/three.js/pull/21358\n\nclass FullscreenTriangleGeometry extends BufferGeometry {\n\n\tconstructor() {\n\n\t\tsuper();\n\n\t\tthis.setAttribute( 'position', new Float32BufferAttribute( [ - 1, 3, 0, - 1, - 1, 0, 3, - 1, 0 ], 3 ) );\n\t\tthis.setAttribute( 'uv', new Float32BufferAttribute( [ 0, 2, 0, 0, 2, 0 ], 2 ) );\n\n\t}\n\n}\n\nconst _geometry = new FullscreenTriangleGeometry();\n\n\n/**\n * This module is a helper for passes which need to render a full\n * screen effect which is quite common in context of post processing.\n *\n * The intended usage is to reuse a single full screen quad for rendering\n * subsequent passes by just reassigning the `material` reference.\n *\n * This module can only be used with {@link WebGLRenderer}.\n *\n * @augments Mesh\n * @three_import import { FullScreenQuad } from 'three/addons/postprocessing/Pass.js';\n */\nclass FullScreenQuad {\n\n\t/**\n\t * Constructs a new full screen quad.\n\t *\n\t * @param {?Material} material - The material to render te full screen quad with.\n\t */\n\tconstructor( material ) {\n\n\t\tthis._mesh = new Mesh( _geometry, material );\n\n\t}\n\n\t/**\n\t * Frees the GPU-related resources allocated by this instance. Call this\n\t * method whenever the instance is no longer used in your app.\n\t */\n\tdispose() {\n\n\t\tthis._mesh.geometry.dispose();\n\n\t}\n\n\t/**\n\t * Renders the full screen quad.\n\t *\n\t * @param {WebGLRenderer} renderer - The renderer.\n\t */\n\trender( renderer ) {\n\n\t\trenderer.render( this._mesh, _camera );\n\n\t}\n\n\t/**\n\t * The quad's material.\n\t *\n\t * @type {?Material}\n\t */\n\tget material() {\n\n\t\treturn this._mesh.material;\n\n\t}\n\n\tset material( value ) {\n\n\t\tthis._mesh.material = value;\n\n\t}\n\n}\n\nexport { Pass, FullScreenQuad };\n","import {\n\tColor\n} from 'three';\nimport { Pass } from './Pass.js';\n\n/**\n * This class represents a render pass. It takes a camera and a scene and produces\n * a beauty pass for subsequent post processing effects.\n *\n * ```js\n * const renderPass = new RenderPass( scene, camera );\n * composer.addPass( renderPass );\n * ```\n *\n * @augments Pass\n * @three_import import { RenderPass } from 'three/addons/postprocessing/RenderPass.js';\n */\nclass RenderPass extends Pass {\n\n\t/**\n\t * Constructs a new render pass.\n\t *\n\t * @param {Scene} scene - The scene to render.\n\t * @param {Camera} camera - The camera.\n\t * @param {?Material} [overrideMaterial=null] - The override material. If set, this material is used\n\t * for all objects in the scene.\n\t * @param {?(number|Color|string)} [clearColor=null] - The clear color of the render pass.\n\t * @param {?number} [clearAlpha=null] - The clear alpha of the render pass.\n\t */\n\tconstructor( scene, camera, overrideMaterial = null, clearColor = null, clearAlpha = null ) {\n\n\t\tsuper();\n\n\t\t/**\n\t\t * The scene to render.\n\t\t *\n\t\t * @type {Scene}\n\t\t */\n\t\tthis.scene = scene;\n\n\t\t/**\n\t\t * The camera.\n\t\t *\n\t\t * @type {Camera}\n\t\t */\n\t\tthis.camera = camera;\n\n\t\t/**\n\t\t * The override material. If set, this material is used\n\t\t * for all objects in the scene.\n\t\t *\n\t\t * @type {?Material}\n\t\t * @default null\n\t\t */\n\t\tthis.overrideMaterial = overrideMaterial;\n\n\t\t/**\n\t\t * The clear color of the render pass.\n\t\t *\n\t\t * @type {?(number|Color|string)}\n\t\t * @default null\n\t\t */\n\t\tthis.clearColor = clearColor;\n\n\t\t/**\n\t\t * The clear alpha of the render pass.\n\t\t *\n\t\t * @type {?number}\n\t\t * @default null\n\t\t */\n\t\tthis.clearAlpha = clearAlpha;\n\n\t\t/**\n\t\t * Overwritten to perform a clear operation by default.\n\t\t *\n\t\t * @type {boolean}\n\t\t * @default true\n\t\t */\n\t\tthis.clear = true;\n\n\t\t/**\n\t\t * If set to `true`, only the depth can be cleared when `clear` is to `false`.\n\t\t *\n\t\t * @type {boolean}\n\t\t * @default false\n\t\t */\n\t\tthis.clearDepth = false;\n\n\t\t/**\n\t\t * Overwritten to disable the swap.\n\t\t *\n\t\t * @type {boolean}\n\t\t * @default false\n\t\t */\n\t\tthis.needsSwap = false;\n\n\t\t/**\n\t\t * This flag indicates that this pass renders the scene itself.\n\t\t *\n\t\t * @type {boolean}\n\t\t * @readonly\n\t\t * @default true\n\t\t */\n\t\tthis.isRenderPass = true;\n\n\t\tthis._oldClearColor = new Color();\n\n\t}\n\n\t/**\n\t * Performs a beauty pass with the configured scene and camera.\n\t *\n\t * @param {WebGLRenderer} renderer - The renderer.\n\t * @param {WebGLRenderTarget} writeBuffer - The write buffer. This buffer is intended as the rendering\n\t * destination for the pass.\n\t * @param {WebGLRenderTarget} readBuffer - The read buffer. The pass can access the result from the\n\t * previous pass from this buffer.\n\t * @param {number} deltaTime - The delta time in seconds.\n\t * @param {boolean} maskActive - Whether masking is active or not.\n\t */\n\trender( renderer, writeBuffer, readBuffer /*, deltaTime, maskActive */ ) {\n\n\t\tconst oldAutoClear = renderer.autoClear;\n\t\trenderer.autoClear = false;\n\n\t\tlet oldClearAlpha, oldOverrideMaterial;\n\n\t\tif ( this.overrideMaterial !== null ) {\n\n\t\t\toldOverrideMaterial = this.scene.overrideMaterial;\n\n\t\t\tthis.scene.overrideMaterial = this.overrideMaterial;\n\n\t\t}\n\n\t\tif ( this.clearColor !== null ) {\n\n\t\t\trenderer.getClearColor( this._oldClearColor );\n\t\t\trenderer.setClearColor( this.clearColor, renderer.getClearAlpha() );\n\n\t\t}\n\n\t\tif ( this.clearAlpha !== null ) {\n\n\t\t\toldClearAlpha = renderer.getClearAlpha();\n\t\t\trenderer.setClearAlpha( this.clearAlpha );\n\n\t\t}\n\n\t\tif ( this.clearDepth == true ) {\n\n\t\t\trenderer.clearDepth();\n\n\t\t}\n\n\t\trenderer.setRenderTarget( this.renderToScreen ? null : readBuffer );\n\n\t\tif ( this.clear === true ) {\n\n\t\t\t// TODO: Avoid using autoClear properties, see https://github.com/mrdoob/three.js/pull/15571#issuecomment-465669600\n\t\t\trenderer.clear( renderer.autoClearColor, renderer.autoClearDepth, renderer.autoClearStencil );\n\n\t\t}\n\n\t\trenderer.render( this.scene, this.camera );\n\n\t\t// restore\n\n\t\tif ( this.clearColor !== null ) {\n\n\t\t\trenderer.setClearColor( this._oldClearColor );\n\n\t\t}\n\n\t\tif ( this.clearAlpha !== null ) {\n\n\t\t\trenderer.setClearAlpha( oldClearAlpha );\n\n\t\t}\n\n\t\tif ( this.overrideMaterial !== null ) {\n\n\t\t\tthis.scene.overrideMaterial = oldOverrideMaterial;\n\n\t\t}\n\n\t\trenderer.autoClear = oldAutoClear;\n\n\t}\n\n}\n\nexport { RenderPass };\n","import {\n\tColor\n} from 'three';\n\n/**\n * @module LuminosityHighPassShader\n * @three_import import { LuminosityHighPassShader } from 'three/addons/shaders/LuminosityHighPassShader.js';\n */\n\n/**\n * Luminosity high pass shader.\n *\n * @constant\n * @type {ShaderMaterial~Shader}\n */\nconst LuminosityHighPassShader = {\n\n\tname: 'LuminosityHighPassShader',\n\n\tuniforms: {\n\n\t\t'tDiffuse': { value: null },\n\t\t'luminosityThreshold': { value: 1.0 },\n\t\t'smoothWidth': { value: 1.0 },\n\t\t'defaultColor': { value: new Color( 0x000000 ) },\n\t\t'defaultOpacity': { value: 0.0 }\n\n\t},\n\n\tvertexShader: /* glsl */`\n\n\t\tvarying vec2 vUv;\n\n\t\tvoid main() {\n\n\t\t\tvUv = uv;\n\n\t\t\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n\n\t\t}`,\n\n\tfragmentShader: /* glsl */`\n\n\t\tuniform sampler2D tDiffuse;\n\t\tuniform vec3 defaultColor;\n\t\tuniform float defaultOpacity;\n\t\tuniform float luminosityThreshold;\n\t\tuniform float smoothWidth;\n\n\t\tvarying vec2 vUv;\n\n\t\tvoid main() {\n\n\t\t\tvec4 texel = texture2D( tDiffuse, vUv );\n\n\t\t\tfloat v = luminance( texel.xyz );\n\n\t\t\tvec4 outputColor = vec4( defaultColor.rgb, defaultOpacity );\n\n\t\t\tfloat alpha = smoothstep( luminosityThreshold, luminosityThreshold + smoothWidth, v );\n\n\t\t\tgl_FragColor = mix( outputColor, texel, alpha );\n\n\t\t}`\n\n};\n\nexport { LuminosityHighPassShader };\n","import {\n\tAdditiveBlending,\n\tColor,\n\tHalfFloatType,\n\tMeshBasicMaterial,\n\tShaderMaterial,\n\tUniformsUtils,\n\tVector2,\n\tVector3,\n\tWebGLRenderTarget\n} from 'three';\nimport { Pass, FullScreenQuad } from './Pass.js';\nimport { CopyShader } from '../shaders/CopyShader.js';\nimport { LuminosityHighPassShader } from '../shaders/LuminosityHighPassShader.js';\n\n/**\n * This pass is inspired by the bloom pass of Unreal Engine. It creates a\n * mip map chain of bloom textures and blurs them with different radii. Because\n * of the weighted combination of mips, and because larger blurs are done on\n * higher mips, this effect provides good quality and performance.\n *\n * When using this pass, tone mapping must be enabled in the renderer settings.\n *\n * Reference:\n * - [Bloom in Unreal Engine](https://docs.unrealengine.com/latest/INT/Engine/Rendering/PostProcessEffects/Bloom/)\n *\n * ```js\n * const resolution = new THREE.Vector2( window.innerWidth, window.innerHeight );\n * const bloomPass = new UnrealBloomPass( resolution, 1.5, 0.4, 0.85 );\n * composer.addPass( bloomPass );\n * ```\n *\n * @augments Pass\n * @three_import import { UnrealBloomPass } from 'three/addons/postprocessing/UnrealBloomPass.js';\n */\nclass UnrealBloomPass extends Pass {\n\n\t/**\n\t * Constructs a new Unreal Bloom pass.\n\t *\n\t * @param {Vector2} [resolution] - The effect's resolution.\n\t * @param {number} [strength=1] - The Bloom strength.\n\t * @param {number} radius - The Bloom radius.\n\t * @param {number} threshold - The luminance threshold limits which bright areas contribute to the Bloom effect.\n\t */\n\tconstructor( resolution, strength = 1, radius, threshold ) {\n\n\t\tsuper();\n\n\t\t/**\n\t\t * The Bloom strength.\n\t\t *\n\t\t * @type {number}\n\t\t * @default 1\n\t\t */\n\t\tthis.strength = strength;\n\n\t\t/**\n\t\t * The Bloom radius. Must be in the range `[0,1]`.\n\t\t *\n\t\t * @type {number}\n\t\t */\n\t\tthis.radius = radius;\n\n\t\t/**\n\t\t * The luminance threshold limits which bright areas contribute to the Bloom effect.\n\t\t *\n\t\t * @type {number}\n\t\t */\n\t\tthis.threshold = threshold;\n\n\t\t/**\n\t\t * The effect's resolution.\n\t\t *\n\t\t * @type {Vector2}\n\t\t * @default (256,256)\n\t\t */\n\t\tthis.resolution = ( resolution !== undefined ) ? new Vector2( resolution.x, resolution.y ) : new Vector2( 256, 256 );\n\n\t\t/**\n\t\t * The effect's clear color\n\t\t *\n\t\t * @type {Color}\n\t\t * @default (0,0,0)\n\t\t */\n\t\tthis.clearColor = new Color( 0, 0, 0 );\n\n\t\t/**\n\t\t * Overwritten to disable the swap.\n\t\t *\n\t\t * @type {boolean}\n\t\t * @default false\n\t\t */\n\t\tthis.needsSwap = false;\n\n\t\t// internals\n\n\t\t// render targets\n\t\tthis.renderTargetsHorizontal = [];\n\t\tthis.renderTargetsVertical = [];\n\t\tthis.nMips = 5;\n\t\tlet resx = Math.round( this.resolution.x / 2 );\n\t\tlet resy = Math.round( this.resolution.y / 2 );\n\n\t\tthis.renderTargetBright = new WebGLRenderTarget( resx, resy, { type: HalfFloatType } );\n\t\tthis.renderTargetBright.texture.name = 'UnrealBloomPass.bright';\n\t\tthis.renderTargetBright.texture.generateMipmaps = false;\n\n\t\tfor ( let i = 0; i < this.nMips; i ++ ) {\n\n\t\t\tconst renderTargetHorizontal = new WebGLRenderTarget( resx, resy, { type: HalfFloatType } );\n\n\t\t\trenderTargetHorizontal.texture.name = 'UnrealBloomPass.h' + i;\n\t\t\trenderTargetHorizontal.texture.generateMipmaps = false;\n\n\t\t\tthis.renderTargetsHorizontal.push( renderTargetHorizontal );\n\n\t\t\tconst renderTargetVertical = new WebGLRenderTarget( resx, resy, { type: HalfFloatType } );\n\n\t\t\trenderTargetVertical.texture.name = 'UnrealBloomPass.v' + i;\n\t\t\trenderTargetVertical.texture.generateMipmaps = false;\n\n\t\t\tthis.renderTargetsVertical.push( renderTargetVertical );\n\n\t\t\tresx = Math.round( resx / 2 );\n\n\t\t\tresy = Math.round( resy / 2 );\n\n\t\t}\n\n\t\t// luminosity high pass material\n\n\t\tconst highPassShader = LuminosityHighPassShader;\n\t\tthis.highPassUniforms = UniformsUtils.clone( highPassShader.uniforms );\n\n\t\tthis.highPassUniforms[ 'luminosityThreshold' ].value = threshold;\n\t\tthis.highPassUniforms[ 'smoothWidth' ].value = 0.01;\n\n\t\tthis.materialHighPassFilter = new ShaderMaterial( {\n\t\t\tuniforms: this.highPassUniforms,\n\t\t\tvertexShader: highPassShader.vertexShader,\n\t\t\tfragmentShader: highPassShader.fragmentShader\n\t\t} );\n\n\t\t// gaussian blur materials\n\n\t\tthis.separableBlurMaterials = [];\n\t\t// These sizes have been changed to account for the altered coefficients-calculation to avoid blockiness,\n\t\t// while retaining the same blur-strength. For details see https://github.com/mrdoob/three.js/pull/31528\n\t\tconst kernelSizeArray = [ 6, 10, 14, 18, 22 ];\n\t\tresx = Math.round( this.resolution.x / 2 );\n\t\tresy = Math.round( this.resolution.y / 2 );\n\n\t\tfor ( let i = 0; i < this.nMips; i ++ ) {\n\n\t\t\tthis.separableBlurMaterials.push( this._getSeparableBlurMaterial( kernelSizeArray[ i ] ) );\n\n\t\t\tthis.separableBlurMaterials[ i ].uniforms[ 'invSize' ].value = new Vector2( 1 / resx, 1 / resy );\n\n\t\t\tresx = Math.round( resx / 2 );\n\n\t\t\tresy = Math.round( resy / 2 );\n\n\t\t}\n\n\t\t// composite material\n\n\t\tthis.compositeMaterial = this._getCompositeMaterial( this.nMips );\n\t\tthis.compositeMaterial.uniforms[ 'blurTexture1' ].value = this.renderTargetsVertical[ 0 ].texture;\n\t\tthis.compositeMaterial.uniforms[ 'blurTexture2' ].value = this.renderTargetsVertical[ 1 ].texture;\n\t\tthis.compositeMaterial.uniforms[ 'blurTexture3' ].value = this.renderTargetsVertical[ 2 ].texture;\n\t\tthis.compositeMaterial.uniforms[ 'blurTexture4' ].value = this.renderTargetsVertical[ 3 ].texture;\n\t\tthis.compositeMaterial.uniforms[ 'blurTexture5' ].value = this.renderTargetsVertical[ 4 ].texture;\n\t\tthis.compositeMaterial.uniforms[ 'bloomStrength' ].value = strength;\n\t\tthis.compositeMaterial.uniforms[ 'bloomRadius' ].value = 0.1;\n\n\t\tconst bloomFactors = [ 1.0, 0.8, 0.6, 0.4, 0.2 ];\n\t\tthis.compositeMaterial.uniforms[ 'bloomFactors' ].value = bloomFactors;\n\t\tthis.bloomTintColors = [ new Vector3( 1, 1, 1 ), new Vector3( 1, 1, 1 ), new Vector3( 1, 1, 1 ), new Vector3( 1, 1, 1 ), new Vector3( 1, 1, 1 ) ];\n\t\tthis.compositeMaterial.uniforms[ 'bloomTintColors' ].value = this.bloomTintColors;\n\n\t\t// blend material\n\n\t\tthis.copyUniforms = UniformsUtils.clone( CopyShader.uniforms );\n\n\t\tthis.blendMaterial = new ShaderMaterial( {\n\t\t\tuniforms: this.copyUniforms,\n\t\t\tvertexShader: CopyShader.vertexShader,\n\t\t\tfragmentShader: CopyShader.fragmentShader,\n\t\t\tpremultipliedAlpha: true,\n\t\t\tblending: AdditiveBlending,\n\t\t\tdepthTest: false,\n\t\t\tdepthWrite: false,\n\t\t\ttransparent: true\n\t\t} );\n\n\t\tthis._oldClearColor = new Color();\n\t\tthis._oldClearAlpha = 1;\n\n\t\tthis._basic = new MeshBasicMaterial();\n\n\t\tthis._fsQuad = new FullScreenQuad( null );\n\n\t}\n\n\t/**\n\t * Frees the GPU-related resources allocated by this instance. Call this\n\t * method whenever the pass is no longer used in your app.\n\t */\n\tdispose() {\n\n\t\tfor ( let i = 0; i < this.renderTargetsHorizontal.length; i ++ ) {\n\n\t\t\tthis.renderTargetsHorizontal[ i ].dispose();\n\n\t\t}\n\n\t\tfor ( let i = 0; i < this.renderTargetsVertical.length; i ++ ) {\n\n\t\t\tthis.renderTargetsVertical[ i ].dispose();\n\n\t\t}\n\n\t\tthis.renderTargetBright.dispose();\n\n\t\t//\n\n\t\tfor ( let i = 0; i < this.separableBlurMaterials.length; i ++ ) {\n\n\t\t\tthis.separableBlurMaterials[ i ].dispose();\n\n\t\t}\n\n\t\tthis.compositeMaterial.dispose();\n\t\tthis.blendMaterial.dispose();\n\t\tthis._basic.dispose();\n\n\t\t//\n\n\t\tthis._fsQuad.dispose();\n\n\t}\n\n\t/**\n\t * Sets the size of the pass.\n\t *\n\t * @param {number} width - The width to set.\n\t * @param {number} height - The height to set.\n\t */\n\tsetSize( width, height ) {\n\n\t\tlet resx = Math.round( width / 2 );\n\t\tlet resy = Math.round( height / 2 );\n\n\t\tthis.renderTargetBright.setSize( resx, resy );\n\n\t\tfor ( let i = 0; i < this.nMips; i ++ ) {\n\n\t\t\tthis.renderTargetsHorizontal[ i ].setSize( resx, resy );\n\t\t\tthis.renderTargetsVertical[ i ].setSize( resx, resy );\n\n\t\t\tthis.separableBlurMaterials[ i ].uniforms[ 'invSize' ].value = new Vector2( 1 / resx, 1 / resy );\n\n\t\t\tresx = Math.round( resx / 2 );\n\t\t\tresy = Math.round( resy / 2 );\n\n\t\t}\n\n\t}\n\n\t/**\n\t * Performs the Bloom pass.\n\t *\n\t * @param {WebGLRenderer} renderer - The renderer.\n\t * @param {WebGLRenderTarget} writeBuffer - The write buffer. This buffer is intended as the rendering\n\t * destination for the pass.\n\t * @param {WebGLRenderTarget} readBuffer - The read buffer. The pass can access the result from the\n\t * previous pass from this buffer.\n\t * @param {number} deltaTime - The delta time in seconds.\n\t * @param {boolean} maskActive - Whether masking is active or not.\n\t */\n\trender( renderer, writeBuffer, readBuffer, deltaTime, maskActive ) {\n\n\t\trenderer.getClearColor( this._oldClearColor );\n\t\tthis._oldClearAlpha = renderer.getClearAlpha();\n\t\tconst oldAutoClear = renderer.autoClear;\n\t\trenderer.autoClear = false;\n\n\t\trenderer.setClearColor( this.clearColor, 0 );\n\n\t\tif ( maskActive ) renderer.state.buffers.stencil.setTest( false );\n\n\t\t// Render input to screen\n\n\t\tif ( this.renderToScreen ) {\n\n\t\t\tthis._fsQuad.material = this._basic;\n\t\t\tthis._basic.map = readBuffer.texture;\n\n\t\t\trenderer.setRenderTarget( null );\n\t\t\trenderer.clear();\n\t\t\tthis._fsQuad.render( renderer );\n\n\t\t}\n\n\t\t// 1. Extract Bright Areas\n\n\t\tthis.highPassUniforms[ 'tDiffuse' ].value = readBuffer.texture;\n\t\tthis.highPassUniforms[ 'luminosityThreshold' ].value = this.threshold;\n\t\tthis._fsQuad.material = this.materialHighPassFilter;\n\n\t\trenderer.setRenderTarget( this.renderTargetBright );\n\t\trenderer.clear();\n\t\tthis._fsQuad.render( renderer );\n\n\t\t// 2. Blur All the mips progressively\n\n\t\tlet inputRenderTarget = this.renderTargetBright;\n\n\t\tfor ( let i = 0; i < this.nMips; i ++ ) {\n\n\t\t\tthis._fsQuad.material = this.separableBlurMaterials[ i ];\n\n\t\t\tthis.separableBlurMaterials[ i ].uniforms[ 'colorTexture' ].value = inputRenderTarget.texture;\n\t\t\tthis.separableBlurMaterials[ i ].uniforms[ 'direction' ].value = UnrealBloomPass.BlurDirectionX;\n\t\t\trenderer.setRenderTarget( this.renderTargetsHorizontal[ i ] );\n\t\t\trenderer.clear();\n\t\t\tthis._fsQuad.render( renderer );\n\n\t\t\tthis.separableBlurMaterials[ i ].uniforms[ 'colorTexture' ].value = this.renderTargetsHorizontal[ i ].texture;\n\t\t\tthis.separableBlurMaterials[ i ].uniforms[ 'direction' ].value = UnrealBloomPass.BlurDirectionY;\n\t\t\trenderer.setRenderTarget( this.renderTargetsVertical[ i ] );\n\t\t\trenderer.clear();\n\t\t\tthis._fsQuad.render( renderer );\n\n\t\t\tinputRenderTarget = this.renderTargetsVertical[ i ];\n\n\t\t}\n\n\t\t// Composite All the mips\n\n\t\tthis._fsQuad.material = this.compositeMaterial;\n\t\tthis.compositeMaterial.uniforms[ 'bloomStrength' ].value = this.strength;\n\t\tthis.compositeMaterial.uniforms[ 'bloomRadius' ].value = this.radius;\n\t\tthis.compositeMaterial.uniforms[ 'bloomTintColors' ].value = this.bloomTintColors;\n\n\t\trenderer.setRenderTarget( this.renderTargetsHorizontal[ 0 ] );\n\t\trenderer.clear();\n\t\tthis._fsQuad.render( renderer );\n\n\t\t// Blend it additively over the input texture\n\n\t\tthis._fsQuad.material = this.blendMaterial;\n\t\tthis.copyUniforms[ 'tDiffuse' ].value = this.renderTargetsHorizontal[ 0 ].texture;\n\n\t\tif ( maskActive ) renderer.state.buffers.stencil.setTest( true );\n\n\t\tif ( this.renderToScreen ) {\n\n\t\t\trenderer.setRenderTarget( null );\n\t\t\tthis._fsQuad.render( renderer );\n\n\t\t} else {\n\n\t\t\trenderer.setRenderTarget( readBuffer );\n\t\t\tthis._fsQuad.render( renderer );\n\n\t\t}\n\n\t\t// Restore renderer settings\n\n\t\trenderer.setClearColor( this._oldClearColor, this._oldClearAlpha );\n\t\trenderer.autoClear = oldAutoClear;\n\n\t}\n\n\t// internals\n\n\t_getSeparableBlurMaterial( kernelRadius ) {\n\n\t\tconst coefficients = [];\n\t\tconst sigma = kernelRadius / 3;\n\n\t\tfor ( let i = 0; i < kernelRadius; i ++ ) {\n\n\t\t\tcoefficients.push( 0.39894 * Math.exp( - 0.5 * i * i / ( sigma * sigma ) ) / sigma );\n\n\t\t}\n\n\t\treturn new ShaderMaterial( {\n\n\t\t\tdefines: {\n\t\t\t\t'KERNEL_RADIUS': kernelRadius\n\t\t\t},\n\n\t\t\tuniforms: {\n\t\t\t\t'colorTexture': { value: null },\n\t\t\t\t'invSize': { value: new Vector2( 0.5, 0.5 ) }, // inverse texture size\n\t\t\t\t'direction': { value: new Vector2( 0.5, 0.5 ) },\n\t\t\t\t'gaussianCoefficients': { value: coefficients } // precomputed Gaussian coefficients\n\t\t\t},\n\n\t\t\tvertexShader: /* glsl */`\n\n\t\t\t\tvarying vec2 vUv;\n\n\t\t\t\tvoid main() {\n\n\t\t\t\t\tvUv = uv;\n\t\t\t\t\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n\n\t\t\t\t}`,\n\n\t\t\tfragmentShader: /* glsl */`\n\n\t\t\t\t#include <common>\n\n\t\t\t\tvarying vec2 vUv;\n\n\t\t\t\tuniform sampler2D colorTexture;\n\t\t\t\tuniform vec2 invSize;\n\t\t\t\tuniform vec2 direction;\n\t\t\t\tuniform float gaussianCoefficients[KERNEL_RADIUS];\n\n\t\t\t\tvoid main() {\n\n\t\t\t\t\tfloat weightSum = gaussianCoefficients[0];\n\t\t\t\t\tvec3 diffuseSum = texture2D( colorTexture, vUv ).rgb * weightSum;\n\n\t\t\t\t\tfor ( int i = 1; i < KERNEL_RADIUS; i ++ ) {\n\n\t\t\t\t\t\tfloat x = float( i );\n\t\t\t\t\t\tfloat w = gaussianCoefficients[i];\n\t\t\t\t\t\tvec2 uvOffset = direction * invSize * x;\n\t\t\t\t\t\tvec3 sample1 = texture2D( colorTexture, vUv + uvOffset ).rgb;\n\t\t\t\t\t\tvec3 sample2 = texture2D( colorTexture, vUv - uvOffset ).rgb;\n\t\t\t\t\t\tdiffuseSum += ( sample1 + sample2 ) * w;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tgl_FragColor = vec4( diffuseSum, 1.0 );\n\n\t\t\t\t}`\n\t\t} );\n\n\t}\n\n\t_getCompositeMaterial( nMips ) {\n\n\t\treturn new ShaderMaterial( {\n\n\t\t\tdefines: {\n\t\t\t\t'NUM_MIPS': nMips\n\t\t\t},\n\n\t\t\tuniforms: {\n\t\t\t\t'blurTexture1': { value: null },\n\t\t\t\t'blurTexture2': { value: null },\n\t\t\t\t'blurTexture3': { value: null },\n\t\t\t\t'blurTexture4': { value: null },\n\t\t\t\t'blurTexture5': { value: null },\n\t\t\t\t'bloomStrength': { value: 1.0 },\n\t\t\t\t'bloomFactors': { value: null },\n\t\t\t\t'bloomTintColors': { value: null },\n\t\t\t\t'bloomRadius': { value: 0.0 }\n\t\t\t},\n\n\t\t\tvertexShader: /* glsl */`\n\n\t\t\t\tvarying vec2 vUv;\n\n\t\t\t\tvoid main() {\n\n\t\t\t\t\tvUv = uv;\n\t\t\t\t\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n\n\t\t\t\t}`,\n\n\t\t\tfragmentShader: /* glsl */`\n\n\t\t\t\tvarying vec2 vUv;\n\n\t\t\t\tuniform sampler2D blurTexture1;\n\t\t\t\tuniform sampler2D blurTexture2;\n\t\t\t\tuniform sampler2D blurTexture3;\n\t\t\t\tuniform sampler2D blurTexture4;\n\t\t\t\tuniform sampler2D blurTexture5;\n\t\t\t\tuniform float bloomStrength;\n\t\t\t\tuniform float bloomRadius;\n\t\t\t\tuniform float bloomFactors[NUM_MIPS];\n\t\t\t\tuniform vec3 bloomTintColors[NUM_MIPS];\n\n\t\t\t\tfloat lerpBloomFactor( const in float factor ) {\n\n\t\t\t\t\tfloat mirrorFactor = 1.2 - factor;\n\t\t\t\t\treturn mix( factor, mirrorFactor, bloomRadius );\n\n\t\t\t\t}\n\n\t\t\t\tvoid main() {\n\n\t\t\t\t\t// 3.0 for backwards compatibility with previous alpha-based intensity\n\t\t\t\t\tvec3 bloom = 3.0 * bloomStrength * (\n\t\t\t\t\t\tlerpBloomFactor( bloomFactors[ 0 ] ) * bloomTintColors[ 0 ] * texture2D( blurTexture1, vUv ).rgb +\n\t\t\t\t\t\tlerpBloomFactor( bloomFactors[ 1 ] ) * bloomTintColors[ 1 ] * texture2D( blurTexture2, vUv ).rgb +\n\t\t\t\t\t\tlerpBloomFactor( bloomFactors[ 2 ] ) * bloomTintColors[ 2 ] * texture2D( blurTexture3, vUv ).rgb +\n\t\t\t\t\t\tlerpBloomFactor( bloomFactors[ 3 ] ) * bloomTintColors[ 3 ] * texture2D( blurTexture4, vUv ).rgb +\n\t\t\t\t\t\tlerpBloomFactor( bloomFactors[ 4 ] ) * bloomTintColors[ 4 ] * texture2D( blurTexture5, vUv ).rgb\n\t\t\t\t\t);\n\n\t\t\t\t\tfloat bloomAlpha = max( bloom.r, max( bloom.g, bloom.b ) );\n\t\t\t\t\tgl_FragColor = vec4( bloom, bloomAlpha );\n\n\t\t\t\t}`\n\t\t} );\n\n\t}\n\n}\n\nUnrealBloomPass.BlurDirectionX = new Vector2( 1.0, 0.0 );\nUnrealBloomPass.BlurDirectionY = new Vector2( 0.0, 1.0 );\n\nexport { UnrealBloomPass };\n","/**\n * @module CopyShader\n * @three_import import { CopyShader } from 'three/addons/shaders/CopyShader.js';\n */\n\n/**\n * Full-screen copy shader pass.\n *\n * @constant\n * @type {ShaderMaterial~Shader}\n */\nconst CopyShader = {\n\n\tname: 'CopyShader',\n\n\tuniforms: {\n\n\t\t'tDiffuse': { value: null },\n\t\t'opacity': { value: 1.0 }\n\n\t},\n\n\tvertexShader: /* glsl */`\n\n\t\tvarying vec2 vUv;\n\n\t\tvoid main() {\n\n\t\t\tvUv = uv;\n\t\t\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n\n\t\t}`,\n\n\tfragmentShader: /* glsl */`\n\n\t\tuniform float opacity;\n\n\t\tuniform sampler2D tDiffuse;\n\n\t\tvarying vec2 vUv;\n\n\t\tvoid main() {\n\n\t\t\tvec4 texel = texture2D( tDiffuse, vUv );\n\t\t\tgl_FragColor = opacity * texel;\n\n\n\t\t}`\n\n};\n\nexport { CopyShader };\n"],"names":["ShaderPass","Pass","constructor","shader","textureID","super","this","uniforms","material","clone","name","undefined","defines","Object","assign","vertexShader","fragmentShader","_fsQuad","F","render","renderer","writeBuffer","readBuffer","value","texture","renderToScreen","setRenderTarget","clear","autoClearColor","autoClearDepth","autoClearStencil","dispose","MaskPass","scene","camera","needsSwap","inverse","context","getContext","state","writeValue","clearValue","buffers","color","setMask","depth","setLocked","stencil","setTest","setOp","REPLACE","setFunc","ALWAYS","setClear","EQUAL","KEEP","ClearMaskPass","EffectComposer","renderTarget","_pixelRatio","getPixelRatio","size","getSize","_width","width","_height","height","type","renderTarget1","renderTarget2","passes","copyPass","CopyShader","blending","timer","swapBuffers","tmp","addPass","pass","push","setSize","insertPass","index","splice","removePass","indexOf","isLastEnabledPass","passIndex","i","length","enabled","deltaTime","update","getDelta","currentRenderTarget","getRenderTarget","maskActive","il","NOTEQUAL","reset","effectiveWidth","effectiveHeight","setPixelRatio","pixelRatio","isPass","console","error","_camera","FullscreenTriangleGeometry","setAttribute","_geometry","FullScreenQuad","_mesh","geometry","RenderPass","overrideMaterial","clearColor","clearAlpha","clearDepth","isRenderPass","_oldClearColor","oldAutoClear","autoClear","oldClearAlpha","oldOverrideMaterial","getClearColor","setClearColor","getClearAlpha","setClearAlpha","LuminosityHighPassShader","UnrealBloomPass","resolution","strength","radius","threshold","x","y","renderTargetsHorizontal","renderTargetsVertical","nMips","resx","Math","round","resy","renderTargetBright","generateMipmaps","renderTargetHorizontal","renderTargetVertical","highPassShader","highPassUniforms","materialHighPassFilter","separableBlurMaterials","kernelSizeArray","_getSeparableBlurMaterial","compositeMaterial","_getCompositeMaterial","bloomTintColors","copyUniforms","blendMaterial","premultipliedAlpha","depthTest","depthWrite","transparent","_oldClearAlpha","_basic","map","inputRenderTarget","BlurDirectionX","BlurDirectionY","kernelRadius","coefficients","sigma","exp"],"sourceRoot":""}