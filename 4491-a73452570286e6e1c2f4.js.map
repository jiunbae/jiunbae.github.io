{"version":3,"file":"4491-a73452570286e6e1c2f4.js","mappings":"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","sources":["webpack://jiunbae.github.io/./src/views/FluidSim/fluid.ts"],"sourcesContent":["/**\n * GPU-accelerated Navier-Stokes fluid simulation using WebGL.\n *\n * Pipeline (per frame):\n *   1. Advect velocity (semi-Lagrangian)\n *   2. Diffuse velocity (Jacobi)\n *   3. Add external forces (mouse / auto-splat)\n *   4. Vorticity confinement\n *   5. Compute divergence\n *   6. Pressure solve (Jacobi)\n *   7. Subtract pressure gradient\n *   8. Advect dye\n *   9. Display (bloom-like glow)\n */\n\n// ---------------------------------------------------------------------------\n// Types\n// ---------------------------------------------------------------------------\n\nexport interface FluidConfig {\n  viscosity: number       // 0 .. 1\n  curl: number            // vorticity confinement strength\n  pressure: number        // pressure iteration count\n  splatRadius: number     // base splat radius in sim-space\n}\n\ninterface DoubleFBO {\n  read: FBOHandle\n  write: FBOHandle\n  swap(): void\n}\n\ninterface FBOHandle {\n  texture: WebGLTexture\n  fbo: WebGLFramebuffer\n  width: number\n  height: number\n}\n\n// ---------------------------------------------------------------------------\n// Helpers\n// ---------------------------------------------------------------------------\n\nfunction compileShader(gl: WebGLRenderingContext, type: number, source: string): WebGLShader {\n  const shader = gl.createShader(type)\n  if (!shader) throw new Error('Failed to create shader — WebGL context may be lost')\n  gl.shaderSource(shader, source)\n  gl.compileShader(shader)\n  if (!gl.getShaderParameter(shader, gl.COMPILE_STATUS)) {\n    const info = gl.getShaderInfoLog(shader)\n    gl.deleteShader(shader)\n    throw new Error(`Shader compile error: ${info}`)\n  }\n  return shader\n}\n\nfunction createProgram(gl: WebGLRenderingContext, vertSrc: string, fragSrc: string) {\n  const program = gl.createProgram()\n  if (!program) throw new Error('Failed to create program — WebGL context may be lost')\n  gl.attachShader(program, compileShader(gl, gl.VERTEX_SHADER, vertSrc))\n  gl.attachShader(program, compileShader(gl, gl.FRAGMENT_SHADER, fragSrc))\n  gl.linkProgram(program)\n  if (!gl.getProgramParameter(program, gl.LINK_STATUS)) {\n    throw new Error(`Program link error: ${gl.getProgramInfoLog(program)}`)\n  }\n  return program\n}\n\nfunction getUniforms(gl: WebGLRenderingContext, program: WebGLProgram): Record<string, WebGLUniformLocation> {\n  const uniforms: Record<string, WebGLUniformLocation> = {}\n  const count = gl.getProgramParameter(program, gl.ACTIVE_UNIFORMS)\n  for (let i = 0; i < count; i++) {\n    const info = gl.getActiveUniform(program, i)!\n    const loc = gl.getUniformLocation(program, info.name)\n    if (loc) uniforms[info.name] = loc\n  }\n  return uniforms\n}\n\n// ---------------------------------------------------------------------------\n// Shader sources\n// ---------------------------------------------------------------------------\n\nconst BASE_VERT = `\n  attribute vec2 aPosition;\n  varying vec2 vUv;\n  varying vec2 vL;\n  varying vec2 vR;\n  varying vec2 vT;\n  varying vec2 vB;\n  uniform vec2 texelSize;\n  void main () {\n    vUv = aPosition * 0.5 + 0.5;\n    vL = vUv - vec2(texelSize.x, 0.0);\n    vR = vUv + vec2(texelSize.x, 0.0);\n    vT = vUv + vec2(0.0, texelSize.y);\n    vB = vUv - vec2(0.0, texelSize.y);\n    gl_Position = vec4(aPosition, 0.0, 1.0);\n  }\n`\n\nconst SPLAT_FRAG = `\n  precision highp float;\n  varying vec2 vUv;\n  uniform sampler2D uTarget;\n  uniform float aspectRatio;\n  uniform vec3 color;\n  uniform vec2 point;\n  uniform float radius;\n  void main () {\n    vec2 p = vUv - point;\n    p.x *= aspectRatio;\n    vec3 splat = exp(-dot(p, p) / radius) * color;\n    vec3 base = texture2D(uTarget, vUv).xyz;\n    gl_FragColor = vec4(base + splat, 1.0);\n  }\n`\n\nconst ADVECTION_FRAG = `\n  precision highp float;\n  varying vec2 vUv;\n  uniform sampler2D uVelocity;\n  uniform sampler2D uSource;\n  uniform vec2 texelSize;\n  uniform float dt;\n  uniform float dissipation;\n  void main () {\n    vec2 coord = vUv - dt * texture2D(uVelocity, vUv).xy * texelSize;\n    vec3 result = dissipation * texture2D(uSource, coord).xyz;\n    gl_FragColor = vec4(result, 1.0);\n  }\n`\n\nconst DIVERGENCE_FRAG = `\n  precision highp float;\n  varying vec2 vUv;\n  varying vec2 vL;\n  varying vec2 vR;\n  varying vec2 vT;\n  varying vec2 vB;\n  uniform sampler2D uVelocity;\n  void main () {\n    float L = texture2D(uVelocity, vL).x;\n    float R = texture2D(uVelocity, vR).x;\n    float T = texture2D(uVelocity, vT).y;\n    float B = texture2D(uVelocity, vB).y;\n    float div = 0.5 * (R - L + T - B);\n    gl_FragColor = vec4(div, 0.0, 0.0, 1.0);\n  }\n`\n\nconst PRESSURE_FRAG = `\n  precision highp float;\n  varying vec2 vUv;\n  varying vec2 vL;\n  varying vec2 vR;\n  varying vec2 vT;\n  varying vec2 vB;\n  uniform sampler2D uPressure;\n  uniform sampler2D uDivergence;\n  void main () {\n    float L = texture2D(uPressure, vL).x;\n    float R = texture2D(uPressure, vR).x;\n    float T = texture2D(uPressure, vT).x;\n    float B = texture2D(uPressure, vB).x;\n    float div = texture2D(uDivergence, vUv).x;\n    float pressure = (L + R + B + T - div) * 0.25;\n    gl_FragColor = vec4(pressure, 0.0, 0.0, 1.0);\n  }\n`\n\nconst GRADIENT_SUB_FRAG = `\n  precision highp float;\n  varying vec2 vUv;\n  varying vec2 vL;\n  varying vec2 vR;\n  varying vec2 vT;\n  varying vec2 vB;\n  uniform sampler2D uPressure;\n  uniform sampler2D uVelocity;\n  void main () {\n    float L = texture2D(uPressure, vL).x;\n    float R = texture2D(uPressure, vR).x;\n    float T = texture2D(uPressure, vT).x;\n    float B = texture2D(uPressure, vB).x;\n    vec2 velocity = texture2D(uVelocity, vUv).xy;\n    velocity.xy -= vec2(R - L, T - B);\n    gl_FragColor = vec4(velocity, 0.0, 1.0);\n  }\n`\n\nconst CURL_FRAG = `\n  precision highp float;\n  varying vec2 vUv;\n  varying vec2 vL;\n  varying vec2 vR;\n  varying vec2 vT;\n  varying vec2 vB;\n  uniform sampler2D uVelocity;\n  void main () {\n    float L = texture2D(uVelocity, vL).y;\n    float R = texture2D(uVelocity, vR).y;\n    float T = texture2D(uVelocity, vT).x;\n    float B = texture2D(uVelocity, vB).x;\n    float vorticity = R - L - T + B;\n    gl_FragColor = vec4(0.5 * vorticity, 0.0, 0.0, 1.0);\n  }\n`\n\nconst VORTICITY_FRAG = `\n  precision highp float;\n  varying vec2 vUv;\n  varying vec2 vL;\n  varying vec2 vR;\n  varying vec2 vT;\n  varying vec2 vB;\n  uniform sampler2D uVelocity;\n  uniform sampler2D uCurl;\n  uniform float curl;\n  uniform float dt;\n  void main () {\n    float L = texture2D(uCurl, vL).x;\n    float R = texture2D(uCurl, vR).x;\n    float T = texture2D(uCurl, vT).x;\n    float B = texture2D(uCurl, vB).x;\n    float C = texture2D(uCurl, vUv).x;\n    vec2 force = 0.5 * vec2(abs(T) - abs(B), abs(R) - abs(L));\n    force /= length(force) + 0.0001;\n    force *= curl * C;\n    force.y *= -1.0;\n    vec2 velocity = texture2D(uVelocity, vUv).xy;\n    velocity += force * dt;\n    gl_FragColor = vec4(velocity, 0.0, 1.0);\n  }\n`\n\nconst DISPLAY_FRAG = `\n  precision highp float;\n  varying vec2 vUv;\n  uniform sampler2D uTexture;\n  void main () {\n    vec3 c = texture2D(uTexture, vUv).rgb;\n    // Subtle bloom: brighten saturated/bright areas\n    float brightness = max(c.r, max(c.g, c.b));\n    vec3 bloom = c * smoothstep(0.4, 1.2, brightness) * 0.6;\n    c += bloom;\n    // Tone-map\n    c = c / (1.0 + c);\n    // Slight vignette\n    vec2 uv = vUv * 2.0 - 1.0;\n    float vig = 1.0 - dot(uv * 0.4, uv * 0.4);\n    c *= vig;\n    gl_FragColor = vec4(c, 1.0);\n  }\n`\n\nconst CLEAR_FRAG = `\n  precision highp float;\n  varying vec2 vUv;\n  uniform sampler2D uTexture;\n  uniform float value;\n  void main () {\n    gl_FragColor = value * texture2D(uTexture, vUv);\n  }\n`\n\n// ---------------------------------------------------------------------------\n// Context loss overlay\n// ---------------------------------------------------------------------------\n\nfunction showContextLostOverlay(container: HTMLElement): HTMLDivElement {\n  const overlay = document.createElement('div')\n  overlay.style.cssText = 'position:absolute;inset:0;display:flex;align-items:center;justify-content:center;background:rgba(0,0,0,0.8);color:#fff;font:14px/1.5 sans-serif;cursor:pointer;z-index:100'\n  overlay.textContent = 'WebGL context lost — click to reload'\n  overlay.addEventListener('click', () => location.reload())\n  container.style.position = 'relative'\n  container.appendChild(overlay)\n  return overlay\n}\n\n// ---------------------------------------------------------------------------\n// Program wrapper\n// ---------------------------------------------------------------------------\n\nclass Program {\n  program: WebGLProgram\n  uniforms: Record<string, WebGLUniformLocation>\n  constructor(private gl: WebGLRenderingContext, vertSrc: string, fragSrc: string) {\n    this.program = createProgram(gl, vertSrc, fragSrc)\n    this.uniforms = getUniforms(gl, this.program)\n  }\n  bind() {\n    this.gl.useProgram(this.program)\n  }\n}\n\n// ---------------------------------------------------------------------------\n// Main simulation class\n// ---------------------------------------------------------------------------\n\nexport class FluidSimulation {\n  private canvas: HTMLCanvasElement\n  private gl!: WebGLRenderingContext\n  private ext: {\n    halfFloatType: number\n    supportLinearFiltering: boolean\n  } = { halfFloatType: 0, supportLinearFiltering: false }\n\n  // Programs\n  private splatProgram!: Program\n  private advectionProgram!: Program\n  private divergenceProgram!: Program\n  private pressureProgram!: Program\n  private gradientSubProgram!: Program\n  private curlProgram!: Program\n  private vorticityProgram!: Program\n  private displayProgram!: Program\n  private clearProgram!: Program\n\n  // Framebuffers\n  private velocity!: DoubleFBO\n  private pressure!: DoubleFBO\n  private divergenceFBO!: FBOHandle\n  private curlFBO!: FBOHandle\n  private dye!: DoubleFBO\n\n  // Geometry\n  private quadVAO!: WebGLBuffer\n\n  // Dimensions\n  private simWidth = 0\n  private simHeight = 0\n  private dyeWidth = 0\n  private dyeHeight = 0\n\n  // Config\n  private config: FluidConfig = {\n    viscosity: 0.3,\n    curl: 30,\n    pressure: 30,\n    splatRadius: 0.25,\n  }\n\n  // Mouse\n  private pointer = {\n    x: 0, y: 0,\n    prevX: 0, prevY: 0,\n    dx: 0, dy: 0,\n    down: false,\n    moved: false,\n    color: [0.5, 0.0, 0.8] as [number, number, number],\n  }\n\n  // Auto-splat\n  private lastInteraction = 0\n  private autoSplatTimer = 0\n  private time = 0\n\n  private animationId = 0\n  private disposed = false\n  private resizeObserver: ResizeObserver | null = null\n\n  constructor(private container: HTMLDivElement) {\n    this.canvas = document.createElement('canvas')\n    this.canvas.style.width = '100%'\n    this.canvas.style.height = '100%'\n    this.canvas.style.display = 'block'\n    container.appendChild(this.canvas)\n\n    this.initGL()\n\n    this.canvas.addEventListener('webglcontextlost', this.handleContextLost)\n    this.canvas.addEventListener('webglcontextrestored', this.handleContextRestored)\n\n    this.initPrograms()\n    this.initQuad()\n    this.initFramebuffers()\n    this.initListeners()\n    this.lastInteraction = performance.now()\n    this.animate()\n  }\n\n  // --- Public API ---\n\n  setConfig(partial: Partial<FluidConfig>) {\n    Object.assign(this.config, partial)\n  }\n\n  getConfig(): FluidConfig {\n    return { ...this.config }\n  }\n\n  splat(x: number, y: number, dx: number, dy: number, color?: [number, number, number]) {\n    const c = color ?? this.randomColor()\n    this.splatAtPoint(x, y, dx, dy, c)\n  }\n\n  resize() {\n    this.resizeCanvas()\n    this.initFramebuffers()\n  }\n\n  dispose() {\n    this.disposed = true\n    cancelAnimationFrame(this.animationId)\n    this.removeListeners()\n    this.canvas.removeEventListener('webglcontextlost', this.handleContextLost)\n    this.canvas.removeEventListener('webglcontextrestored', this.handleContextRestored)\n    if (this.resizeObserver) {\n      this.resizeObserver.disconnect()\n      this.resizeObserver = null\n    }\n\n    // Explicit WebGL resource cleanup\n    const gl = this.gl\n\n    const deleteFBO = (handle: FBOHandle) => {\n      gl.deleteTexture(handle.texture)\n      gl.deleteFramebuffer(handle.fbo)\n    }\n    const deleteDoubleFBO = (dfbo: DoubleFBO) => {\n      deleteFBO(dfbo.read)\n      deleteFBO(dfbo.write)\n    }\n\n    deleteDoubleFBO(this.velocity)\n    deleteDoubleFBO(this.pressure)\n    deleteDoubleFBO(this.dye)\n    deleteFBO(this.divergenceFBO)\n    deleteFBO(this.curlFBO)\n\n    gl.deleteBuffer(this.quadVAO)\n\n    const programs = [\n      this.splatProgram, this.advectionProgram, this.divergenceProgram,\n      this.pressureProgram, this.gradientSubProgram, this.curlProgram,\n      this.vorticityProgram, this.displayProgram, this.clearProgram,\n    ]\n    for (const p of programs) {\n      gl.deleteProgram(p.program)\n    }\n\n    gl.getExtension('WEBGL_lose_context')?.loseContext()\n    if (this.canvas.parentElement) {\n      this.canvas.parentElement.removeChild(this.canvas)\n    }\n  }\n\n  // --- Init ---\n\n  private initGL() {\n    const params: WebGLContextAttributes = {\n      alpha: true,\n      depth: false,\n      stencil: false,\n      antialias: false,\n      preserveDrawingBuffer: false,\n    }\n    const gl = this.canvas.getContext('webgl', params) || this.canvas.getContext('experimental-webgl', params) as WebGLRenderingContext\n    if (!gl) throw new Error('WebGL not supported')\n    this.gl = gl\n\n    // Extensions\n    const halfFloat = gl.getExtension('OES_texture_half_float')\n    const halfFloatLinear = gl.getExtension('OES_texture_half_float_linear')\n    const floatExt = gl.getExtension('OES_texture_float')\n    const floatLinear = gl.getExtension('OES_texture_float_linear')\n\n    let halfFloatType: number\n    let supportLinearFiltering: boolean\n\n    if (halfFloat) {\n      halfFloatType = halfFloat.HALF_FLOAT_OES\n      supportLinearFiltering = !!halfFloatLinear\n    } else if (floatExt) {\n      halfFloatType = gl.FLOAT\n      supportLinearFiltering = !!floatLinear\n    } else {\n      halfFloatType = gl.UNSIGNED_BYTE\n      supportLinearFiltering = true\n    }\n\n    this.ext = { halfFloatType, supportLinearFiltering }\n\n    this.resizeCanvas()\n  }\n\n  private resizeCanvas() {\n    const dpr = Math.min(window.devicePixelRatio, 2)\n    const w = this.container.clientWidth\n    const h = this.container.clientHeight\n    this.canvas.width = w * dpr\n    this.canvas.height = h * dpr\n\n    // Sim at half resolution for performance\n    this.simWidth = Math.floor(w * dpr * 0.5)\n    this.simHeight = Math.floor(h * dpr * 0.5)\n    // Dye at 3/4 resolution for sharper colors\n    this.dyeWidth = Math.floor(w * dpr * 0.75)\n    this.dyeHeight = Math.floor(h * dpr * 0.75)\n  }\n\n  private initPrograms() {\n    const gl = this.gl\n    this.splatProgram = new Program(gl, BASE_VERT, SPLAT_FRAG)\n    this.advectionProgram = new Program(gl, BASE_VERT, ADVECTION_FRAG)\n    this.divergenceProgram = new Program(gl, BASE_VERT, DIVERGENCE_FRAG)\n    this.pressureProgram = new Program(gl, BASE_VERT, PRESSURE_FRAG)\n    this.gradientSubProgram = new Program(gl, BASE_VERT, GRADIENT_SUB_FRAG)\n    this.curlProgram = new Program(gl, BASE_VERT, CURL_FRAG)\n    this.vorticityProgram = new Program(gl, BASE_VERT, VORTICITY_FRAG)\n    this.displayProgram = new Program(gl, BASE_VERT, DISPLAY_FRAG)\n    this.clearProgram = new Program(gl, BASE_VERT, CLEAR_FRAG)\n  }\n\n  private initQuad() {\n    const gl = this.gl\n    const buf = gl.createBuffer()!\n    gl.bindBuffer(gl.ARRAY_BUFFER, buf)\n    gl.bufferData(gl.ARRAY_BUFFER, new Float32Array([-1, -1, -1, 1, 1, 1, 1, -1]), gl.STATIC_DRAW)\n    this.quadVAO = buf\n  }\n\n  private initFramebuffers() {\n    const gl = this.gl\n    const simW = this.simWidth\n    const simH = this.simHeight\n    const dyeW = this.dyeWidth\n    const dyeH = this.dyeHeight\n\n    const texType = this.ext.halfFloatType\n    const filtering = this.ext.supportLinearFiltering ? gl.LINEAR : gl.NEAREST\n\n    this.velocity = this.createDoubleFBO(simW, simH, gl.RGBA, texType, filtering)\n    this.pressure = this.createDoubleFBO(simW, simH, gl.RGBA, texType, gl.NEAREST)\n    this.divergenceFBO = this.createFBO(simW, simH, gl.RGBA, texType, gl.NEAREST)\n    this.curlFBO = this.createFBO(simW, simH, gl.RGBA, texType, gl.NEAREST)\n    this.dye = this.createDoubleFBO(dyeW, dyeH, gl.RGBA, texType, filtering)\n  }\n\n  private createFBO(w: number, h: number, internalFormat: number, type: number, filter: number): FBOHandle {\n    const gl = this.gl\n    const texture = gl.createTexture()!\n    gl.bindTexture(gl.TEXTURE_2D, texture)\n    gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MIN_FILTER, filter)\n    gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MAG_FILTER, filter)\n    gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_S, gl.CLAMP_TO_EDGE)\n    gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_T, gl.CLAMP_TO_EDGE)\n    gl.texImage2D(gl.TEXTURE_2D, 0, internalFormat, w, h, 0, gl.RGBA, type, null)\n\n    const fbo = gl.createFramebuffer()!\n    gl.bindFramebuffer(gl.FRAMEBUFFER, fbo)\n    gl.framebufferTexture2D(gl.FRAMEBUFFER, gl.COLOR_ATTACHMENT0, gl.TEXTURE_2D, texture, 0)\n    gl.viewport(0, 0, w, h)\n    gl.clear(gl.COLOR_BUFFER_BIT)\n\n    return { texture, fbo, width: w, height: h }\n  }\n\n  private createDoubleFBO(w: number, h: number, internalFormat: number, type: number, filter: number): DoubleFBO {\n    let fbo1 = this.createFBO(w, h, internalFormat, type, filter)\n    let fbo2 = this.createFBO(w, h, internalFormat, type, filter)\n    return {\n      get read() { return fbo1 },\n      get write() { return fbo2 },\n      swap() { const t = fbo1; fbo1 = fbo2; fbo2 = t },\n    }\n  }\n\n  // --- Drawing helpers ---\n\n  private blit(dest: FBOHandle | null) {\n    const gl = this.gl\n    if (dest) {\n      gl.bindFramebuffer(gl.FRAMEBUFFER, dest.fbo)\n      gl.viewport(0, 0, dest.width, dest.height)\n    } else {\n      gl.bindFramebuffer(gl.FRAMEBUFFER, null)\n      gl.viewport(0, 0, this.canvas.width, this.canvas.height)\n    }\n    gl.bindBuffer(gl.ARRAY_BUFFER, this.quadVAO)\n    gl.vertexAttribPointer(0, 2, gl.FLOAT, false, 0, 0)\n    gl.enableVertexAttribArray(0)\n    gl.drawArrays(gl.TRIANGLE_FAN, 0, 4)\n  }\n\n  // --- Simulation steps ---\n\n  private step(dt: number) {\n    const gl = this.gl\n\n    // Dissipation scales with viscosity (lower viscosity = more dissipation for interesting flow)\n    const velocityDissipation = 1.0 - this.config.viscosity * 0.02\n    const dyeDissipation = 0.97 - this.config.viscosity * 0.005\n\n    // 1. Curl\n    this.curlProgram.bind()\n    gl.uniform2f(this.curlProgram.uniforms['texelSize'], 1.0 / this.simWidth, 1.0 / this.simHeight)\n    gl.uniform1i(this.curlProgram.uniforms['uVelocity'], 0)\n    gl.activeTexture(gl.TEXTURE0)\n    gl.bindTexture(gl.TEXTURE_2D, this.velocity.read.texture)\n    this.blit(this.curlFBO)\n\n    // 2. Vorticity confinement\n    this.vorticityProgram.bind()\n    gl.uniform2f(this.vorticityProgram.uniforms['texelSize'], 1.0 / this.simWidth, 1.0 / this.simHeight)\n    gl.uniform1i(this.vorticityProgram.uniforms['uVelocity'], 0)\n    gl.activeTexture(gl.TEXTURE0)\n    gl.bindTexture(gl.TEXTURE_2D, this.velocity.read.texture)\n    gl.uniform1i(this.vorticityProgram.uniforms['uCurl'], 1)\n    gl.activeTexture(gl.TEXTURE1)\n    gl.bindTexture(gl.TEXTURE_2D, this.curlFBO.texture)\n    gl.uniform1f(this.vorticityProgram.uniforms['curl'], this.config.curl)\n    gl.uniform1f(this.vorticityProgram.uniforms['dt'], dt)\n    this.blit(this.velocity.write)\n    this.velocity.swap()\n\n    // 3. Advect velocity\n    this.advectionProgram.bind()\n    gl.uniform2f(this.advectionProgram.uniforms['texelSize'], 1.0 / this.simWidth, 1.0 / this.simHeight)\n    gl.uniform1i(this.advectionProgram.uniforms['uVelocity'], 0)\n    gl.activeTexture(gl.TEXTURE0)\n    gl.bindTexture(gl.TEXTURE_2D, this.velocity.read.texture)\n    gl.uniform1i(this.advectionProgram.uniforms['uSource'], 0)\n    gl.uniform1f(this.advectionProgram.uniforms['dt'], dt)\n    gl.uniform1f(this.advectionProgram.uniforms['dissipation'], velocityDissipation)\n    this.blit(this.velocity.write)\n    this.velocity.swap()\n\n    // 4. Advect dye\n    this.advectionProgram.bind()\n    gl.uniform2f(this.advectionProgram.uniforms['texelSize'], 1.0 / this.simWidth, 1.0 / this.simHeight)\n    gl.uniform1i(this.advectionProgram.uniforms['uVelocity'], 0)\n    gl.activeTexture(gl.TEXTURE0)\n    gl.bindTexture(gl.TEXTURE_2D, this.velocity.read.texture)\n    gl.uniform1i(this.advectionProgram.uniforms['uSource'], 1)\n    gl.activeTexture(gl.TEXTURE1)\n    gl.bindTexture(gl.TEXTURE_2D, this.dye.read.texture)\n    gl.uniform1f(this.advectionProgram.uniforms['dissipation'], dyeDissipation)\n    this.blit(this.dye.write)\n    this.dye.swap()\n\n    // 5. Divergence\n    this.divergenceProgram.bind()\n    gl.uniform2f(this.divergenceProgram.uniforms['texelSize'], 1.0 / this.simWidth, 1.0 / this.simHeight)\n    gl.uniform1i(this.divergenceProgram.uniforms['uVelocity'], 0)\n    gl.activeTexture(gl.TEXTURE0)\n    gl.bindTexture(gl.TEXTURE_2D, this.velocity.read.texture)\n    this.blit(this.divergenceFBO)\n\n    // 6. Clear pressure\n    this.clearProgram.bind()\n    gl.uniform1i(this.clearProgram.uniforms['uTexture'], 0)\n    gl.activeTexture(gl.TEXTURE0)\n    gl.bindTexture(gl.TEXTURE_2D, this.pressure.read.texture)\n    gl.uniform1f(this.clearProgram.uniforms['value'], 0.8)\n    this.blit(this.pressure.write)\n    this.pressure.swap()\n\n    // 7. Pressure solve (Jacobi iterations)\n    this.pressureProgram.bind()\n    gl.uniform2f(this.pressureProgram.uniforms['texelSize'], 1.0 / this.simWidth, 1.0 / this.simHeight)\n    gl.uniform1i(this.pressureProgram.uniforms['uDivergence'], 1)\n    gl.activeTexture(gl.TEXTURE1)\n    gl.bindTexture(gl.TEXTURE_2D, this.divergenceFBO.texture)\n    for (let i = 0; i < this.config.pressure; i++) {\n      gl.uniform1i(this.pressureProgram.uniforms['uPressure'], 0)\n      gl.activeTexture(gl.TEXTURE0)\n      gl.bindTexture(gl.TEXTURE_2D, this.pressure.read.texture)\n      this.blit(this.pressure.write)\n      this.pressure.swap()\n    }\n\n    // 8. Subtract pressure gradient\n    this.gradientSubProgram.bind()\n    gl.uniform2f(this.gradientSubProgram.uniforms['texelSize'], 1.0 / this.simWidth, 1.0 / this.simHeight)\n    gl.uniform1i(this.gradientSubProgram.uniforms['uPressure'], 0)\n    gl.activeTexture(gl.TEXTURE0)\n    gl.bindTexture(gl.TEXTURE_2D, this.pressure.read.texture)\n    gl.uniform1i(this.gradientSubProgram.uniforms['uVelocity'], 1)\n    gl.activeTexture(gl.TEXTURE1)\n    gl.bindTexture(gl.TEXTURE_2D, this.velocity.read.texture)\n    this.blit(this.velocity.write)\n    this.velocity.swap()\n  }\n\n  private splatAtPoint(x: number, y: number, dx: number, dy: number, color: [number, number, number]) {\n    const gl = this.gl\n\n    // Splat velocity\n    this.splatProgram.bind()\n    gl.uniform1i(this.splatProgram.uniforms['uTarget'], 0)\n    gl.activeTexture(gl.TEXTURE0)\n    gl.bindTexture(gl.TEXTURE_2D, this.velocity.read.texture)\n    gl.uniform1f(this.splatProgram.uniforms['aspectRatio'], this.canvas.width / this.canvas.height)\n    gl.uniform2f(this.splatProgram.uniforms['point'], x, y)\n    gl.uniform3f(this.splatProgram.uniforms['color'], dx, dy, 0.0)\n    gl.uniform1f(this.splatProgram.uniforms['radius'], this.correctRadius(this.config.splatRadius * 0.01))\n    this.blit(this.velocity.write)\n    this.velocity.swap()\n\n    // Splat dye\n    gl.uniform1i(this.splatProgram.uniforms['uTarget'], 0)\n    gl.activeTexture(gl.TEXTURE0)\n    gl.bindTexture(gl.TEXTURE_2D, this.dye.read.texture)\n    gl.uniform3f(this.splatProgram.uniforms['color'], color[0], color[1], color[2])\n    gl.uniform1f(this.splatProgram.uniforms['radius'], this.correctRadius(this.config.splatRadius * 0.01))\n    this.blit(this.dye.write)\n    this.dye.swap()\n  }\n\n  private correctRadius(radius: number): number {\n    const aspectRatio = this.canvas.width / this.canvas.height\n    if (aspectRatio > 1) {\n      return radius * aspectRatio\n    }\n    return radius\n  }\n\n  private display() {\n    const gl = this.gl\n    this.displayProgram.bind()\n    gl.uniform1i(this.displayProgram.uniforms['uTexture'], 0)\n    gl.activeTexture(gl.TEXTURE0)\n    gl.bindTexture(gl.TEXTURE_2D, this.dye.read.texture)\n    this.blit(null) // draw to screen\n  }\n\n  // --- Color ---\n\n  private hue = 0\n  private randomColor(): [number, number, number] {\n    this.hue += 0.03 + Math.random() * 0.05\n    if (this.hue > 1) this.hue -= 1\n    return this.hsvToRgb(this.hue, 1.0, 1.0)\n  }\n\n  private mouseColor(): [number, number, number] {\n    // Color based on mouse position + cycling\n    const t = performance.now() * 0.001\n    const h = (this.pointer.x * 0.3 + this.pointer.y * 0.3 + t * 0.1) % 1\n    return this.hsvToRgb(h < 0 ? h + 1 : h, 1.0, 1.0)\n  }\n\n  private hsvToRgb(h: number, s: number, v: number): [number, number, number] {\n    const i = Math.floor(h * 6)\n    const f = h * 6 - i\n    const p = v * (1 - s)\n    const q = v * (1 - f * s)\n    const t = v * (1 - (1 - f) * s)\n    let r: number, g: number, b: number\n    switch (i % 6) {\n      case 0: r = v; g = t; b = p; break\n      case 1: r = q; g = v; b = p; break\n      case 2: r = p; g = v; b = t; break\n      case 3: r = p; g = q; b = v; break\n      case 4: r = t; g = p; b = v; break\n      case 5: r = v; g = p; b = q; break\n      default: r = 0; g = 0; b = 0\n    }\n    return [r, g, b]\n  }\n\n  // --- Auto splats ---\n\n  private generateAutoSplat() {\n    const x = Math.random()\n    const y = Math.random()\n    const angle = Math.random() * Math.PI * 2\n    const speed = 80 + Math.random() * 200\n    const dx = Math.cos(angle) * speed\n    const dy = Math.sin(angle) * speed\n    const color = this.randomColor()\n    this.splatAtPoint(x, y, dx, dy, color)\n  }\n\n  private generateMultipleSplats(count: number) {\n    for (let i = 0; i < count; i++) {\n      this.generateAutoSplat()\n    }\n  }\n\n  // --- Input ---\n\n  private onMouseDown = (e: MouseEvent) => {\n    this.pointer.down = true\n    this.updatePointerPosition(e.clientX, e.clientY)\n    this.pointer.prevX = this.pointer.x\n    this.pointer.prevY = this.pointer.y\n    this.lastInteraction = performance.now()\n  }\n\n  private onMouseMove = (e: MouseEvent) => {\n    this.pointer.prevX = this.pointer.x\n    this.pointer.prevY = this.pointer.y\n    this.updatePointerPosition(e.clientX, e.clientY)\n    this.pointer.moved = true\n    this.lastInteraction = performance.now()\n  }\n\n  private onMouseUp = () => {\n    this.pointer.down = false\n  }\n\n  private onTouchStart = (e: TouchEvent) => {\n    e.preventDefault()\n    const touch = e.touches[0]\n    this.pointer.down = true\n    this.updatePointerPosition(touch.clientX, touch.clientY)\n    this.pointer.prevX = this.pointer.x\n    this.pointer.prevY = this.pointer.y\n    this.lastInteraction = performance.now()\n  }\n\n  private onTouchMove = (e: TouchEvent) => {\n    e.preventDefault()\n    const touch = e.touches[0]\n    this.pointer.prevX = this.pointer.x\n    this.pointer.prevY = this.pointer.y\n    this.updatePointerPosition(touch.clientX, touch.clientY)\n    this.pointer.moved = true\n    this.lastInteraction = performance.now()\n  }\n\n  private onTouchEnd = () => {\n    this.pointer.down = false\n  }\n\n  private updatePointerPosition(clientX: number, clientY: number) {\n    const rect = this.canvas.getBoundingClientRect()\n    this.pointer.x = (clientX - rect.left) / rect.width\n    this.pointer.y = 1.0 - (clientY - rect.top) / rect.height\n  }\n\n  private initListeners() {\n    this.canvas.addEventListener('mousedown', this.onMouseDown)\n    this.canvas.addEventListener('mousemove', this.onMouseMove)\n    window.addEventListener('mouseup', this.onMouseUp)\n    this.canvas.addEventListener('touchstart', this.onTouchStart, { passive: false })\n    this.canvas.addEventListener('touchmove', this.onTouchMove, { passive: false })\n    window.addEventListener('touchend', this.onTouchEnd)\n\n    this.resizeObserver = new ResizeObserver(() => {\n      if (!this.disposed) this.resize()\n    })\n    this.resizeObserver.observe(this.container)\n\n    // Initial splats for visual interest\n    setTimeout(() => {\n      if (!this.disposed) this.generateMultipleSplats(5)\n    }, 100)\n  }\n\n  private removeListeners() {\n    this.canvas.removeEventListener('mousedown', this.onMouseDown)\n    this.canvas.removeEventListener('mousemove', this.onMouseMove)\n    window.removeEventListener('mouseup', this.onMouseUp)\n    this.canvas.removeEventListener('touchstart', this.onTouchStart)\n    this.canvas.removeEventListener('touchmove', this.onTouchMove)\n    window.removeEventListener('touchend', this.onTouchEnd)\n  }\n\n  // --- Context loss ---\n\n  private handleContextLost = (e: Event) => {\n    e.preventDefault()\n    cancelAnimationFrame(this.animationId)\n    showContextLostOverlay(this.container)\n  }\n\n  private handleContextRestored = () => {\n    location.reload()\n  }\n\n  // --- Main loop ---\n\n  private lastTime = 0\n\n  private animate = () => {\n    if (this.disposed) return\n    this.animationId = requestAnimationFrame(this.animate)\n\n    const now = performance.now()\n    const dt = Math.min((now - (this.lastTime || now)) * 0.001, 0.016667)\n    this.lastTime = now\n    this.time += dt\n\n    // Process mouse input\n    if (this.pointer.moved) {\n      this.pointer.moved = false\n      const dx = (this.pointer.x - this.pointer.prevX) * this.canvas.width\n      const dy = (this.pointer.y - this.pointer.prevY) * this.canvas.height\n      const speed = Math.sqrt(dx * dx + dy * dy)\n\n      if (this.pointer.down && speed > 0.5) {\n        const color = this.mouseColor()\n        const scaledDx = dx * 10\n        const scaledDy = dy * 10\n        this.splatAtPoint(this.pointer.x, this.pointer.y, scaledDx, scaledDy, color)\n      }\n    }\n\n    // Auto splats when idle\n    const idleTime = now - this.lastInteraction\n    if (idleTime > 3000) {\n      this.autoSplatTimer += dt\n      if (this.autoSplatTimer > 0.4) {\n        this.autoSplatTimer = 0\n        this.generateAutoSplat()\n      }\n    } else {\n      this.autoSplatTimer = 0\n    }\n\n    this.step(dt)\n    this.display()\n  }\n}\n"],"names":["compileShader","gl","type","source","shader","createShader","Error","shaderSource","getShaderParameter","COMPILE_STATUS","info","getShaderInfoLog","deleteShader","BASE_VERT","Program","vertSrc","fragSrc","this","program","createProgram","attachShader","VERTEX_SHADER","FRAGMENT_SHADER","linkProgram","getProgramParameter","LINK_STATUS","getProgramInfoLog","uniforms","count","ACTIVE_UNIFORMS","i","getActiveUniform","loc","getUniformLocation","name","getUniforms","prototype","bind","useProgram","FluidSimulation","container","ext","halfFloatType","supportLinearFiltering","simWidth","simHeight","dyeWidth","dyeHeight","config","viscosity","curl","pressure","splatRadius","pointer","x","y","prevX","prevY","dx","dy","down","moved","color","lastInteraction","autoSplatTimer","time","animationId","disposed","resizeObserver","hue","onMouseDown","e","updatePointerPosition","clientX","clientY","performance","now","onMouseMove","onMouseUp","onTouchStart","preventDefault","touch","touches","onTouchMove","onTouchEnd","handleContextLost","cancelAnimationFrame","overlay","document","createElement","style","cssText","textContent","addEventListener","location","reload","position","appendChild","showContextLostOverlay","handleContextRestored","lastTime","animate","requestAnimationFrame","dt","Math","min","canvas","width","height","speed","sqrt","mouseColor","scaledDx","scaledDy","splatAtPoint","generateAutoSplat","step","display","initGL","initPrograms","initQuad","initFramebuffers","initListeners","_proto2","setConfig","partial","Object","assign","getConfig","splat","c","randomColor","resize","resizeCanvas","dispose","_gl$getExtension","removeListeners","removeEventListener","disconnect","deleteFBO","handle","deleteTexture","texture","deleteFramebuffer","fbo","deleteDoubleFBO","dfbo","read","write","velocity","dye","divergenceFBO","curlFBO","deleteBuffer","quadVAO","programs","splatProgram","advectionProgram","divergenceProgram","pressureProgram","gradientSubProgram","curlProgram","vorticityProgram","displayProgram","clearProgram","p","deleteProgram","getExtension","loseContext","parentElement","removeChild","params","alpha","depth","stencil","antialias","preserveDrawingBuffer","getContext","halfFloat","halfFloatLinear","floatExt","floatLinear","HALF_FLOAT_OES","FLOAT","UNSIGNED_BYTE","dpr","window","devicePixelRatio","w","clientWidth","h","clientHeight","floor","buf","createBuffer","bindBuffer","ARRAY_BUFFER","bufferData","Float32Array","STATIC_DRAW","simW","simH","dyeW","dyeH","texType","filtering","LINEAR","NEAREST","createDoubleFBO","RGBA","createFBO","internalFormat","filter","createTexture","bindTexture","TEXTURE_2D","texParameteri","TEXTURE_MIN_FILTER","TEXTURE_MAG_FILTER","TEXTURE_WRAP_S","CLAMP_TO_EDGE","TEXTURE_WRAP_T","texImage2D","createFramebuffer","bindFramebuffer","FRAMEBUFFER","framebufferTexture2D","COLOR_ATTACHMENT0","viewport","clear","COLOR_BUFFER_BIT","fbo1","fbo2","swap","t","blit","dest","vertexAttribPointer","enableVertexAttribArray","drawArrays","TRIANGLE_FAN","velocityDissipation","dyeDissipation","uniform2f","uniform1i","activeTexture","TEXTURE0","TEXTURE1","uniform1f","uniform3f","correctRadius","radius","aspectRatio","random","hsvToRgb","s","v","f","q","r","g","b","angle","PI","cos","sin","generateMultipleSplats","rect","getBoundingClientRect","left","top","passive","ResizeObserver","observe","setTimeout"],"sourceRoot":""}