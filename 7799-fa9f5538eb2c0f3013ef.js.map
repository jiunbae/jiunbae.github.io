{"version":3,"file":"7799-fa9f5538eb2c0f3013ef.js","mappings":"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","sources":["webpack://jiunbae.github.io/./src/views/CyberFlowers/scene.ts"],"sourcesContent":["import * as THREE from 'three'\nimport { OrbitControls } from 'three/examples/jsm/controls/OrbitControls.js'\nimport { EffectComposer } from 'three/examples/jsm/postprocessing/EffectComposer.js'\nimport { RenderPass } from 'three/examples/jsm/postprocessing/RenderPass.js'\nimport { UnrealBloomPass } from 'three/examples/jsm/postprocessing/UnrealBloomPass.js'\n\nexport type FlowerStyle = 'neon' | 'holographic' | 'retro'\n\ninterface FlowerData {\n  group: THREE.Group\n  style: FlowerStyle\n  birthTime: number\n  swayOffset: number\n  swaySpeed: number\n  targetScale: number\n}\n\nexport class CyberFlowerScene {\n  private renderer!: THREE.WebGLRenderer\n  private scene!: THREE.Scene\n  private camera!: THREE.PerspectiveCamera\n  private controls!: OrbitControls\n  private composer!: EffectComposer\n  private bloomPass!: UnrealBloomPass\n  private raycaster = new THREE.Raycaster()\n  private groundPlane!: THREE.Mesh\n  private flowers: FlowerData[] = []\n  private particles!: THREE.Points\n  private clock = new THREE.Clock()\n  private animationId = 0\n  private disposed = false\n  private timedShaderMaterials: THREE.ShaderMaterial[] = []\n\n  flowerStyle: FlowerStyle = 'neon'\n  accentColor = '#00ffff'\n\n  get autoRotate(): boolean {\n    return this.controls?.autoRotate ?? true\n  }\n\n  set autoRotate(value: boolean) {\n    if (this.controls) this.controls.autoRotate = value\n  }\n\n  get autoRotateSpeed(): number {\n    return this.controls?.autoRotateSpeed ?? 0.5\n  }\n\n  set autoRotateSpeed(value: number) {\n    if (this.controls) this.controls.autoRotateSpeed = value\n  }\n\n  get bloomStrength(): number {\n    return this.bloomPass?.strength ?? 1.0\n  }\n\n  set bloomStrength(value: number) {\n    if (this.bloomPass) this.bloomPass.strength = value\n  }\n\n  get particlesVisible(): boolean {\n    return this.particles?.visible ?? true\n  }\n\n  set particlesVisible(value: boolean) {\n    if (this.particles) this.particles.visible = value\n  }\n\n  get flowerCount(): number {\n    return this.flowers.length\n  }\n\n  resetCamera() {\n    if (!this.controls || !this.camera) return\n    this.camera.position.set(0, 6, 10)\n    this.controls.target.set(0, 1, 0)\n    this.controls.update()\n  }\n\n  constructor(private container: HTMLDivElement) {\n    this.init()\n    this.createEnvironment()\n    this.createParticles()\n    this.animate()\n  }\n\n  private init() {\n    const { clientWidth: w, clientHeight: h } = this.container\n\n    // Renderer\n    this.renderer = new THREE.WebGLRenderer({ antialias: true, alpha: false })\n    this.renderer.setSize(w, h)\n    this.renderer.setPixelRatio(Math.min(window.devicePixelRatio, 2))\n    this.renderer.toneMapping = THREE.ACESFilmicToneMapping\n    this.renderer.toneMappingExposure = 1.2\n    this.container.appendChild(this.renderer.domElement)\n\n    this.renderer.domElement.addEventListener('webglcontextlost', this.handleContextLost)\n    this.renderer.domElement.addEventListener('webglcontextrestored', this.handleContextRestored)\n\n    // Scene\n    this.scene = new THREE.Scene()\n    this.scene.background = new THREE.Color(0x0a0a0a)\n    this.scene.fog = new THREE.FogExp2(0x0a0a0a, 0.035)\n\n    // Camera\n    this.camera = new THREE.PerspectiveCamera(60, w / h, 0.1, 100)\n    this.camera.position.set(0, 6, 10)\n\n    // Controls\n    this.controls = new OrbitControls(this.camera, this.renderer.domElement)\n    this.controls.enableDamping = true\n    this.controls.dampingFactor = 0.05\n    this.controls.autoRotate = true\n    this.controls.autoRotateSpeed = 0.5\n    this.controls.maxPolarAngle = Math.PI / 2.1\n    this.controls.minDistance = 3\n    this.controls.maxDistance = 25\n    this.controls.target.set(0, 1, 0)\n\n    // Post-processing\n    this.composer = new EffectComposer(this.renderer)\n    this.composer.addPass(new RenderPass(this.scene, this.camera))\n    this.bloomPass = new UnrealBloomPass(new THREE.Vector2(w, h), 1.0, 0.4, 0.2)\n    this.composer.addPass(this.bloomPass)\n\n    // Lights\n    const ambient = new THREE.AmbientLight(0x111122, 0.5)\n    this.scene.add(ambient)\n\n    const pointLight1 = new THREE.PointLight(0x00ffff, 2, 30)\n    pointLight1.position.set(5, 8, 5)\n    this.scene.add(pointLight1)\n\n    const pointLight2 = new THREE.PointLight(0xff00ff, 2, 30)\n    pointLight2.position.set(-5, 8, -5)\n    this.scene.add(pointLight2)\n\n    const pointLight3 = new THREE.PointLight(0xff6ec7, 1.5, 20)\n    pointLight3.position.set(0, 3, 8)\n    this.scene.add(pointLight3)\n\n    // Resize\n    window.addEventListener('resize', this.onResize)\n  }\n\n  private createEnvironment() {\n    // Grid floor\n    const gridSize = 40\n    const gridGeo = new THREE.PlaneGeometry(gridSize, gridSize)\n    const gridMat = new THREE.ShaderMaterial({\n      transparent: true,\n      uniforms: {\n        uTime: { value: 0 },\n        uColor1: { value: new THREE.Color(0x00ffff) },\n        uColor2: { value: new THREE.Color(0xff00ff) }\n      },\n      vertexShader: `\n        varying vec2 vUv;\n        void main() {\n          vUv = uv;\n          gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);\n        }\n      `,\n      fragmentShader: `\n        uniform float uTime;\n        uniform vec3 uColor1;\n        uniform vec3 uColor2;\n        varying vec2 vUv;\n\n        void main() {\n          vec2 grid = abs(fract(vUv * 20.0 - 0.5) - 0.5);\n          float line = min(grid.x, grid.y);\n          float gridLine = 1.0 - smoothstep(0.0, 0.03, line);\n\n          vec2 grid2 = abs(fract(vUv * 4.0 - 0.5) - 0.5);\n          float line2 = min(grid2.x, grid2.y);\n          float majorLine = 1.0 - smoothstep(0.0, 0.02, line2);\n\n          float dist = length(vUv - 0.5) * 2.0;\n          float fade = 1.0 - smoothstep(0.2, 1.0, dist);\n\n          vec3 color = mix(uColor1, uColor2, sin(uTime * 0.3 + dist * 3.0) * 0.5 + 0.5);\n          float alpha = (gridLine * 0.15 + majorLine * 0.3) * fade;\n\n          gl_FragColor = vec4(color, alpha);\n        }\n      `\n    })\n    const grid = new THREE.Mesh(gridGeo, gridMat)\n    grid.rotation.x = -Math.PI / 2\n    grid.position.y = -0.01\n    this.scene.add(grid)\n    this.timedShaderMaterials.push(gridMat)\n\n    // Invisible ground for raycasting\n    const groundGeo = new THREE.PlaneGeometry(gridSize, gridSize)\n    const groundMat = new THREE.MeshBasicMaterial({ visible: false })\n    this.groundPlane = new THREE.Mesh(groundGeo, groundMat)\n    this.groundPlane.rotation.x = -Math.PI / 2\n    this.scene.add(this.groundPlane)\n  }\n\n  private createParticles() {\n    const count = 500\n    const positions = new Float32Array(count * 3)\n    const colors = new Float32Array(count * 3)\n    const sizes = new Float32Array(count)\n\n    const palette = [\n      new THREE.Color(0x00ffff),\n      new THREE.Color(0xff00ff),\n      new THREE.Color(0xff6ec7),\n      new THREE.Color(0x7b68ee)\n    ]\n\n    for (let i = 0; i < count; i++) {\n      positions[i * 3] = (Math.random() - 0.5) * 30\n      positions[i * 3 + 1] = Math.random() * 15\n      positions[i * 3 + 2] = (Math.random() - 0.5) * 30\n\n      const c = palette[Math.floor(Math.random() * palette.length)]\n      colors[i * 3] = c.r\n      colors[i * 3 + 1] = c.g\n      colors[i * 3 + 2] = c.b\n\n      sizes[i] = Math.random() * 3 + 1\n    }\n\n    const geo = new THREE.BufferGeometry()\n    geo.setAttribute('position', new THREE.BufferAttribute(positions, 3))\n    geo.setAttribute('color', new THREE.BufferAttribute(colors, 3))\n    geo.setAttribute('size', new THREE.BufferAttribute(sizes, 1))\n\n    const mat = new THREE.ShaderMaterial({\n      transparent: true,\n      depthWrite: false,\n      vertexColors: true,\n      uniforms: {\n        uTime: { value: 0 },\n        uPixelRatio: { value: Math.min(window.devicePixelRatio, 2) }\n      },\n      vertexShader: `\n        attribute float size;\n        varying vec3 vColor;\n        uniform float uTime;\n        uniform float uPixelRatio;\n\n        void main() {\n          vColor = color;\n          vec3 pos = position;\n          pos.y += sin(uTime * 0.5 + position.x * 0.5) * 0.3;\n          pos.x += cos(uTime * 0.3 + position.z * 0.3) * 0.2;\n\n          vec4 mvPos = modelViewMatrix * vec4(pos, 1.0);\n          gl_Position = projectionMatrix * mvPos;\n          gl_PointSize = size * uPixelRatio * (8.0 / -mvPos.z);\n        }\n      `,\n      fragmentShader: `\n        varying vec3 vColor;\n\n        void main() {\n          float d = length(gl_PointCoord - 0.5);\n          if (d > 0.5) discard;\n          float alpha = 1.0 - smoothstep(0.2, 0.5, d);\n          gl_FragColor = vec4(vColor, alpha * 0.6);\n        }\n      `\n    })\n\n    this.particles = new THREE.Points(geo, mat)\n    this.scene.add(this.particles)\n  }\n\n  plantFlower(ndcX: number, ndcY: number) {\n    const mouse = new THREE.Vector2(ndcX, ndcY)\n    this.raycaster.setFromCamera(mouse, this.camera)\n    const hits = this.raycaster.intersectObject(this.groundPlane)\n    if (hits.length === 0) return\n\n    const point = hits[0].point\n    // Clamp to a reasonable area\n    if (Math.abs(point.x) > 12 || Math.abs(point.z) > 12) return\n\n    const flower = this.createFlower(this.flowerStyle, new THREE.Color(this.accentColor))\n    flower.position.copy(point)\n    flower.position.y = 0\n    this.scene.add(flower)\n\n    // Register shader materials with uTime for cached updates (H-2 fix)\n    flower.traverse(child => {\n      if (child instanceof THREE.Mesh && child.material instanceof THREE.ShaderMaterial) {\n        if (child.material.uniforms.uTime) {\n          this.timedShaderMaterials.push(child.material)\n        }\n      }\n    })\n\n    this.flowers.push({\n      group: flower,\n      style: this.flowerStyle,\n      birthTime: this.clock.getElapsedTime(),\n      swayOffset: Math.random() * Math.PI * 2,\n      swaySpeed: 0.5 + Math.random() * 0.5,\n      targetScale: 0.8 + Math.random() * 0.4\n    })\n  }\n\n  private createFlower(style: FlowerStyle, accent: THREE.Color): THREE.Group {\n    const group = new THREE.Group()\n    group.scale.set(0.01, 0.01, 0.01) // Start tiny for grow animation\n\n    switch (style) {\n      case 'neon':\n        this.buildNeonFlower(group, accent)\n        break\n      case 'holographic':\n        this.buildHolographicFlower(group, accent)\n        break\n      case 'retro':\n        this.buildRetroFlower(group, accent)\n        break\n    }\n\n    return group\n  }\n\n  private buildNeonFlower(group: THREE.Group, accent: THREE.Color) {\n    const stemHeight = 1.5 + Math.random() * 1.5\n    const petalCount = 5 + Math.floor(Math.random() * 4)\n\n    // Stem - glowing tube\n    const stemCurve = new THREE.CatmullRomCurve3([\n      new THREE.Vector3(0, 0, 0),\n      new THREE.Vector3(0.1, stemHeight * 0.3, 0.05),\n      new THREE.Vector3(-0.05, stemHeight * 0.7, -0.05),\n      new THREE.Vector3(0, stemHeight, 0)\n    ])\n    const stemGeo = new THREE.TubeGeometry(stemCurve, 16, 0.04, 8, false)\n    const stemMat = new THREE.MeshStandardMaterial({\n      color: accent,\n      emissive: accent,\n      emissiveIntensity: 0.8,\n      roughness: 0.3\n    })\n    group.add(new THREE.Mesh(stemGeo, stemMat))\n\n    // Wireframe accent on stem\n    const wireGeo = new THREE.TubeGeometry(stemCurve, 8, 0.06, 6, false)\n    const wireMat = new THREE.MeshBasicMaterial({\n      color: accent,\n      wireframe: true,\n      transparent: true,\n      opacity: 0.3\n    })\n    group.add(new THREE.Mesh(wireGeo, wireMat))\n\n    // Center sphere\n    const centerGeo = new THREE.SphereGeometry(0.15, 16, 16)\n    const centerMat = new THREE.MeshStandardMaterial({\n      color: 0xffffff,\n      emissive: accent,\n      emissiveIntensity: 2.0\n    })\n    const center = new THREE.Mesh(centerGeo, centerMat)\n    center.position.y = stemHeight\n    group.add(center)\n\n    // Petals\n    for (let i = 0; i < petalCount; i++) {\n      const angle = (i / petalCount) * Math.PI * 2\n      const petalShape = new THREE.Shape()\n      petalShape.moveTo(0, 0)\n      petalShape.bezierCurveTo(0.15, 0.1, 0.2, 0.4, 0, 0.6)\n      petalShape.bezierCurveTo(-0.2, 0.4, -0.15, 0.1, 0, 0)\n\n      const petalGeo = new THREE.ShapeGeometry(petalShape)\n      const petalMat = new THREE.MeshStandardMaterial({\n        color: accent,\n        emissive: accent,\n        emissiveIntensity: 1.2,\n        side: THREE.DoubleSide,\n        transparent: true,\n        opacity: 0.85\n      })\n      const petal = new THREE.Mesh(petalGeo, petalMat)\n      petal.position.y = stemHeight\n      petal.rotation.y = angle\n      petal.rotation.x = -0.3 - Math.random() * 0.3\n      group.add(petal)\n    }\n  }\n\n  private buildHolographicFlower(group: THREE.Group, accent: THREE.Color) {\n    const stemHeight = 1.5 + Math.random() * 1.5\n    const petalCount = 6 + Math.floor(Math.random() * 3)\n\n    // Stem - iridescent\n    const stemCurve = new THREE.CatmullRomCurve3([\n      new THREE.Vector3(0, 0, 0),\n      new THREE.Vector3(-0.08, stemHeight * 0.4, 0.08),\n      new THREE.Vector3(0.05, stemHeight * 0.6, -0.03),\n      new THREE.Vector3(0, stemHeight, 0)\n    ])\n    const stemGeo = new THREE.TubeGeometry(stemCurve, 16, 0.035, 8, false)\n    const stemMat = new THREE.ShaderMaterial({\n      transparent: true,\n      side: THREE.DoubleSide,\n      uniforms: {\n        uTime: { value: 0 },\n        uAccent: { value: accent }\n      },\n      vertexShader: `\n        varying vec3 vNormal;\n        varying vec3 vViewDir;\n        void main() {\n          vNormal = normalize(normalMatrix * normal);\n          vec4 mvPos = modelViewMatrix * vec4(position, 1.0);\n          vViewDir = normalize(-mvPos.xyz);\n          gl_Position = projectionMatrix * mvPos;\n        }\n      `,\n      fragmentShader: `\n        uniform float uTime;\n        uniform vec3 uAccent;\n        varying vec3 vNormal;\n        varying vec3 vViewDir;\n\n        void main() {\n          float fresnel = pow(1.0 - abs(dot(vNormal, vViewDir)), 3.0);\n          vec3 col = mix(uAccent, vec3(1.0, 0.4, 1.0), fresnel);\n          col += vec3(0.2, 0.5, 1.0) * fresnel * 0.5;\n          gl_FragColor = vec4(col, 0.6 + fresnel * 0.4);\n        }\n      `\n    })\n    group.add(new THREE.Mesh(stemGeo, stemMat))\n\n    // Center - glowing orb\n    const centerGeo = new THREE.IcosahedronGeometry(0.18, 2)\n    const centerMat = new THREE.ShaderMaterial({\n      transparent: true,\n      uniforms: {\n        uTime: { value: 0 },\n        uAccent: { value: accent }\n      },\n      vertexShader: `\n        varying vec3 vNormal;\n        varying vec3 vViewDir;\n        void main() {\n          vNormal = normalize(normalMatrix * normal);\n          vec4 mvPos = modelViewMatrix * vec4(position, 1.0);\n          vViewDir = normalize(-mvPos.xyz);\n          gl_Position = projectionMatrix * mvPos;\n        }\n      `,\n      fragmentShader: `\n        uniform float uTime;\n        uniform vec3 uAccent;\n        varying vec3 vNormal;\n        varying vec3 vViewDir;\n        void main() {\n          float fresnel = pow(1.0 - abs(dot(vNormal, vViewDir)), 2.0);\n          vec3 rainbow = 0.5 + 0.5 * cos(6.28318 * (fresnel + uTime * 0.2 + vec3(0.0, 0.33, 0.67)));\n          vec3 col = mix(uAccent, rainbow, 0.7);\n          gl_FragColor = vec4(col, 0.7 + fresnel * 0.3);\n        }\n      `\n    })\n    const center = new THREE.Mesh(centerGeo, centerMat)\n    center.position.y = stemHeight\n    group.add(center)\n\n    // Petals - translucent iridescent\n    for (let i = 0; i < petalCount; i++) {\n      const angle = (i / petalCount) * Math.PI * 2\n      const petalGeo = new THREE.CircleGeometry(0.35, 16, 0, Math.PI)\n      const petalMat = new THREE.ShaderMaterial({\n        transparent: true,\n        side: THREE.DoubleSide,\n        uniforms: {\n          uTime: { value: 0 },\n          uAccent: { value: accent },\n          uIndex: { value: i / petalCount }\n        },\n        vertexShader: `\n          varying vec2 vUv;\n          varying vec3 vNormal;\n          varying vec3 vViewDir;\n          void main() {\n            vUv = uv;\n            vNormal = normalize(normalMatrix * normal);\n            vec4 mvPos = modelViewMatrix * vec4(position, 1.0);\n            vViewDir = normalize(-mvPos.xyz);\n            gl_Position = projectionMatrix * mvPos;\n          }\n        `,\n        fragmentShader: `\n          uniform float uTime;\n          uniform vec3 uAccent;\n          uniform float uIndex;\n          varying vec2 vUv;\n          varying vec3 vNormal;\n          varying vec3 vViewDir;\n          void main() {\n            float fresnel = pow(1.0 - abs(dot(vNormal, vViewDir)), 2.5);\n            vec3 rainbow = 0.5 + 0.5 * cos(6.28318 * (fresnel * 2.0 + uTime * 0.15 + uIndex + vec3(0.0, 0.33, 0.67)));\n            vec3 col = mix(uAccent * 0.5, rainbow, fresnel * 0.8 + 0.2);\n            float alpha = (0.3 + fresnel * 0.5) * smoothstep(0.0, 0.1, vUv.y);\n            gl_FragColor = vec4(col, alpha);\n          }\n        `\n      })\n      const petal = new THREE.Mesh(petalGeo, petalMat)\n      petal.position.y = stemHeight\n      petal.rotation.y = angle\n      petal.rotation.x = -0.5 - Math.random() * 0.2\n      group.add(petal)\n    }\n  }\n\n  private buildRetroFlower(group: THREE.Group, accent: THREE.Color) {\n    const stemHeight = 1.2 + Math.random() * 1.8\n    const petalCount = 4 + Math.floor(Math.random() * 4)\n\n    // Stem - chrome cylinder\n    const stemCurve = new THREE.CatmullRomCurve3([\n      new THREE.Vector3(0, 0, 0),\n      new THREE.Vector3(0.12, stemHeight * 0.5, 0.06),\n      new THREE.Vector3(-0.06, stemHeight * 0.8, -0.04),\n      new THREE.Vector3(0, stemHeight, 0)\n    ])\n    const stemGeo = new THREE.TubeGeometry(stemCurve, 12, 0.045, 6, false)\n    const stemMat = new THREE.MeshPhysicalMaterial({\n      color: 0xaaaaaa,\n      metalness: 0.9,\n      roughness: 0.1,\n      envMapIntensity: 1.5,\n      clearcoat: 1.0\n    })\n    group.add(new THREE.Mesh(stemGeo, stemMat))\n\n    // Center - geometric dodecahedron\n    const centerGeo = new THREE.DodecahedronGeometry(0.2, 0)\n    const centerMat = new THREE.MeshPhysicalMaterial({\n      color: accent,\n      metalness: 0.8,\n      roughness: 0.15,\n      emissive: accent,\n      emissiveIntensity: 0.6,\n      clearcoat: 1.0\n    })\n    const center = new THREE.Mesh(centerGeo, centerMat)\n    center.position.y = stemHeight\n    group.add(center)\n\n    // Petals - geometric triangles / diamonds\n    const retroPalette = [0xff6ec7, 0x7b68ee, 0x00ced1, 0xff1493]\n    for (let i = 0; i < petalCount; i++) {\n      const angle = (i / petalCount) * Math.PI * 2\n      // Diamond shape\n      const shape = new THREE.Shape()\n      shape.moveTo(0, 0)\n      shape.lineTo(0.15, 0.25)\n      shape.lineTo(0, 0.55)\n      shape.lineTo(-0.15, 0.25)\n      shape.closePath()\n\n      const petalGeo = new THREE.ShapeGeometry(shape)\n      const petalColor = new THREE.Color(retroPalette[i % retroPalette.length])\n      const petalMat = new THREE.MeshPhysicalMaterial({\n        color: petalColor,\n        metalness: 0.7,\n        roughness: 0.2,\n        emissive: petalColor,\n        emissiveIntensity: 0.4,\n        side: THREE.DoubleSide,\n        clearcoat: 0.8\n      })\n      const petal = new THREE.Mesh(petalGeo, petalMat)\n      petal.position.y = stemHeight\n      petal.rotation.y = angle\n      petal.rotation.x = -0.4 - Math.random() * 0.3\n\n      // Add wireframe overlay for retro feel\n      const wireGeo = new THREE.EdgesGeometry(petalGeo)\n      const wireMat = new THREE.LineBasicMaterial({ color: 0xffffff, transparent: true, opacity: 0.4 })\n      petal.add(new THREE.LineSegments(wireGeo, wireMat))\n\n      group.add(petal)\n    }\n  }\n\n  clearFlowers() {\n    for (const f of this.flowers) {\n      this.scene.remove(f.group)\n      f.group.traverse(child => {\n        if (child instanceof THREE.Mesh) {\n          child.geometry.dispose()\n          if (Array.isArray(child.material)) {\n            child.material.forEach(m => m.dispose())\n          } else {\n            child.material.dispose()\n          }\n        }\n      })\n    }\n    this.flowers = []\n    // Remove flower shader materials from cache (keep grid material at index 0)\n    this.timedShaderMaterials = this.timedShaderMaterials.slice(0, 1)\n  }\n\n  private handleContextLost = (e: Event) => {\n    e.preventDefault()\n    cancelAnimationFrame(this.animationId)\n    const overlay = document.createElement('div')\n    overlay.style.cssText = 'position:absolute;inset:0;display:flex;align-items:center;justify-content:center;background:rgba(0,0,0,0.8);color:#fff;font:14px/1.5 sans-serif;cursor:pointer;z-index:100'\n    overlay.textContent = 'WebGL context lost â€” click to reload'\n    overlay.addEventListener('click', () => location.reload())\n    this.container.style.position = 'relative'\n    this.container.appendChild(overlay)\n  }\n\n  private handleContextRestored = () => {\n    location.reload()\n  }\n\n  private animate = () => {\n    if (this.disposed) return\n    this.animationId = requestAnimationFrame(this.animate)\n\n    const elapsed = this.clock.getElapsedTime()\n\n    // Update controls\n    this.controls.update()\n\n    // Update all cached shader materials with uTime (H-2 fix: O(n) flat array instead of scene.traverse)\n    for (const mat of this.timedShaderMaterials) {\n      mat.uniforms.uTime.value = elapsed\n    }\n\n    // Update particle shader\n    if (this.particles) {\n      const mat = this.particles.material as THREE.ShaderMaterial\n      mat.uniforms.uTime.value = elapsed\n    }\n\n    // Animate flowers\n    for (const f of this.flowers) {\n      const age = elapsed - f.birthTime\n      // Grow animation\n      const growProgress = Math.min(age / 0.8, 1)\n      const eased = 1 - Math.pow(1 - growProgress, 3) // ease-out cubic\n      const scale = eased * f.targetScale\n      f.group.scale.set(scale, scale, scale)\n\n      // Gentle sway\n      const sway = Math.sin(elapsed * f.swaySpeed + f.swayOffset) * 0.03\n      f.group.rotation.x = sway\n      f.group.rotation.z = sway * 0.7\n    }\n\n    this.composer.render()\n  }\n\n  private onResize = () => {\n    if (this.disposed) return\n    const { clientWidth: w, clientHeight: h } = this.container\n    this.camera.aspect = w / h\n    this.camera.updateProjectionMatrix()\n    this.renderer.setSize(w, h)\n    this.composer.setSize(w, h)\n  }\n\n  dispose() {\n    this.disposed = true\n    cancelAnimationFrame(this.animationId)\n    window.removeEventListener('resize', this.onResize)\n    this.controls.dispose()\n    this.clearFlowers()\n    this.scene.traverse(child => {\n      if (child instanceof THREE.Mesh) {\n        child.geometry.dispose()\n        if (Array.isArray(child.material)) {\n          child.material.forEach(m => m.dispose())\n        } else {\n          child.material.dispose()\n        }\n      }\n    })\n    this.renderer.domElement.removeEventListener('webglcontextlost', this.handleContextLost)\n    this.renderer.domElement.removeEventListener('webglcontextrestored', this.handleContextRestored)\n    this.renderer.dispose()\n    this.composer.dispose()\n    if (this.renderer.domElement.parentElement) {\n      this.renderer.domElement.parentElement.removeChild(this.renderer.domElement)\n    }\n  }\n}\n"],"names":["CyberFlowerScene","container","raycaster","THREE","flowers","clock","animationId","disposed","timedShaderMaterials","flowerStyle","accentColor","handleContextLost","e","preventDefault","cancelAnimationFrame","this","overlay","document","createElement","style","cssText","textContent","addEventListener","location","reload","position","appendChild","handleContextRestored","animate","requestAnimationFrame","elapsed","getElapsedTime","controls","update","mat","uniforms","uTime","value","particles","material","f","age","birthTime","growProgress","Math","min","scale","pow","targetScale","group","set","sway","sin","swaySpeed","swayOffset","rotation","x","z","composer","render","onResize","clientWidth","w","clientHeight","h","camera","aspect","updateProjectionMatrix","renderer","setSize","init","createEnvironment","createParticles","_proto","prototype","resetCamera","target","antialias","alpha","setPixelRatio","window","devicePixelRatio","toneMapping","toneMappingExposure","domElement","scene","background","fog","OrbitControls","enableDamping","dampingFactor","autoRotate","autoRotateSpeed","maxPolarAngle","PI","minDistance","maxDistance","EffectComposer","addPass","RenderPass","bloomPass","UnrealBloomPass","ambient","add","pointLight1","pointLight2","pointLight3","gridGeo","gridMat","transparent","uColor1","uColor2","vertexShader","fragmentShader","grid","y","push","groundGeo","groundMat","visible","groundPlane","count","positions","Float32Array","colors","sizes","palette","i","random","c","floor","length","r","g","b","geo","setAttribute","depthWrite","vertexColors","uPixelRatio","plantFlower","ndcX","ndcY","mouse","setFromCamera","hits","intersectObject","point","abs","flower","createFlower","copy","traverse","child","accent","buildNeonFlower","buildHolographicFlower","buildRetroFlower","stemHeight","petalCount","stemCurve","stemGeo","stemMat","color","emissive","emissiveIntensity","roughness","wireGeo","wireMat","wireframe","opacity","centerGeo","centerMat","center","angle","petalShape","moveTo","bezierCurveTo","petalGeo","petalMat","side","petal","uAccent","uIndex","metalness","envMapIntensity","clearcoat","retroPalette","shape","lineTo","closePath","petalColor","clearFlowers","remove","geometry","dispose","Array","isArray","forEach","m","slice","removeEventListener","parentElement","removeChild","_createClass","key","get","_this$controls$autoRo","_this$controls","_this$controls$autoRo2","_this$controls2","_this$bloomPass$stren","_this$bloomPass","strength","_this$particles$visib","_this$particles"],"sourceRoot":""}