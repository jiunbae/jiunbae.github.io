{"componentChunkName":"component---src-templates-post-tsx","path":"/posts/claude-code-cloud/","result":{"data":{"markdownRemark":{"html":"<h1 id=\"claude-code-cloud-ai-코딩-세션을-브라우저에서\">Claude Code Cloud: AI 코딩 세션을 브라우저에서</h1>\n<blockquote>\n<p>목표: **\"아무 환경에서나 Claude Code에 접속해서 작업하기\"**를 현실로 만들기.\n결과: 터미널 미러링, 세션 관리, 파일 탐색기, 실시간 협업까지 갖춘 웹 서비스 완성.</p>\n</blockquote>\n<hr>\n<h2 id=\"배경-왜-이걸-만들었나\">배경: 왜 이걸 만들었나</h2>\n<p>Claude Code CLI가 공개되고 나서부터 거의 모든 개발 작업에 Claude를 활용하게 되었다. 문제는 환경이 달라질 때였다. 데스크톱에서 시작한 작업을 랩톱에서 이어가려면 상태가 공유되지 않고, iPad에서는 아예 CLI를 실행할 수 없었다.</p>\n<p>\"Claude Code가 웹에서 돌아가면 어떨까?\"라는 생각이 들었다. 브라우저만 있으면 어디서든 접속해서 AI와 코딩할 수 있으면 좋겠다고 생각했다. 마침 <a href=\"/posts/home-lab-iac\">Home Lab</a>에 Kubernetes 환경도 갖춰져 있으니, 직접 만들어보기로 했다.</p>\n<p>LLM의 도움 없이는 이 프로젝트를 일주일 만에 완성하지 못했을 것이다. 특히 node-pty와 WebSocket 연동, Docker 멀티스테이지 빌드 같은 부분은 Claude와 대화하면서 빠르게 해결할 수 있었다.</p>\n<hr>\n<h2 id=\"핵심-기능\">핵심 기능</h2>\n<table>\n<thead>\n<tr>\n<th>기능</th>\n<th>설명</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td><strong>Terminal Mirroring</strong></td>\n<td>Claude Code CLI 출력을 WebSocket으로 실시간 전송</td>\n</tr>\n<tr>\n<td><strong>Session Management</strong></td>\n<td>세션 생성, 시작, 중지, 삭제를 SQLite로 영구 저장</td>\n</tr>\n<tr>\n<td><strong>File Explorer</strong></td>\n<td>프로젝트 파일을 트리 형태로 탐색하고 구문 강조로 미리보기</td>\n</tr>\n<tr>\n<td><strong>Real-time Collaboration</strong></td>\n<td>토큰 기반 링크로 세션 공유, 참여자 실시간 확인</td>\n</tr>\n<tr>\n<td><strong>Multi-Terminal</strong></td>\n<td>Claude, Codex, Shell 탭을 동시에 사용</td>\n</tr>\n</tbody>\n</table>\n<hr>\n<h2 id=\"스크린샷\">스크린샷</h2>\n<h3 id=\"대시보드\">대시보드</h3>\n<p>로그인 후 보이는 메인 화면. 세션 목록과 워크스페이스를 관리할 수 있다.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 780px; border-radius: 5px; overflow: hidden;\"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 56.41025641025641%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAIAAADwazoUAAAACXBIWXMAAAsTAAALEwEAmpwYAAABJElEQVR42pWRy06EMBSGu3YhZaAXKC2FuVCgFIaZiWOMRuPKaKLxPXwAdz66nSFcRk3U5Nuc9vz9/3MKRH7L1J3HW0gySJUlTDc4rmdh2ZU9mRNod/XgyQtIlpDm9hDg9o1dfXjqFeK0O0qKy2De+pGehcWAGyg/avX1O9UvDkpgcBQjYezd1ISpHc13OGnIBJQ0QppHIlGonL4T0LTBohoyw0CxxZauNrYbyxEkmyiu74VBvHL6ZoCFsQmnzjYzW27xfI3jUezLhsf1c1TiSI9iB2e2cI8zdMT5nuu9FZNkBCVrIZsnofHU+XSlB+yqUWx8Xk3xeEW4NmHuhcU483exffhHzkl2RsdtHcTTwL/inpbA5+WXr/o7QCxuPFb8y38QfwK6nE5m/LrEBwAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"Dashboard\"\n        title=\"\"\n        src=\"/static/cc2eb4b02821b6ea882e7b4152374ffc/a1792/dashboard.png\"\n        srcset=\"/static/cc2eb4b02821b6ea882e7b4152374ffc/cb9a0/dashboard.png 195w,\n/static/cc2eb4b02821b6ea882e7b4152374ffc/727ba/dashboard.png 390w,\n/static/cc2eb4b02821b6ea882e7b4152374ffc/a1792/dashboard.png 780w,\n/static/cc2eb4b02821b6ea882e7b4152374ffc/105d8/dashboard.png 1170w,\n/static/cc2eb4b02821b6ea882e7b4152374ffc/9f9a4/dashboard.png 1560w,\n/static/cc2eb4b02821b6ea882e7b4152374ffc/9b29b/dashboard.png 3840w\"\n        sizes=\"(max-width: 780px) 100vw, 780px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<h3 id=\"터미널\">터미널</h3>\n<p>세션을 시작하면 Claude Code CLI가 브라우저에서 실행된다. 로컬 터미널과 동일한 경험을 제공한다.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 780px; border-radius: 5px; overflow: hidden;\"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 56.41025641025641%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAIAAADwazoUAAAACXBIWXMAAAsTAAALEwEAmpwYAAAA+UlEQVR42q3Ny06DQBiGYe6gxeIU5p+zZU44FCkZrEZk05h4CW5dew3euiQeUiMLbUyefLs3X8L8iM24Lve+O6j2HmxPzDWY/gv5zm93LOwfw91zuE3Q7gVuXvPmSbUD1T3VkZlIyu4YHGG6IzpuTDQmJue8TnGFwDFmQzsIVUvuatvYcqtkkPJSqSBEBcS+w5+bE5sU7oD0A+JRCncVR2NbwawSjjNLiaH0Awb9U4J4syI1gkpfBMmckBUXnkzBFB8BMhcv1nqSYQOgAQwm8yfzz8vcLnKbYfv75p/itHDL3GXFSXFGqxT7VWFOidlmOAOfYffXknD/BsbcVyRY8QcrAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"Terminal\"\n        title=\"\"\n        src=\"/static/51888e9f553882001405c2bd71f9d84c/a1792/terminal.png\"\n        srcset=\"/static/51888e9f553882001405c2bd71f9d84c/cb9a0/terminal.png 195w,\n/static/51888e9f553882001405c2bd71f9d84c/727ba/terminal.png 390w,\n/static/51888e9f553882001405c2bd71f9d84c/a1792/terminal.png 780w,\n/static/51888e9f553882001405c2bd71f9d84c/105d8/terminal.png 1170w,\n/static/51888e9f553882001405c2bd71f9d84c/9f9a4/terminal.png 1560w,\n/static/51888e9f553882001405c2bd71f9d84c/9b29b/terminal.png 3840w\"\n        sizes=\"(max-width: 780px) 100vw, 780px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<h3 id=\"파일-탐색기\">파일 탐색기</h3>\n<p>워크스페이스 파일을 트리 형태로 탐색하고, 코드를 미리볼 수 있다.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 780px; border-radius: 5px; overflow: hidden;\"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 56.41025641025641%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAIAAADwazoUAAAACXBIWXMAAAsTAAALEwEAmpwYAAABAklEQVR42pWQ3W6DIBiGvYG1tRVQqxBnrICArtDEtSur3U92CzvZHewaduvDZWfDZCYPJ7w84f2+APNLWl9Q1TNzLe7OGesxP+W0n6LpDGlPb9Xho1AB3H+mx69EvZPaYHaflAaVfYRVlEsvEEuXbnNJMhEAosKEI9LSvS2kBVgt4G6F6imWPyxiehPTIGEvcPcKy6MwtuoGJ7tsFdP/EEDSbTIFSMv0YyHP8+SxBqwAlsw8M/0U5R55nfLQK7vjXrsdUD3K3p8hVptt8/f+V4ZEcVdb+GuHCfPXHgNEnVProRAP82YGeeP8CMtaX0tlvTNPyqSy65S52kwPt3O2HWXiG9uzUqc/9FRDAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"Files\"\n        title=\"\"\n        src=\"/static/dae6879b0d54992cf2d4da7480265488/a1792/files.png\"\n        srcset=\"/static/dae6879b0d54992cf2d4da7480265488/cb9a0/files.png 195w,\n/static/dae6879b0d54992cf2d4da7480265488/727ba/files.png 390w,\n/static/dae6879b0d54992cf2d4da7480265488/a1792/files.png 780w,\n/static/dae6879b0d54992cf2d4da7480265488/105d8/files.png 1170w,\n/static/dae6879b0d54992cf2d4da7480265488/9f9a4/files.png 1560w,\n/static/dae6879b0d54992cf2d4da7480265488/9b29b/files.png 3840w\"\n        sizes=\"(max-width: 780px) 100vw, 780px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<hr>\n<h2 id=\"아키텍처-설계\">아키텍처 설계</h2>\n<p><svg id=\"mermaid-0\" width=\"100%\" xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\" class=\"flowchart\" style=\"max-width: 635.21875px;\" viewBox=\"0 0 635.21875 676\" role=\"graphics-document document\" aria-roledescription=\"flowchart-v2\"><style>#mermaid-0{font-family:inherit;font-size:16px;fill:#333;}@keyframes edge-animation-frame{from{stroke-dashoffset:0;}}@keyframes dash{to{stroke-dashoffset:0;}}#mermaid-0 .edge-animation-slow{stroke-dasharray:9,5!important;stroke-dashoffset:900;animation:dash 50s linear infinite;stroke-linecap:round;}#mermaid-0 .edge-animation-fast{stroke-dasharray:9,5!important;stroke-dashoffset:900;animation:dash 20s linear infinite;stroke-linecap:round;}#mermaid-0 .error-icon{fill:#552222;}#mermaid-0 .error-text{fill:#552222;stroke:#552222;}#mermaid-0 .edge-thickness-normal{stroke-width:1px;}#mermaid-0 .edge-thickness-thick{stroke-width:3.5px;}#mermaid-0 .edge-pattern-solid{stroke-dasharray:0;}#mermaid-0 .edge-thickness-invisible{stroke-width:0;fill:none;}#mermaid-0 .edge-pattern-dashed{stroke-dasharray:3;}#mermaid-0 .edge-pattern-dotted{stroke-dasharray:2;}#mermaid-0 .marker{fill:#333333;stroke:#333333;}#mermaid-0 .marker.cross{stroke:#333333;}#mermaid-0 svg{font-family:inherit;font-size:16px;}#mermaid-0 p{margin:0;}#mermaid-0 .label{font-family:inherit;color:#333;}#mermaid-0 .cluster-label text{fill:#333;}#mermaid-0 .cluster-label span{color:#333;}#mermaid-0 .cluster-label span p{background-color:transparent;}#mermaid-0 .label text,#mermaid-0 span{fill:#333;color:#333;}#mermaid-0 .node rect,#mermaid-0 .node circle,#mermaid-0 .node ellipse,#mermaid-0 .node polygon,#mermaid-0 .node path{fill:#ECECFF;stroke:#9370DB;stroke-width:1px;}#mermaid-0 .rough-node .label text,#mermaid-0 .node .label text,#mermaid-0 .image-shape .label,#mermaid-0 .icon-shape .label{text-anchor:middle;}#mermaid-0 .node .katex path{fill:#000;stroke:#000;stroke-width:1px;}#mermaid-0 .rough-node .label,#mermaid-0 .node .label,#mermaid-0 .image-shape .label,#mermaid-0 .icon-shape .label{text-align:center;}#mermaid-0 .node.clickable{cursor:pointer;}#mermaid-0 .root .anchor path{fill:#333333!important;stroke-width:0;stroke:#333333;}#mermaid-0 .arrowheadPath{fill:#333333;}#mermaid-0 .edgePath .path{stroke:#333333;stroke-width:2.0px;}#mermaid-0 .flowchart-link{stroke:#333333;fill:none;}#mermaid-0 .edgeLabel{background-color:rgba(232,232,232, 0.8);text-align:center;}#mermaid-0 .edgeLabel p{background-color:rgba(232,232,232, 0.8);}#mermaid-0 .edgeLabel rect{opacity:0.5;background-color:rgba(232,232,232, 0.8);fill:rgba(232,232,232, 0.8);}#mermaid-0 .labelBkg{background-color:rgba(232, 232, 232, 0.5);}#mermaid-0 .cluster rect{fill:#ffffde;stroke:#aaaa33;stroke-width:1px;}#mermaid-0 .cluster text{fill:#333;}#mermaid-0 .cluster span{color:#333;}#mermaid-0 div.mermaidTooltip{position:absolute;text-align:center;max-width:200px;padding:2px;font-family:inherit;font-size:12px;background:hsl(80, 100%, 96.2745098039%);border:1px solid #aaaa33;border-radius:2px;pointer-events:none;z-index:100;}#mermaid-0 .flowchartTitleText{text-anchor:middle;font-size:18px;fill:#333;}#mermaid-0 rect.text{fill:none;stroke-width:0;}#mermaid-0 .icon-shape,#mermaid-0 .image-shape{background-color:rgba(232,232,232, 0.8);text-align:center;}#mermaid-0 .icon-shape p,#mermaid-0 .image-shape p{background-color:rgba(232,232,232, 0.8);padding:2px;}#mermaid-0 .icon-shape rect,#mermaid-0 .image-shape rect{opacity:0.5;background-color:rgba(232,232,232, 0.8);fill:rgba(232,232,232, 0.8);}#mermaid-0 .label-icon{display:inline-block;height:1em;overflow:visible;vertical-align:-0.125em;}#mermaid-0 .node .label-icon path{fill:currentColor;stroke:revert;stroke-width:revert;}#mermaid-0 :root{--mermaid-font-family:arial,sans-serif;}</style><g><marker id=\"mermaid-0_flowchart-v2-pointEnd\" class=\"marker flowchart-v2\" viewBox=\"0 0 10 10\" refX=\"5\" refY=\"5\" markerUnits=\"userSpaceOnUse\" markerWidth=\"8\" markerHeight=\"8\" orient=\"auto\"><path d=\"M 0 0 L 10 5 L 0 10 z\" class=\"arrowMarkerPath\" style=\"stroke-width: 1; stroke-dasharray: 1, 0;\"></path></marker><marker id=\"mermaid-0_flowchart-v2-pointStart\" class=\"marker flowchart-v2\" viewBox=\"0 0 10 10\" refX=\"4.5\" refY=\"5\" markerUnits=\"userSpaceOnUse\" markerWidth=\"8\" markerHeight=\"8\" orient=\"auto\"><path d=\"M 0 5 L 10 10 L 10 0 z\" class=\"arrowMarkerPath\" style=\"stroke-width: 1; stroke-dasharray: 1, 0;\"></path></marker><marker id=\"mermaid-0_flowchart-v2-circleEnd\" class=\"marker flowchart-v2\" viewBox=\"0 0 10 10\" refX=\"11\" refY=\"5\" markerUnits=\"userSpaceOnUse\" markerWidth=\"11\" markerHeight=\"11\" orient=\"auto\"><circle cx=\"5\" cy=\"5\" r=\"5\" class=\"arrowMarkerPath\" style=\"stroke-width: 1; stroke-dasharray: 1, 0;\"></circle></marker><marker id=\"mermaid-0_flowchart-v2-circleStart\" class=\"marker flowchart-v2\" viewBox=\"0 0 10 10\" refX=\"-1\" refY=\"5\" markerUnits=\"userSpaceOnUse\" markerWidth=\"11\" markerHeight=\"11\" orient=\"auto\"><circle cx=\"5\" cy=\"5\" r=\"5\" class=\"arrowMarkerPath\" style=\"stroke-width: 1; stroke-dasharray: 1, 0;\"></circle></marker><marker id=\"mermaid-0_flowchart-v2-crossEnd\" class=\"marker cross flowchart-v2\" viewBox=\"0 0 11 11\" refX=\"12\" refY=\"5.2\" markerUnits=\"userSpaceOnUse\" markerWidth=\"11\" markerHeight=\"11\" orient=\"auto\"><path d=\"M 1,1 l 9,9 M 10,1 l -9,9\" class=\"arrowMarkerPath\" style=\"stroke-width: 2; stroke-dasharray: 1, 0;\"></path></marker><marker id=\"mermaid-0_flowchart-v2-crossStart\" class=\"marker cross flowchart-v2\" viewBox=\"0 0 11 11\" refX=\"-1\" refY=\"5.2\" markerUnits=\"userSpaceOnUse\" markerWidth=\"11\" markerHeight=\"11\" orient=\"auto\"><path d=\"M 1,1 l 9,9 M 10,1 l -9,9\" class=\"arrowMarkerPath\" style=\"stroke-width: 2; stroke-dasharray: 1, 0;\"></path></marker><g class=\"root\"><g class=\"clusters\"><g class=\"cluster\" id=\"Container\" data-look=\"classic\"><rect style=\"\" x=\"8\" y=\"564\" width=\"582.140625\" height=\"104\"></rect><g class=\"cluster-label\" transform=\"translate(236.8203125, 564)\"><foreignObject width=\"124.5\" height=\"24\"><div xmlns=\"http://www.w3.org/1999/xhtml\" style=\"display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;\"><span class=\"nodeLabel\"><p>Docker Container</p></span></div></foreignObject></g></g><g class=\"cluster\" id=\"Server\" data-look=\"classic\"><rect style=\"\" x=\"40.51171875\" y=\"210\" width=\"487.78515625\" height=\"280\"></rect><g class=\"cluster-label\" transform=\"translate(231.490234375, 210)\"><foreignObject width=\"105.828125\" height=\"24\"><div xmlns=\"http://www.w3.org/1999/xhtml\" style=\"display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;\"><span class=\"nodeLabel\"><p>Node.js Server</p></span></div></foreignObject></g></g><g class=\"cluster\" id=\"Browser\" data-look=\"classic\"><rect style=\"\" x=\"176.6953125\" y=\"8\" width=\"356.3125\" height=\"128\"></rect><g class=\"cluster-label\" transform=\"translate(325.5078125, 8)\"><foreignObject width=\"58.6875\" height=\"24\"><div xmlns=\"http://www.w3.org/1999/xhtml\" style=\"display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;\"><span class=\"nodeLabel\"><p>Browser</p></span></div></foreignObject></g></g></g><g class=\"edgePaths\"><path d=\"M403.22,113.775L407.066,117.479C410.911,121.183,418.602,128.592,422.447,138.463C426.293,148.333,426.293,160.667,426.293,173C426.293,185.333,426.293,197.667,426.293,207.333C426.293,217,426.293,224,426.293,227.5L426.293,231\" id=\"L_UI_NEXT_0\" class=\"edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link\" style=\";\" data-edge=\"true\" data-et=\"edge\" data-id=\"L_UI_NEXT_0\" data-points=\"W3sieCI6NDAwLjMzOTI5NDQzMzU5Mzc1LCJ5IjoxMTF9LHsieCI6NDI2LjI5Mjk2ODc1LCJ5IjoxMzZ9LHsieCI6NDI2LjI5Mjk2ODc1LCJ5IjoxNzN9LHsieCI6NDI2LjI5Mjk2ODc1LCJ5IjoyMTB9LHsieCI6NDI2LjI5Mjk2ODc1LCJ5IjoyMzV9XQ==\" marker-start=\"url(#mermaid-0_flowchart-v2-pointStart)\" marker-end=\"url(#mermaid-0_flowchart-v2-pointEnd)\"></path><path d=\"M274.243,112.718L266.084,116.598C257.926,120.479,241.61,128.239,233.451,138.286C225.293,148.333,225.293,160.667,225.293,173C225.293,185.333,225.293,197.667,225.293,207.333C225.293,217,225.293,224,225.293,227.5L225.293,231\" id=\"L_UI_WS_0\" class=\"edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link\" style=\";\" data-edge=\"true\" data-et=\"edge\" data-id=\"L_UI_WS_0\" data-points=\"W3sieCI6Mjc3Ljg1NDkxOTQzMzU5Mzc1LCJ5IjoxMTF9LHsieCI6MjI1LjI5Mjk2ODc1LCJ5IjoxMzZ9LHsieCI6MjI1LjI5Mjk2ODc1LCJ5IjoxNzN9LHsieCI6MjI1LjI5Mjk2ODc1LCJ5IjoyMTB9LHsieCI6MjI1LjI5Mjk2ODc1LCJ5IjoyMzV9XQ==\" marker-start=\"url(#mermaid-0_flowchart-v2-pointStart)\" marker-end=\"url(#mermaid-0_flowchart-v2-pointEnd)\"></path><path d=\"M395.708,313L390.872,319.167C386.036,325.333,376.364,337.667,366.621,349.496C356.879,361.326,347.066,372.651,342.16,378.314L337.253,383.977\" id=\"L_NEXT_PTY_0\" class=\"edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link\" style=\";\" data-edge=\"true\" data-et=\"edge\" data-id=\"L_NEXT_PTY_0\" data-points=\"W3sieCI6Mzk1LjcwNzk1NjQxNDQ3MzcsInkiOjMxM30seyJ4IjozNjYuNjkxNDA2MjUsInkiOjM1MH0seyJ4IjozMzQuNjMzOTk0NjU0NjA1MjYsInkiOjM4N31d\" marker-end=\"url(#mermaid-0_flowchart-v2-pointEnd)\"></path><path d=\"M214.969,455.262L197.978,461.052C180.987,466.841,147.005,478.421,130.014,490.377C113.023,502.333,113.023,514.667,113.023,527C113.023,539.333,113.023,551.667,113.023,561.333C113.023,571,113.023,578,113.023,581.5L113.023,585\" id=\"L_PTY_CLAUDE_0\" class=\"edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link\" style=\";\" data-edge=\"true\" data-et=\"edge\" data-id=\"L_PTY_CLAUDE_0\" data-points=\"W3sieCI6MjE0Ljk2ODc1LCJ5Ijo0NTUuMjYyMDEwNzMxNjY2NzV9LHsieCI6MTEzLjAyMzQzNzUsInkiOjQ5MH0seyJ4IjoxMTMuMDIzNDM3NSwieSI6NTI3fSx7IngiOjExMy4wMjM0Mzc1LCJ5Ijo1NjR9LHsieCI6MTEzLjAyMzQzNzUsInkiOjU4OX1d\" marker-end=\"url(#mermaid-0_flowchart-v2-pointEnd)\"></path><path d=\"M300.844,465L300.844,469.167C300.844,473.333,300.844,481.667,300.844,492C300.844,502.333,300.844,514.667,300.844,527C300.844,539.333,300.844,551.667,300.844,561.333C300.844,571,300.844,578,300.844,581.5L300.844,585\" id=\"L_PTY_CODEX_0\" class=\"edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link\" style=\";\" data-edge=\"true\" data-et=\"edge\" data-id=\"L_PTY_CODEX_0\" data-points=\"W3sieCI6MzAwLjg0Mzc1LCJ5Ijo0NjV9LHsieCI6MzAwLjg0Mzc1LCJ5Ijo0OTB9LHsieCI6MzAwLjg0Mzc1LCJ5Ijo1Mjd9LHsieCI6MzAwLjg0Mzc1LCJ5Ijo1NjR9LHsieCI6MzAwLjg0Mzc1LCJ5Ijo1ODl9XQ==\" marker-end=\"url(#mermaid-0_flowchart-v2-pointEnd)\"></path><path d=\"M386.719,455.541L403.414,461.284C420.109,467.027,453.5,478.514,470.195,490.423C486.891,502.333,486.891,514.667,486.891,527C486.891,539.333,486.891,551.667,486.891,561.333C486.891,571,486.891,578,486.891,581.5L486.891,585\" id=\"L_PTY_SHELL_0\" class=\"edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link\" style=\";\" data-edge=\"true\" data-et=\"edge\" data-id=\"L_PTY_SHELL_0\" data-points=\"W3sieCI6Mzg2LjcxODc1LCJ5Ijo0NTUuNTQwOTQyMzAyODQ3MDR9LHsieCI6NDg2Ljg5MDYyNSwieSI6NDkwfSx7IngiOjQ4Ni44OTA2MjUsInkiOjUyN30seyJ4Ijo0ODYuODkwNjI1LCJ5Ijo1NjR9LHsieCI6NDg2Ljg5MDYyNSwieSI6NTg5fV0=\" marker-end=\"url(#mermaid-0_flowchart-v2-pointEnd)\"></path><path d=\"M225.293,317L225.293,322.5C225.293,328,225.293,339,230.953,350.194C236.613,361.388,247.934,372.775,253.594,378.469L259.254,384.163\" id=\"L_WS_PTY_0\" class=\"edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link\" style=\";\" data-edge=\"true\" data-et=\"edge\" data-id=\"L_WS_PTY_0\" data-points=\"W3sieCI6MjI1LjI5Mjk2ODc1LCJ5IjozMTN9LHsieCI6MjI1LjI5Mjk2ODc1LCJ5IjozNTB9LHsieCI6MjYyLjA3NDI3MDE0ODAyNjMsInkiOjM4N31d\" marker-start=\"url(#mermaid-0_flowchart-v2-pointStart)\" marker-end=\"url(#mermaid-0_flowchart-v2-pointEnd)\"></path><path d=\"M450.554,313L454.39,319.167C458.226,325.333,465.898,337.667,484.123,352.82C502.348,367.973,531.126,385.947,545.515,394.933L559.904,403.92\" id=\"L_NEXT_DB_0\" class=\"edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link\" style=\";\" data-edge=\"true\" data-et=\"edge\" data-id=\"L_NEXT_DB_0\" data-points=\"W3sieCI6NDUwLjU1MzcxMDkzNzUsInkiOjMxM30seyJ4Ijo0NzMuNTcwMzEyNSwieSI6MzUwfSx7IngiOjU2My4yOTY4NzUsInkiOjQwNi4wMzg3Nzc2MDY1NzQyM31d\" marker-end=\"url(#mermaid-0_flowchart-v2-pointEnd)\"></path></g><g class=\"edgeLabels\"><g class=\"edgeLabel\" transform=\"translate(426.29296875, 173)\"><g class=\"label\" data-id=\"L_UI_NEXT_0\" transform=\"translate(-44.4453125, -12)\"><foreignObject width=\"88.890625\" height=\"24\"><div xmlns=\"http://www.w3.org/1999/xhtml\" class=\"labelBkg\" style=\"display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;\"><span class=\"edgeLabel\"><p>HTTP/REST</p></span></div></foreignObject></g></g><g class=\"edgeLabel\" transform=\"translate(225.29296875, 173)\"><g class=\"label\" data-id=\"L_UI_WS_0\" transform=\"translate(-40.765625, -12)\"><foreignObject width=\"81.53125\" height=\"24\"><div xmlns=\"http://www.w3.org/1999/xhtml\" class=\"labelBkg\" style=\"display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;\"><span class=\"edgeLabel\"><p>WebSocket</p></span></div></foreignObject></g></g><g class=\"edgeLabel\" transform=\"translate(366.69140625, 350)\"><g class=\"label\" data-id=\"L_NEXT_PTY_0\" transform=\"translate(-20.890625, -12)\"><foreignObject width=\"41.78125\" height=\"24\"><div xmlns=\"http://www.w3.org/1999/xhtml\" class=\"labelBkg\" style=\"display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;\"><span class=\"edgeLabel\"><p>HTTP</p></span></div></foreignObject></g></g><g class=\"edgeLabel\" transform=\"translate(113.0234375, 527)\"><g class=\"label\" data-id=\"L_PTY_CLAUDE_0\" transform=\"translate(-31.1328125, -12)\"><foreignObject width=\"62.265625\" height=\"24\"><div xmlns=\"http://www.w3.org/1999/xhtml\" class=\"labelBkg\" style=\"display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;\"><span class=\"edgeLabel\"><p>node-pty</p></span></div></foreignObject></g></g><g class=\"edgeLabel\" transform=\"translate(300.84375, 527)\"><g class=\"label\" data-id=\"L_PTY_CODEX_0\" transform=\"translate(-31.1328125, -12)\"><foreignObject width=\"62.265625\" height=\"24\"><div xmlns=\"http://www.w3.org/1999/xhtml\" class=\"labelBkg\" style=\"display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;\"><span class=\"edgeLabel\"><p>node-pty</p></span></div></foreignObject></g></g><g class=\"edgeLabel\" transform=\"translate(486.890625, 527)\"><g class=\"label\" data-id=\"L_PTY_SHELL_0\" transform=\"translate(-31.1328125, -12)\"><foreignObject width=\"62.265625\" height=\"24\"><div xmlns=\"http://www.w3.org/1999/xhtml\" class=\"labelBkg\" style=\"display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;\"><span class=\"edgeLabel\"><p>node-pty</p></span></div></foreignObject></g></g><g class=\"edgeLabel\" transform=\"translate(225.29296875, 350)\"><g class=\"label\" data-id=\"L_WS_PTY_0\" transform=\"translate(-42.09375, -12)\"><foreignObject width=\"84.1875\" height=\"24\"><div xmlns=\"http://www.w3.org/1999/xhtml\" class=\"labelBkg\" style=\"display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;\"><span class=\"edgeLabel\"><p>PTY Events</p></span></div></foreignObject></g></g><g class=\"edgeLabel\"><g class=\"label\" data-id=\"L_NEXT_DB_0\" transform=\"translate(0, 0)\"><foreignObject width=\"0\" height=\"0\"><div xmlns=\"http://www.w3.org/1999/xhtml\" class=\"labelBkg\" style=\"display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;\"><span class=\"edgeLabel\"></span></div></foreignObject></g></g></g><g class=\"nodes\"><g class=\"node default\" id=\"flowchart-UI-0\" transform=\"translate(359.8515625, 72)\"><rect class=\"basic label-container\" style=\"\" x=\"-90.3125\" y=\"-39\" width=\"180.625\" height=\"78\"></rect><g class=\"label\" style=\"\" transform=\"translate(-60.3125, -24)\"><rect></rect><foreignObject width=\"120.625\" height=\"48\"><div xmlns=\"http://www.w3.org/1999/xhtml\" style=\"display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;\"><span class=\"nodeLabel\"><p>React UI<br></br>xterm.js Terminal</p></span></div></foreignObject></g></g><g class=\"node default\" id=\"flowchart-NEXT-1\" transform=\"translate(426.29296875, 274)\"><rect class=\"basic label-container\" style=\"\" x=\"-54.453125\" y=\"-39\" width=\"108.90625\" height=\"78\"></rect><g class=\"label\" style=\"\" transform=\"translate(-24.453125, -24)\"><rect></rect><foreignObject width=\"48.90625\" height=\"48\"><div xmlns=\"http://www.w3.org/1999/xhtml\" style=\"display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;\"><span class=\"nodeLabel\"><p>Next.js<br></br>:3000</p></span></div></foreignObject></g></g><g class=\"node default\" id=\"flowchart-WS-2\" transform=\"translate(225.29296875, 274)\"><rect class=\"basic label-container\" style=\"\" x=\"-96.546875\" y=\"-39\" width=\"193.09375\" height=\"78\"></rect><g class=\"label\" style=\"\" transform=\"translate(-66.546875, -24)\"><rect></rect><foreignObject width=\"133.09375\" height=\"48\"><div xmlns=\"http://www.w3.org/1999/xhtml\" style=\"display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;\"><span class=\"nodeLabel\"><p>WebSocket Server<br></br>:3001</p></span></div></foreignObject></g></g><g class=\"node default\" id=\"flowchart-PTY-3\" transform=\"translate(300.84375, 426)\"><rect class=\"basic label-container\" style=\"\" x=\"-85.875\" y=\"-39\" width=\"171.75\" height=\"78\"></rect><g class=\"label\" style=\"\" transform=\"translate(-55.875, -24)\"><rect></rect><foreignObject width=\"111.75\" height=\"48\"><div xmlns=\"http://www.w3.org/1999/xhtml\" style=\"display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;\"><span class=\"nodeLabel\"><p>PTY API Server<br></br>:3003</p></span></div></foreignObject></g></g><g class=\"node default\" id=\"flowchart-CLAUDE-4\" transform=\"translate(113.0234375, 616)\"><rect class=\"basic label-container\" style=\"\" x=\"-70.0234375\" y=\"-27\" width=\"140.046875\" height=\"54\"></rect><g class=\"label\" style=\"\" transform=\"translate(-40.0234375, -12)\"><rect></rect><foreignObject width=\"80.046875\" height=\"24\"><div xmlns=\"http://www.w3.org/1999/xhtml\" style=\"display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;\"><span class=\"nodeLabel\"><p>Claude CLI</p></span></div></foreignObject></g></g><g class=\"node default\" id=\"flowchart-CODEX-5\" transform=\"translate(300.84375, 616)\"><rect class=\"basic label-container\" style=\"\" x=\"-67.796875\" y=\"-27\" width=\"135.59375\" height=\"54\"></rect><g class=\"label\" style=\"\" transform=\"translate(-37.796875, -12)\"><rect></rect><foreignObject width=\"75.59375\" height=\"24\"><div xmlns=\"http://www.w3.org/1999/xhtml\" style=\"display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;\"><span class=\"nodeLabel\"><p>Codex CLI</p></span></div></foreignObject></g></g><g class=\"node default\" id=\"flowchart-SHELL-6\" transform=\"translate(486.890625, 616)\"><rect class=\"basic label-container\" style=\"\" x=\"-68.25\" y=\"-27\" width=\"136.5\" height=\"54\"></rect><g class=\"label\" style=\"\" transform=\"translate(-38.25, -12)\"><rect></rect><foreignObject width=\"76.5\" height=\"24\"><div xmlns=\"http://www.w3.org/1999/xhtml\" style=\"display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;\"><span class=\"nodeLabel\"><p>Bash Shell</p></span></div></foreignObject></g></g><g class=\"node default\" id=\"flowchart-DB-7\" transform=\"translate(595.2578125, 426)\"><path d=\"M0,8.45877098668431 a31.9609375,8.45877098668431 0,0,0 63.921875,0 a31.9609375,8.45877098668431 0,0,0 -63.921875,0 l0,47.458770986684314 a31.9609375,8.45877098668431 0,0,0 63.921875,0 l0,-47.458770986684314\" class=\"basic label-container\" style=\"\" transform=\"translate(-31.9609375, -32.188156480026464)\"></path><g class=\"label\" style=\"\" transform=\"translate(-24.4609375, -2)\"><rect></rect><foreignObject width=\"48.921875\" height=\"24\"><div xmlns=\"http://www.w3.org/1999/xhtml\" style=\"display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;\"><span class=\"nodeLabel\"><p>SQLite</p></span></div></foreignObject></g></g></g></g></g></svg></p>\n<h3 id=\"왜-이런-구조인가\">왜 이런 구조인가</h3>\n<p>처음에는 Next.js 하나로 모든 것을 처리하려 했다. 그런데 node-pty는 서버 사이드에서만 동작하고, WebSocket 연결도 별도로 관리해야 해서 자연스럽게 분리되었다.</p>\n<ul>\n<li><strong>Next.js (3000)</strong>: REST API와 프론트엔드 서빙</li>\n<li><strong>WebSocket Server (3001)</strong>: 터미널 실시간 통신. xterm.js와 연결</li>\n<li><strong>PTY API Server (3003)</strong>: node-pty로 CLI 프로세스 관리</li>\n</ul>\n<p>세 서버가 분리되어 있지만, Docker 컨테이너 안에서 <code class=\"language-text\">concurrently</code>로 함께 실행된다. 개발할 때는 각각 독립적으로 재시작할 수 있어서 편리했다.</p>\n<hr>\n<h2 id=\"핵심-구현\">핵심 구현</h2>\n<h3 id=\"terminal-mirroring\">Terminal Mirroring</h3>\n<p>가장 중요한 기능은 CLI 출력을 브라우저에 실시간으로 보여주는 것이었다. node-pty로 pseudo-terminal을 생성하고, 출력을 WebSocket으로 클라이언트에 전송한다.</p>\n<div class=\"gatsby-highlight\" data-language=\"typescript\"><pre class=\"language-typescript\"><code class=\"language-typescript\"><span class=\"token comment\">// PtyManager.ts - 핵심 로직</span>\n<span class=\"token keyword\">const</span> pty <span class=\"token operator\">=</span> <span class=\"token function\">spawn</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"claude\"</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span>\n  name<span class=\"token operator\">:</span> <span class=\"token string\">\"xterm-256color\"</span><span class=\"token punctuation\">,</span>\n  cols<span class=\"token operator\">:</span> <span class=\"token number\">120</span><span class=\"token punctuation\">,</span>\n  rows<span class=\"token operator\">:</span> <span class=\"token number\">30</span><span class=\"token punctuation\">,</span>\n  cwd<span class=\"token operator\">:</span> workDir<span class=\"token punctuation\">,</span>\n  env<span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token operator\">...</span>process<span class=\"token punctuation\">.</span>env<span class=\"token punctuation\">,</span>\n    <span class=\"token constant\">ANTHROPIC_API_KEY</span><span class=\"token operator\">:</span> apiKey<span class=\"token punctuation\">,</span>\n    <span class=\"token constant\">TERM</span><span class=\"token operator\">:</span> <span class=\"token string\">\"xterm-256color\"</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\npty<span class=\"token punctuation\">.</span><span class=\"token function\">onData</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span>data<span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token comment\">// WebSocket을 통해 모든 연결된 클라이언트에 브로드캐스트</span>\n  wsServer<span class=\"token punctuation\">.</span><span class=\"token function\">broadcast</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"terminal:output\"</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span> sessionId<span class=\"token punctuation\">,</span> data <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>클라이언트에서는 xterm.js로 터미널을 렌더링한다. xterm.js가 ANSI 이스케이프 시퀀스를 해석해서 색상과 커서 위치까지 정확하게 재현한다.</p>\n<h3 id=\"session-persistence\">Session Persistence</h3>\n<p>세션 상태를 SQLite에 저장해서 서버가 재시작되어도 유지된다. 세션마다 워크스페이스를 연결하고, 상태 머신으로 생명주기를 관리한다.</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">idle → starting → running → stopping → idle\n                     ↓\n                   error</code></pre></div>\n<h3 id=\"file-explorer\">File Explorer</h3>\n<p>워크스페이스 파일을 트리 형태로 보여주고, Monaco Editor로 코드를 미리볼 수 있다. Claude가 파일을 수정하면 실시간으로 반영된다.</p>\n<h3 id=\"docker-멀티스테이지-빌드\">Docker 멀티스테이지 빌드</h3>\n<p>Claude CLI와 Codex CLI를 컨테이너에 포함시키기 위해 멀티스테이지 빌드를 사용했다.</p>\n<div class=\"gatsby-highlight\" data-language=\"dockerfile\"><pre class=\"language-dockerfile\"><code class=\"language-dockerfile\"><span class=\"token comment\"># Stage 1: Claude CLI 설치</span>\n<span class=\"token instruction\"><span class=\"token keyword\">FROM</span> node:20 <span class=\"token keyword\">AS</span> claude-cli</span>\n<span class=\"token instruction\"><span class=\"token keyword\">RUN</span> npm install -g @anthropic-ai/claude-code</span>\n\n<span class=\"token comment\"># Stage 2: Codex CLI 설치</span>\n<span class=\"token instruction\"><span class=\"token keyword\">FROM</span> node:20 <span class=\"token keyword\">AS</span> codex-cli</span>\n<span class=\"token instruction\"><span class=\"token keyword\">RUN</span> npm install -g @openai/codex</span>\n\n<span class=\"token comment\"># Stage 3: 런타임</span>\n<span class=\"token instruction\"><span class=\"token keyword\">FROM</span> node:20-slim <span class=\"token keyword\">AS</span> runner</span>\n<span class=\"token instruction\"><span class=\"token keyword\">COPY</span> <span class=\"token options\"><span class=\"token property\">--from</span><span class=\"token punctuation\">=</span><span class=\"token string\">claude-cli</span></span> /usr/local/bin/claude /usr/local/bin/claude</span>\n<span class=\"token instruction\"><span class=\"token keyword\">COPY</span> <span class=\"token options\"><span class=\"token property\">--from</span><span class=\"token punctuation\">=</span><span class=\"token string\">codex-cli</span></span> /usr/local/bin/codex /usr/local/bin/codex</span></code></pre></div>\n<p>이렇게 하면 최종 이미지에는 필요한 바이너리만 포함되어서 크기를 줄일 수 있었다.</p>\n<hr>\n<h2 id=\"claude와-함께한-개발-과정\">Claude와 함께한 개발 과정</h2>\n<p>이 프로젝트 자체가 Claude Code로 개발되었다. 세션 기록을 보면 어떤 대화를 했는지 알 수 있는데, 몇 가지 흥미로운 순간이 있었다.</p>\n<h3 id=\"codex-인증-문제-해결\">Codex 인증 문제 해결</h3>\n<p>Codex CLI는 localhost로 OAuth 콜백을 받는데, Docker 컨테이너 안에서는 브라우저를 실행할 수 없어서 인증이 불가능했다. Claude에게 이 문제를 설명하니, 환경변수로 API 키를 직접 주입하는 방식과 호스트에서 미리 인증한 설정을 마운트하는 두 가지 해결책을 제시했다.</p>\n<h3 id=\"스킬-관리-시스템-설계\">스킬 관리 시스템 설계</h3>\n<p>처음에는 스킬을 어떻게 관리할지 막막했다. Claude와 대화하면서 사용자별 스킬 디렉토리 분리, 데이터베이스 스키마, API 엔드포인트까지 구체화할 수 있었다.</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">~/.claude/skills/\n├── user-a/\n│   ├── git-commit-pr/\n│   └── code-review/\n└── user-b/\n    └── custom-skill/</code></pre></div>\n<h3 id=\"실시간-디버깅\">실시간 디버깅</h3>\n<p>WebSocket 연결이 끊기는 문제가 있었는데, Claude가 heartbeat 메커니즘과 재연결 로직을 제안해줬다. 코드를 직접 작성해주기도 하고, 왜 이런 접근이 필요한지 설명해주기도 했다.</p>\n<hr>\n<h2 id=\"gitops로-배포\">GitOps로 배포</h2>\n<p><a href=\"/posts/home-lab-iac\">이전 글</a>에서 구축한 GitOps 파이프라인으로 배포했다. GitHub에 푸시하면 Gitea Actions가 이미지를 빌드하고, ArgoCD가 Kubernetes에 배포한다.</p>\n<div class=\"gatsby-highlight\" data-language=\"yaml\"><pre class=\"language-yaml\"><code class=\"language-yaml\"><span class=\"token comment\"># ArgoCD Application</span>\n<span class=\"token key atrule\">apiVersion</span><span class=\"token punctuation\">:</span> argoproj.io/v1alpha1\n<span class=\"token key atrule\">kind</span><span class=\"token punctuation\">:</span> Application\n<span class=\"token key atrule\">metadata</span><span class=\"token punctuation\">:</span>\n  <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> claude<span class=\"token punctuation\">-</span>code<span class=\"token punctuation\">-</span>cloud\n<span class=\"token key atrule\">spec</span><span class=\"token punctuation\">:</span>\n  <span class=\"token key atrule\">source</span><span class=\"token punctuation\">:</span>\n    <span class=\"token key atrule\">repoURL</span><span class=\"token punctuation\">:</span> https<span class=\"token punctuation\">:</span>//github.com/jiunbae/IaC.git\n    <span class=\"token key atrule\">path</span><span class=\"token punctuation\">:</span> kubernetes/apps/claude<span class=\"token punctuation\">-</span>code<span class=\"token punctuation\">-</span>cloud\n  <span class=\"token key atrule\">destination</span><span class=\"token punctuation\">:</span>\n    <span class=\"token key atrule\">server</span><span class=\"token punctuation\">:</span> https<span class=\"token punctuation\">:</span>//kubernetes.default.svc\n  <span class=\"token key atrule\">syncPolicy</span><span class=\"token punctuation\">:</span>\n    <span class=\"token key atrule\">automated</span><span class=\"token punctuation\">:</span>\n      <span class=\"token key atrule\">prune</span><span class=\"token punctuation\">:</span> <span class=\"token boolean important\">true</span>\n      <span class=\"token key atrule\">selfHeal</span><span class=\"token punctuation\">:</span> <span class=\"token boolean important\">true</span></code></pre></div>\n<p>코드를 푸시하면 자동으로 배포되니, 개발-배포 사이클이 빠르다. 버그를 고치고 푸시하면 몇 분 후에 프로덕션에 반영된다.</p>\n<hr>\n<h2 id=\"실제로-써보니\">실제로 써보니</h2>\n<h3 id=\"좋았던-점\">좋았던 점</h3>\n<ol>\n<li><strong>환경 독립성</strong>: 어떤 기기에서든 브라우저만 있으면 Claude Code를 사용할 수 있다</li>\n<li><strong>세션 지속성</strong>: 노트북을 덮어도 세션이 유지된다. 다음 날 이어서 작업 가능</li>\n<li><strong>협업</strong>: 세션을 공유해서 다른 사람에게 보여줄 수 있다</li>\n<li><strong>파일 탐색</strong>: Claude가 수정한 파일을 실시간으로 확인할 수 있다</li>\n</ol>\n<h3 id=\"아쉬운-점\">아쉬운 점</h3>\n<ol>\n<li><strong>입력 지연</strong>: WebSocket을 거치다 보니 로컬 터미널보다 약간 느리다</li>\n<li><strong>리소스</strong>: 각 세션마다 CLI 프로세스가 떠서 메모리를 많이 사용한다</li>\n<li><strong>오프라인 불가</strong>: 당연히 인터넷 연결이 필요하다</li>\n</ol>\n<h3 id=\"개선하고-싶은-것\">개선하고 싶은 것</h3>\n<ul>\n<li>세션별 컨텍스트 저장 및 복원</li>\n<li>여러 사용자가 동시에 같은 세션에서 작업하는 진짜 협업 모드</li>\n<li>Claude/Codex 외에 다른 AI 모델 지원</li>\n</ul>\n<hr>\n<h2 id=\"맺음말\">맺음말</h2>\n<p>Claude Code Cloud를 만들면서 AI와 함께 개발하는 경험이 한층 더 깊어졌다. 단순히 AI를 도구로 쓰는 것을 넘어서, AI와 함께 AI를 위한 도구를 만드는 메타적인 경험이었다.</p>\n<p>특히 세션 기록을 통해 개발 과정을 되돌아볼 수 있다는 점이 흥미로웠다. 어떤 문제에 부딪혔고, 어떤 해결책을 시도했는지가 모두 기록되어 있으니 나중에 비슷한 문제를 만나면 참고할 수 있다.</p>\n<p>이 프로젝트는 <a href=\"https://github.com/jiunbae/claude-code-cloud\">GitHub</a>에 공개되어 있고, 직접 배포해서 사용할 수 있다. Docker Compose로 간단하게 띄울 수 있으니, 관심 있으면 한번 시도해보길 바란다.</p>\n<h2 id=\"관련-글\">관련 글</h2>\n<ul>\n<li><a href=\"/posts/home-dev\">Home Dev Environment</a></li>\n<li><a href=\"/posts/home-lab-iac\">Home Lab IaC</a></li>\n</ul>\n<hr>\n<h2 id=\"참고\">참고</h2>\n<ul>\n<li><a href=\"https://github.com/jiunbae/claude-code-cloud\">Claude Code Cloud GitHub</a></li>\n<li><a href=\"https://docs.anthropic.com/en/docs/claude-code/overview\">Claude Code CLI</a></li>\n<li><a href=\"https://xtermjs.org/\">xterm.js</a></li>\n<li><a href=\"https://github.com/microsoft/node-pty\">node-pty</a></li>\n<li><a href=\"/posts/home-lab-iac\">Home Lab IaC</a></li>\n</ul>","excerpt":"Claude Code Cloud: AI 코딩 세션을 브라우저에서 목표: **\"아무 환경에서나 Claude Code에 접속해서 작업하기\"**를 현실로 만들기.\n결과: 터미널 미러링, 세션 관리, 파일 탐색기, 실시간 협업까지 갖춘 웹 서비스 완성. 배경: 왜 이걸 만들었나 Claude Code CLI가 공개되고 나서부터 거의 모든 개발 작업에 Claude를…","frontmatter":{"date":"25.12.10","dateISO":"2025-12-10","description":"Claude Code CLI를 클라우드에서 실행하는 웹 서비스 개발기","slug":"/claude-code-cloud","heroImage":{"childImageSharp":{"gatsbyImageData":{"layout":"constrained","placeholder":{"fallback":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAIAAADwazoUAAAACXBIWXMAAAsTAAALEwEAmpwYAAAA+UlEQVR42q3Ny06DQBiGYe6gxeIU5p+zZU44FCkZrEZk05h4CW5dew3euiQeUiMLbUyefLs3X8L8iM24Lve+O6j2HmxPzDWY/gv5zm93LOwfw91zuE3Q7gVuXvPmSbUD1T3VkZlIyu4YHGG6IzpuTDQmJue8TnGFwDFmQzsIVUvuatvYcqtkkPJSqSBEBcS+w5+bE5sU7oD0A+JRCncVR2NbwawSjjNLiaH0Awb9U4J4syI1gkpfBMmckBUXnkzBFB8BMhcv1nqSYQOgAQwm8yfzz8vcLnKbYfv75p/itHDL3GXFSXFGqxT7VWFOidlmOAOfYffXknD/BsbcVyRY8QcrAAAAAElFTkSuQmCC"},"images":{"fallback":{"src":"/static/51888e9f553882001405c2bd71f9d84c/34fe8/terminal.png","srcSet":"/static/51888e9f553882001405c2bd71f9d84c/9bec7/terminal.png 960w,\n/static/51888e9f553882001405c2bd71f9d84c/afa5c/terminal.png 1920w,\n/static/51888e9f553882001405c2bd71f9d84c/34fe8/terminal.png 3840w","sizes":"(min-width: 3840px) 3840px, 100vw"},"sources":[{"srcSet":"/static/51888e9f553882001405c2bd71f9d84c/bde8a/terminal.webp 960w,\n/static/51888e9f553882001405c2bd71f9d84c/c512e/terminal.webp 1920w,\n/static/51888e9f553882001405c2bd71f9d84c/bab97/terminal.webp 3840w","type":"image/webp","sizes":"(min-width: 3840px) 3840px, 100vw"}]},"width":3840,"height":2160}}},"heroImageAlt":"Claude Code Cloud 터미널 화면","tags":["ai","claude","dev","devops"],"title":"Claude Code Cloud"},"tableOfContents":"<ul>\n<li>\n<p><a href=\"#claude-code-cloud-ai-%EC%BD%94%EB%94%A9-%EC%84%B8%EC%85%98%EC%9D%84-%EB%B8%8C%EB%9D%BC%EC%9A%B0%EC%A0%80%EC%97%90%EC%84%9C\">Claude Code Cloud: AI 코딩 세션을 브라우저에서</a></p>\n<ul>\n<li>\n<p><a href=\"#%EB%B0%B0%EA%B2%BD-%EC%99%9C-%EC%9D%B4%EA%B1%B8-%EB%A7%8C%EB%93%A4%EC%97%88%EB%82%98\">배경: 왜 이걸 만들었나</a></p>\n</li>\n<li>\n<p><a href=\"#%ED%95%B5%EC%8B%AC-%EA%B8%B0%EB%8A%A5\">핵심 기능</a></p>\n</li>\n<li>\n<p><a href=\"#%EC%8A%A4%ED%81%AC%EB%A6%B0%EC%83%B7\">스크린샷</a></p>\n<ul>\n<li><a href=\"#%EB%8C%80%EC%8B%9C%EB%B3%B4%EB%93%9C\">대시보드</a></li>\n<li><a href=\"#%ED%84%B0%EB%AF%B8%EB%84%90\">터미널</a></li>\n<li><a href=\"#%ED%8C%8C%EC%9D%BC-%ED%83%90%EC%83%89%EA%B8%B0\">파일 탐색기</a></li>\n</ul>\n</li>\n<li>\n<p><a href=\"#%EC%95%84%ED%82%A4%ED%85%8D%EC%B2%98-%EC%84%A4%EA%B3%84\">아키텍처 설계</a></p>\n<ul>\n<li><a href=\"#%EC%99%9C-%EC%9D%B4%EB%9F%B0-%EA%B5%AC%EC%A1%B0%EC%9D%B8%EA%B0%80\">왜 이런 구조인가</a></li>\n</ul>\n</li>\n<li>\n<p><a href=\"#%ED%95%B5%EC%8B%AC-%EA%B5%AC%ED%98%84\">핵심 구현</a></p>\n<ul>\n<li><a href=\"#terminal-mirroring\">Terminal Mirroring</a></li>\n<li><a href=\"#session-persistence\">Session Persistence</a></li>\n<li><a href=\"#file-explorer\">File Explorer</a></li>\n<li><a href=\"#docker-%EB%A9%80%ED%8B%B0%EC%8A%A4%ED%85%8C%EC%9D%B4%EC%A7%80-%EB%B9%8C%EB%93%9C\">Docker 멀티스테이지 빌드</a></li>\n</ul>\n</li>\n<li>\n<p><a href=\"#claude%EC%99%80-%ED%95%A8%EA%BB%98%ED%95%9C-%EA%B0%9C%EB%B0%9C-%EA%B3%BC%EC%A0%95\">Claude와 함께한 개발 과정</a></p>\n<ul>\n<li><a href=\"#codex-%EC%9D%B8%EC%A6%9D-%EB%AC%B8%EC%A0%9C-%ED%95%B4%EA%B2%B0\">Codex 인증 문제 해결</a></li>\n<li><a href=\"#%EC%8A%A4%ED%82%AC-%EA%B4%80%EB%A6%AC-%EC%8B%9C%EC%8A%A4%ED%85%9C-%EC%84%A4%EA%B3%84\">스킬 관리 시스템 설계</a></li>\n<li><a href=\"#%EC%8B%A4%EC%8B%9C%EA%B0%84-%EB%94%94%EB%B2%84%EA%B9%85\">실시간 디버깅</a></li>\n</ul>\n</li>\n<li>\n<p><a href=\"#gitops%EB%A1%9C-%EB%B0%B0%ED%8F%AC\">GitOps로 배포</a></p>\n</li>\n<li>\n<p><a href=\"#%EC%8B%A4%EC%A0%9C%EB%A1%9C-%EC%8D%A8%EB%B3%B4%EB%8B%88\">실제로 써보니</a></p>\n<ul>\n<li><a href=\"#%EC%A2%8B%EC%95%98%EB%8D%98-%EC%A0%90\">좋았던 점</a></li>\n<li><a href=\"#%EC%95%84%EC%89%AC%EC%9A%B4-%EC%A0%90\">아쉬운 점</a></li>\n<li><a href=\"#%EA%B0%9C%EC%84%A0%ED%95%98%EA%B3%A0-%EC%8B%B6%EC%9D%80-%EA%B2%83\">개선하고 싶은 것</a></li>\n</ul>\n</li>\n<li>\n<p><a href=\"#%EB%A7%BA%EC%9D%8C%EB%A7%90\">맺음말</a></p>\n</li>\n<li>\n<p><a href=\"#%EA%B4%80%EB%A0%A8-%EA%B8%80\">관련 글</a></p>\n</li>\n<li>\n<p><a href=\"#%EC%B0%B8%EA%B3%A0\">참고</a></p>\n</li>\n</ul>\n</li>\n</ul>"}},"pageContext":{"id":"a57a420a-8f12-5719-afbc-3add90f415fe","frontmatter__slug":"/claude-code-cloud","previous":"/home-dev","previousTitle":"Home Dev Environment","next":"/ai-startup-career-guide","nextTitle":"AI 스타트업 연구 엔지니어로 일한다는 것"}},"staticQueryHashes":["12962592","3399079524","3470099541","4097432363","76375841"],"slicesMap":{}}