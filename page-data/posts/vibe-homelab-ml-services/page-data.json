{"componentChunkName":"component---src-templates-post-tsx","path":"/posts/vibe-homelab-ml-services/","result":{"data":{"markdownRemark":{"html":"<h1 id=\"vibe-homelab-mlx-기반-ai-서비스와-대시보드-구축기\">Vibe Homelab: MLX 기반 AI 서비스와 대시보드 구축기</h1>\n<blockquote>\n<p>목표: <strong>Vibe Coding 중에 ML 모델을 즉시 활용</strong>할 수 있는 환경을 만들고, <strong>Self-hosted로 완전한 통제권</strong>을 갖기.\n결과: 이미지 ↔ 텍스트 ↔ 음성 변환이 자유로운 멀티모달 파이프라인과 통합 대시보드.</p>\n</blockquote>\n<hr>\n<h2 id=\"tldr\">TLDR;</h2>\n<ul>\n<li><strong>Vibe Coding의 인프라</strong>: 서비스를 빠르게 만들 때 ML 모델을 즉시 활용할 수 있는 환경</li>\n<li><strong>멀티모달 파이프라인</strong>: 이미지/음성 → 텍스트(LLM 처리) → 이미지/음성으로 변환</li>\n<li><strong>Vision Insight API</strong>: MLX 가속 이미지 분석(Moondream2, Qwen2.5-VL) + 이미지 생성(FLUX)</li>\n<li><strong>Voice Insight API</strong>: MLX 가속 음성 인식(Whisper) + 음성 합성(Kokoro, Marvis TTS)</li>\n<li><strong>Homelab Dashboard</strong>: React + FastAPI로 서비스 상태와 Worker 모니터링</li>\n<li><strong>Self-hosted</strong>: OpenAI 호환 API로 동작하면서 완전한 데이터 통제권</li>\n</ul>\n<hr>\n<h2 id=\"배경-vibe-coding을-위한-ai-인프라\">배경: Vibe Coding을 위한 AI 인프라</h2>\n<h3 id=\"vibe-coding이란\">Vibe Coding이란</h3>\n<p>요즘 Claude나 Cursor 같은 AI 도구로 코딩하는 방식을 \"Vibe Coding\"이라고 부르기도 한다. 대략적인 방향만 잡아주면 AI가 코드를 생성하고, 사람은 흐름을 조율하는 방식이다. 이렇게 개발하다 보면 다양한 서비스를 빠르게 프로토타이핑하게 된다.</p>\n<p>문제는 텍스트 기반 LLM만으로는 부족할 때가 많다는 것이다:</p>\n<ul>\n<li>샘플 이미지를 생성해서 UI에 넣고 싶다</li>\n<li>스크린샷을 분석해서 코드로 변환하고 싶다</li>\n<li>음성 입력을 받아서 처리하고 싶다</li>\n<li>결과를 음성으로 읽어주고 싶다</li>\n</ul>\n<p>이런 <strong>멀티모달 기능</strong>이 개발 과정에서 바로 필요해질 때, 매번 OpenAI API를 호출하거나 별도 서비스를 찾는 건 번거롭다.</p>\n<h3 id=\"멀티모달-파이프라인의-필요성\">멀티모달 파이프라인의 필요성</h3>\n<p>내가 원하는 건 이런 흐름이었다:</p>\n<p><svg id=\"mermaid-0\" width=\"100%\" xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\" class=\"flowchart\" style=\"max-width: 1038.59375px;\" viewBox=\"0 0 1038.59375 384\" role=\"graphics-document document\" aria-roledescription=\"flowchart-v2\"><style>#mermaid-0{font-family:inherit;font-size:16px;fill:#333;}@keyframes edge-animation-frame{from{stroke-dashoffset:0;}}@keyframes dash{to{stroke-dashoffset:0;}}#mermaid-0 .edge-animation-slow{stroke-dasharray:9,5!important;stroke-dashoffset:900;animation:dash 50s linear infinite;stroke-linecap:round;}#mermaid-0 .edge-animation-fast{stroke-dasharray:9,5!important;stroke-dashoffset:900;animation:dash 20s linear infinite;stroke-linecap:round;}#mermaid-0 .error-icon{fill:#552222;}#mermaid-0 .error-text{fill:#552222;stroke:#552222;}#mermaid-0 .edge-thickness-normal{stroke-width:1px;}#mermaid-0 .edge-thickness-thick{stroke-width:3.5px;}#mermaid-0 .edge-pattern-solid{stroke-dasharray:0;}#mermaid-0 .edge-thickness-invisible{stroke-width:0;fill:none;}#mermaid-0 .edge-pattern-dashed{stroke-dasharray:3;}#mermaid-0 .edge-pattern-dotted{stroke-dasharray:2;}#mermaid-0 .marker{fill:#333333;stroke:#333333;}#mermaid-0 .marker.cross{stroke:#333333;}#mermaid-0 svg{font-family:inherit;font-size:16px;}#mermaid-0 p{margin:0;}#mermaid-0 .label{font-family:inherit;color:#333;}#mermaid-0 .cluster-label text{fill:#333;}#mermaid-0 .cluster-label span{color:#333;}#mermaid-0 .cluster-label span p{background-color:transparent;}#mermaid-0 .label text,#mermaid-0 span{fill:#333;color:#333;}#mermaid-0 .node rect,#mermaid-0 .node circle,#mermaid-0 .node ellipse,#mermaid-0 .node polygon,#mermaid-0 .node path{fill:#ECECFF;stroke:#9370DB;stroke-width:1px;}#mermaid-0 .rough-node .label text,#mermaid-0 .node .label text,#mermaid-0 .image-shape .label,#mermaid-0 .icon-shape .label{text-anchor:middle;}#mermaid-0 .node .katex path{fill:#000;stroke:#000;stroke-width:1px;}#mermaid-0 .rough-node .label,#mermaid-0 .node .label,#mermaid-0 .image-shape .label,#mermaid-0 .icon-shape .label{text-align:center;}#mermaid-0 .node.clickable{cursor:pointer;}#mermaid-0 .root .anchor path{fill:#333333!important;stroke-width:0;stroke:#333333;}#mermaid-0 .arrowheadPath{fill:#333333;}#mermaid-0 .edgePath .path{stroke:#333333;stroke-width:2.0px;}#mermaid-0 .flowchart-link{stroke:#333333;fill:none;}#mermaid-0 .edgeLabel{background-color:rgba(232,232,232, 0.8);text-align:center;}#mermaid-0 .edgeLabel p{background-color:rgba(232,232,232, 0.8);}#mermaid-0 .edgeLabel rect{opacity:0.5;background-color:rgba(232,232,232, 0.8);fill:rgba(232,232,232, 0.8);}#mermaid-0 .labelBkg{background-color:rgba(232, 232, 232, 0.5);}#mermaid-0 .cluster rect{fill:#ffffde;stroke:#aaaa33;stroke-width:1px;}#mermaid-0 .cluster text{fill:#333;}#mermaid-0 .cluster span{color:#333;}#mermaid-0 div.mermaidTooltip{position:absolute;text-align:center;max-width:200px;padding:2px;font-family:inherit;font-size:12px;background:hsl(80, 100%, 96.2745098039%);border:1px solid #aaaa33;border-radius:2px;pointer-events:none;z-index:100;}#mermaid-0 .flowchartTitleText{text-anchor:middle;font-size:18px;fill:#333;}#mermaid-0 rect.text{fill:none;stroke-width:0;}#mermaid-0 .icon-shape,#mermaid-0 .image-shape{background-color:rgba(232,232,232, 0.8);text-align:center;}#mermaid-0 .icon-shape p,#mermaid-0 .image-shape p{background-color:rgba(232,232,232, 0.8);padding:2px;}#mermaid-0 .icon-shape rect,#mermaid-0 .image-shape rect{opacity:0.5;background-color:rgba(232,232,232, 0.8);fill:rgba(232,232,232, 0.8);}#mermaid-0 .label-icon{display:inline-block;height:1em;overflow:visible;vertical-align:-0.125em;}#mermaid-0 .node .label-icon path{fill:currentColor;stroke:revert;stroke-width:revert;}#mermaid-0 :root{--mermaid-font-family:arial,sans-serif;}</style><g><marker id=\"mermaid-0_flowchart-v2-pointEnd\" class=\"marker flowchart-v2\" viewBox=\"0 0 10 10\" refX=\"5\" refY=\"5\" markerUnits=\"userSpaceOnUse\" markerWidth=\"8\" markerHeight=\"8\" orient=\"auto\"><path d=\"M 0 0 L 10 5 L 0 10 z\" class=\"arrowMarkerPath\" style=\"stroke-width: 1; stroke-dasharray: 1, 0;\"></path></marker><marker id=\"mermaid-0_flowchart-v2-pointStart\" class=\"marker flowchart-v2\" viewBox=\"0 0 10 10\" refX=\"4.5\" refY=\"5\" markerUnits=\"userSpaceOnUse\" markerWidth=\"8\" markerHeight=\"8\" orient=\"auto\"><path d=\"M 0 5 L 10 10 L 10 0 z\" class=\"arrowMarkerPath\" style=\"stroke-width: 1; stroke-dasharray: 1, 0;\"></path></marker><marker id=\"mermaid-0_flowchart-v2-circleEnd\" class=\"marker flowchart-v2\" viewBox=\"0 0 10 10\" refX=\"11\" refY=\"5\" markerUnits=\"userSpaceOnUse\" markerWidth=\"11\" markerHeight=\"11\" orient=\"auto\"><circle cx=\"5\" cy=\"5\" r=\"5\" class=\"arrowMarkerPath\" style=\"stroke-width: 1; stroke-dasharray: 1, 0;\"></circle></marker><marker id=\"mermaid-0_flowchart-v2-circleStart\" class=\"marker flowchart-v2\" viewBox=\"0 0 10 10\" refX=\"-1\" refY=\"5\" markerUnits=\"userSpaceOnUse\" markerWidth=\"11\" markerHeight=\"11\" orient=\"auto\"><circle cx=\"5\" cy=\"5\" r=\"5\" class=\"arrowMarkerPath\" style=\"stroke-width: 1; stroke-dasharray: 1, 0;\"></circle></marker><marker id=\"mermaid-0_flowchart-v2-crossEnd\" class=\"marker cross flowchart-v2\" viewBox=\"0 0 11 11\" refX=\"12\" refY=\"5.2\" markerUnits=\"userSpaceOnUse\" markerWidth=\"11\" markerHeight=\"11\" orient=\"auto\"><path d=\"M 1,1 l 9,9 M 10,1 l -9,9\" class=\"arrowMarkerPath\" style=\"stroke-width: 2; stroke-dasharray: 1, 0;\"></path></marker><marker id=\"mermaid-0_flowchart-v2-crossStart\" class=\"marker cross flowchart-v2\" viewBox=\"0 0 11 11\" refX=\"-1\" refY=\"5.2\" markerUnits=\"userSpaceOnUse\" markerWidth=\"11\" markerHeight=\"11\" orient=\"auto\"><path d=\"M 1,1 l 9,9 M 10,1 l -9,9\" class=\"arrowMarkerPath\" style=\"stroke-width: 2; stroke-dasharray: 1, 0;\"></path></marker><g class=\"root\"><g class=\"clusters\"><g class=\"cluster\" id=\"OUTPUT\" data-look=\"classic\"><rect style=\"\" x=\"879.0625\" y=\"20\" width=\"151.53125\" height=\"356\"></rect><g class=\"cluster-label\" transform=\"translate(919.59375, 20)\"><foreignObject width=\"70.46875\" height=\"24\"><div xmlns=\"http://www.w3.org/1999/xhtml\" style=\"display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;\"><span class=\"nodeLabel\"><p>출력 (사람)</p></span></div></foreignObject></g></g><g class=\"cluster\" id=\"PROCESS\" data-look=\"classic\"><rect style=\"\" x=\"209.53125\" y=\"8\" width=\"619.53125\" height=\"353\"></rect><g class=\"cluster-label\" transform=\"translate(490.34375, 8)\"><foreignObject width=\"57.90625\" height=\"24\"><div xmlns=\"http://www.w3.org/1999/xhtml\" style=\"display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;\"><span class=\"nodeLabel\"><p>처리 (AI)</p></span></div></foreignObject></g></g><g class=\"cluster\" id=\"INPUT\" data-look=\"classic\"><rect style=\"\" x=\"8\" y=\"72\" width=\"151.53125\" height=\"252\"></rect><g class=\"cluster-label\" transform=\"translate(48.53125, 72)\"><foreignObject width=\"70.46875\" height=\"24\"><div xmlns=\"http://www.w3.org/1999/xhtml\" style=\"display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;\"><span class=\"nodeLabel\"><p>입력 (사람)</p></span></div></foreignObject></g></g></g><g class=\"edgePaths\"><path d=\"M134.531,134L138.698,134C142.865,134,151.198,134,159.531,134C167.865,134,176.198,134,184.531,134C192.865,134,201.198,134,208.865,134C216.531,134,223.531,134,227.031,134L230.531,134\" id=\"L_IMG1_VLM_0\" class=\"edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link\" style=\";\" data-edge=\"true\" data-et=\"edge\" data-id=\"L_IMG1_VLM_0\" data-points=\"W3sieCI6MTM0LjUzMTI1LCJ5IjoxMzR9LHsieCI6MTU5LjUzMTI1LCJ5IjoxMzR9LHsieCI6MTg0LjUzMTI1LCJ5IjoxMzR9LHsieCI6MjA5LjUzMTI1LCJ5IjoxMzR9LHsieCI6MjM0LjUzMTI1LCJ5IjoxMzR9XQ==\" marker-end=\"url(#mermaid-0_flowchart-v2-pointEnd)\"></path><path d=\"M402.469,134L406.635,134C410.802,134,419.135,134,430.239,139.742C441.344,145.483,455.218,156.966,462.156,162.708L469.093,168.45\" id=\"L_VLM_LLM_0\" class=\"edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link\" style=\";\" data-edge=\"true\" data-et=\"edge\" data-id=\"L_VLM_LLM_0\" data-points=\"W3sieCI6NDAyLjQ2ODc1LCJ5IjoxMzR9LHsieCI6NDI3LjQ2ODc1LCJ5IjoxMzR9LHsieCI6NDcyLjE3NDU0NzY5NzM2ODQ0LCJ5IjoxNzF9XQ==\" marker-end=\"url(#mermaid-0_flowchart-v2-pointEnd)\"></path><path d=\"M127.609,262L132.93,262C138.25,262,148.891,262,158.378,262C167.865,262,176.198,262,184.531,262C192.865,262,201.198,262,210.018,262C218.839,262,228.146,262,232.799,262L237.453,262\" id=\"L_AUDIO1_STT_0\" class=\"edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link\" style=\";\" data-edge=\"true\" data-et=\"edge\" data-id=\"L_AUDIO1_STT_0\" data-points=\"W3sieCI6MTI3LjYwOTM3NSwieSI6MjYyfSx7IngiOjE1OS41MzEyNSwieSI6MjYyfSx7IngiOjE4NC41MzEyNSwieSI6MjYyfSx7IngiOjIwOS41MzEyNSwieSI6MjYyfSx7IngiOjI0MS40NTMxMjUsInkiOjI2Mn1d\" marker-end=\"url(#mermaid-0_flowchart-v2-pointEnd)\"></path><path d=\"M395.547,262L400.867,262C406.188,262,416.828,262,425.735,259.969C434.642,257.938,441.815,253.876,445.402,251.845L448.988,249.814\" id=\"L_STT_LLM_0\" class=\"edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link\" style=\";\" data-edge=\"true\" data-et=\"edge\" data-id=\"L_STT_LLM_0\" data-points=\"W3sieCI6Mzk1LjU0Njg3NSwieSI6MjYyfSx7IngiOjQyNy40Njg3NSwieSI6MjYyfSx7IngiOjQ1Mi40Njg3NSwieSI6MjQ3Ljg0MzExNzIzNjY4NTM3fV0=\" marker-end=\"url(#mermaid-0_flowchart-v2-pointEnd)\"></path><path d=\"M553.732,249L563.298,259.833C572.863,270.667,591.994,292.333,619.721,303.167C647.448,314,683.771,314,720.094,314C756.417,314,792.74,314,815.068,314C837.396,314,845.729,314,854.063,314C862.396,314,870.729,314,878.396,314C886.063,314,893.063,314,896.563,314L900.063,314\" id=\"L_LLM_TEXT_0\" class=\"edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link\" style=\";\" data-edge=\"true\" data-et=\"edge\" data-id=\"L_LLM_TEXT_0\" data-points=\"W3sieCI6NTUzLjczMjQyMTg3NSwieSI6MjQ5fSx7IngiOjYxMS4xMjUsInkiOjMxNH0seyJ4Ijo3MjAuMDkzNzUsInkiOjMxNH0seyJ4Ijo4MjkuMDYyNSwieSI6MzE0fSx7IngiOjg1NC4wNjI1LCJ5IjozMTR9LHsieCI6ODc5LjA2MjUsInkiOjMxNH0seyJ4Ijo5MDQuMDYyNSwieSI6MzE0fV0=\" marker-end=\"url(#mermaid-0_flowchart-v2-pointEnd)\"></path><path d=\"M547.276,171L557.917,156.167C568.559,141.333,589.842,111.667,603.983,96.833C618.125,82,625.125,82,628.625,82L632.125,82\" id=\"L_LLM_IMGGEN_0\" class=\"edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link\" style=\";\" data-edge=\"true\" data-et=\"edge\" data-id=\"L_LLM_IMGGEN_0\" data-points=\"W3sieCI6NTQ3LjI3NTc1NjgzNTkzNzUsInkiOjE3MX0seyJ4Ijo2MTEuMTI1LCJ5Ijo4Mn0seyJ4Ijo2MzYuMTI1LCJ5Ijo4Mn1d\" marker-end=\"url(#mermaid-0_flowchart-v2-pointEnd)\"></path><path d=\"M804.063,82L808.229,82C812.396,82,820.729,82,829.063,82C837.396,82,845.729,82,854.063,82C862.396,82,870.729,82,878.396,82C886.063,82,893.063,82,896.563,82L900.063,82\" id=\"L_IMGGEN_IMG2_0\" class=\"edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link\" style=\";\" data-edge=\"true\" data-et=\"edge\" data-id=\"L_IMGGEN_IMG2_0\" data-points=\"W3sieCI6ODA0LjA2MjUsInkiOjgyfSx7IngiOjgyOS4wNjI1LCJ5Ijo4Mn0seyJ4Ijo4NTQuMDYyNSwieSI6ODJ9LHsieCI6ODc5LjA2MjUsInkiOjgyfSx7IngiOjkwNC4wNjI1LCJ5Ijo4Mn1d\" marker-end=\"url(#mermaid-0_flowchart-v2-pointEnd)\"></path><path d=\"M586.125,210L590.292,210C594.458,210,602.792,210,611.612,210C620.432,210,629.74,210,634.393,210L639.047,210\" id=\"L_LLM_TTS_0\" class=\"edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link\" style=\";\" data-edge=\"true\" data-et=\"edge\" data-id=\"L_LLM_TTS_0\" data-points=\"W3sieCI6NTg2LjEyNSwieSI6MjEwfSx7IngiOjYxMS4xMjUsInkiOjIxMH0seyJ4Ijo2NDMuMDQ2ODc1LCJ5IjoyMTB9XQ==\" marker-end=\"url(#mermaid-0_flowchart-v2-pointEnd)\"></path><path d=\"M797.141,210L802.461,210C807.781,210,818.422,210,827.909,210C837.396,210,845.729,210,854.063,210C862.396,210,870.729,210,879.549,210C888.37,210,897.677,210,902.331,210L906.984,210\" id=\"L_TTS_AUDIO2_0\" class=\"edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link\" style=\";\" data-edge=\"true\" data-et=\"edge\" data-id=\"L_TTS_AUDIO2_0\" data-points=\"W3sieCI6Nzk3LjE0MDYyNSwieSI6MjEwfSx7IngiOjgyOS4wNjI1LCJ5IjoyMTB9LHsieCI6ODU0LjA2MjUsInkiOjIxMH0seyJ4Ijo4NzkuMDYyNSwieSI6MjEwfSx7IngiOjkxMC45ODQzNzUsInkiOjIxMH1d\" marker-end=\"url(#mermaid-0_flowchart-v2-pointEnd)\"></path></g><g class=\"edgeLabels\"><g class=\"edgeLabel\"><g class=\"label\" data-id=\"L_IMG1_VLM_0\" transform=\"translate(0, 0)\"><foreignObject width=\"0\" height=\"0\"><div xmlns=\"http://www.w3.org/1999/xhtml\" class=\"labelBkg\" style=\"display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;\"><span class=\"edgeLabel\"></span></div></foreignObject></g></g><g class=\"edgeLabel\"><g class=\"label\" data-id=\"L_VLM_LLM_0\" transform=\"translate(0, 0)\"><foreignObject width=\"0\" height=\"0\"><div xmlns=\"http://www.w3.org/1999/xhtml\" class=\"labelBkg\" style=\"display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;\"><span class=\"edgeLabel\"></span></div></foreignObject></g></g><g class=\"edgeLabel\"><g class=\"label\" data-id=\"L_AUDIO1_STT_0\" transform=\"translate(0, 0)\"><foreignObject width=\"0\" height=\"0\"><div xmlns=\"http://www.w3.org/1999/xhtml\" class=\"labelBkg\" style=\"display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;\"><span class=\"edgeLabel\"></span></div></foreignObject></g></g><g class=\"edgeLabel\"><g class=\"label\" data-id=\"L_STT_LLM_0\" transform=\"translate(0, 0)\"><foreignObject width=\"0\" height=\"0\"><div xmlns=\"http://www.w3.org/1999/xhtml\" class=\"labelBkg\" style=\"display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;\"><span class=\"edgeLabel\"></span></div></foreignObject></g></g><g class=\"edgeLabel\"><g class=\"label\" data-id=\"L_LLM_TEXT_0\" transform=\"translate(0, 0)\"><foreignObject width=\"0\" height=\"0\"><div xmlns=\"http://www.w3.org/1999/xhtml\" class=\"labelBkg\" style=\"display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;\"><span class=\"edgeLabel\"></span></div></foreignObject></g></g><g class=\"edgeLabel\"><g class=\"label\" data-id=\"L_LLM_IMGGEN_0\" transform=\"translate(0, 0)\"><foreignObject width=\"0\" height=\"0\"><div xmlns=\"http://www.w3.org/1999/xhtml\" class=\"labelBkg\" style=\"display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;\"><span class=\"edgeLabel\"></span></div></foreignObject></g></g><g class=\"edgeLabel\"><g class=\"label\" data-id=\"L_IMGGEN_IMG2_0\" transform=\"translate(0, 0)\"><foreignObject width=\"0\" height=\"0\"><div xmlns=\"http://www.w3.org/1999/xhtml\" class=\"labelBkg\" style=\"display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;\"><span class=\"edgeLabel\"></span></div></foreignObject></g></g><g class=\"edgeLabel\"><g class=\"label\" data-id=\"L_LLM_TTS_0\" transform=\"translate(0, 0)\"><foreignObject width=\"0\" height=\"0\"><div xmlns=\"http://www.w3.org/1999/xhtml\" class=\"labelBkg\" style=\"display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;\"><span class=\"edgeLabel\"></span></div></foreignObject></g></g><g class=\"edgeLabel\"><g class=\"label\" data-id=\"L_TTS_AUDIO2_0\" transform=\"translate(0, 0)\"><foreignObject width=\"0\" height=\"0\"><div xmlns=\"http://www.w3.org/1999/xhtml\" class=\"labelBkg\" style=\"display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;\"><span class=\"edgeLabel\"></span></div></foreignObject></g></g></g><g class=\"nodes\"><g class=\"node default\" id=\"flowchart-IMG1-0\" transform=\"translate(83.765625, 134)\"><rect class=\"basic label-container\" style=\"\" x=\"-50.765625\" y=\"-27\" width=\"101.53125\" height=\"54\"></rect><g class=\"label\" style=\"\" transform=\"translate(-20.765625, -12)\"><rect></rect><foreignObject width=\"41.53125\" height=\"24\"><div xmlns=\"http://www.w3.org/1999/xhtml\" style=\"display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;\"><span class=\"nodeLabel\"><p>이미지</p></span></div></foreignObject></g></g><g class=\"node default\" id=\"flowchart-AUDIO1-1\" transform=\"translate(83.765625, 262)\"><rect class=\"basic label-container\" style=\"\" x=\"-43.84375\" y=\"-27\" width=\"87.6875\" height=\"54\"></rect><g class=\"label\" style=\"\" transform=\"translate(-13.84375, -12)\"><rect></rect><foreignObject width=\"27.6875\" height=\"24\"><div xmlns=\"http://www.w3.org/1999/xhtml\" style=\"display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;\"><span class=\"nodeLabel\"><p>음성</p></span></div></foreignObject></g></g><g class=\"node default\" id=\"flowchart-VLM-2\" transform=\"translate(318.5, 134)\"><rect class=\"basic label-container\" style=\"\" x=\"-83.96875\" y=\"-39\" width=\"167.9375\" height=\"78\"></rect><g class=\"label\" style=\"\" transform=\"translate(-53.96875, -24)\"><rect></rect><foreignObject width=\"107.9375\" height=\"48\"><div xmlns=\"http://www.w3.org/1999/xhtml\" style=\"display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;\"><span class=\"nodeLabel\"><p>Vision LM<br></br>이미지 → 텍스트</p></span></div></foreignObject></g></g><g class=\"node default\" id=\"flowchart-STT-3\" transform=\"translate(318.5, 262)\"><rect class=\"basic label-container\" style=\"\" x=\"-77.046875\" y=\"-39\" width=\"154.09375\" height=\"78\"></rect><g class=\"label\" style=\"\" transform=\"translate(-47.046875, -24)\"><rect></rect><foreignObject width=\"94.09375\" height=\"48\"><div xmlns=\"http://www.w3.org/1999/xhtml\" style=\"display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;\"><span class=\"nodeLabel\"><p>STT<br></br>음성 → 텍스트</p></span></div></foreignObject></g></g><g class=\"node default\" id=\"flowchart-LLM-4\" transform=\"translate(519.296875, 210)\"><rect class=\"basic label-container\" style=\"\" x=\"-66.828125\" y=\"-39\" width=\"133.65625\" height=\"78\"></rect><g class=\"label\" style=\"\" transform=\"translate(-36.828125, -24)\"><rect></rect><foreignObject width=\"73.65625\" height=\"48\"><div xmlns=\"http://www.w3.org/1999/xhtml\" style=\"display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;\"><span class=\"nodeLabel\"><p>LLM<br></br>텍스트 처리</p></span></div></foreignObject></g></g><g class=\"node default\" id=\"flowchart-IMGGEN-5\" transform=\"translate(720.09375, 82)\"><rect class=\"basic label-container\" style=\"\" x=\"-83.96875\" y=\"-39\" width=\"167.9375\" height=\"78\"></rect><g class=\"label\" style=\"\" transform=\"translate(-53.96875, -24)\"><rect></rect><foreignObject width=\"107.9375\" height=\"48\"><div xmlns=\"http://www.w3.org/1999/xhtml\" style=\"display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;\"><span class=\"nodeLabel\"><p>Image Gen<br></br>텍스트 → 이미지</p></span></div></foreignObject></g></g><g class=\"node default\" id=\"flowchart-TTS-6\" transform=\"translate(720.09375, 210)\"><rect class=\"basic label-container\" style=\"\" x=\"-77.046875\" y=\"-39\" width=\"154.09375\" height=\"78\"></rect><g class=\"label\" style=\"\" transform=\"translate(-47.046875, -24)\"><rect></rect><foreignObject width=\"94.09375\" height=\"48\"><div xmlns=\"http://www.w3.org/1999/xhtml\" style=\"display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;\"><span class=\"nodeLabel\"><p>TTS<br></br>텍스트 → 음성</p></span></div></foreignObject></g></g><g class=\"node default\" id=\"flowchart-IMG2-7\" transform=\"translate(954.828125, 82)\"><rect class=\"basic label-container\" style=\"\" x=\"-50.765625\" y=\"-27\" width=\"101.53125\" height=\"54\"></rect><g class=\"label\" style=\"\" transform=\"translate(-20.765625, -12)\"><rect></rect><foreignObject width=\"41.53125\" height=\"24\"><div xmlns=\"http://www.w3.org/1999/xhtml\" style=\"display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;\"><span class=\"nodeLabel\"><p>이미지</p></span></div></foreignObject></g></g><g class=\"node default\" id=\"flowchart-AUDIO2-8\" transform=\"translate(954.828125, 210)\"><rect class=\"basic label-container\" style=\"\" x=\"-43.84375\" y=\"-27\" width=\"87.6875\" height=\"54\"></rect><g class=\"label\" style=\"\" transform=\"translate(-13.84375, -12)\"><rect></rect><foreignObject width=\"27.6875\" height=\"24\"><div xmlns=\"http://www.w3.org/1999/xhtml\" style=\"display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;\"><span class=\"nodeLabel\"><p>음성</p></span></div></foreignObject></g></g><g class=\"node default\" id=\"flowchart-TEXT-9\" transform=\"translate(954.828125, 314)\"><rect class=\"basic label-container\" style=\"\" x=\"-50.765625\" y=\"-27\" width=\"101.53125\" height=\"54\"></rect><g class=\"label\" style=\"\" transform=\"translate(-20.765625, -12)\"><rect></rect><foreignObject width=\"41.53125\" height=\"24\"><div xmlns=\"http://www.w3.org/1999/xhtml\" style=\"display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;\"><span class=\"nodeLabel\"><p>텍스트</p></span></div></foreignObject></g></g></g></g></g></svg></p>\n<p>즉, <strong>사람이 이해할 수 있는 형태</strong>(이미지, 음성)를 <strong>기계가 처리할 수 있는 형태</strong>(텍스트)로 바꾸고, LLM으로 처리한 뒤, 다시 <strong>사람이 소비할 수 있는 형태</strong>로 변환하는 것이다.</p>\n<p>예를 들어:</p>\n<ul>\n<li>음성으로 \"이 UI 스크린샷 분석해서 개선점 알려줘\" → STT → LLM + Vision → TTS로 음성 응답</li>\n<li>\"귀여운 로봇 아이콘 만들어줘\" → Image Gen → 결과 이미지</li>\n<li>회의 녹음 → STT → LLM 요약 → TTS로 음성 브리핑</li>\n</ul>\n<h3 id=\"왜-self-hosted인가\">왜 Self-hosted인가</h3>\n<p><a href=\"/posts/home-lab-iac\">이전 글</a>에서 Terraform + Ansible로 홈랩 인프라를 코드화한 이야기를 했다. 인프라가 정리되니 자연스럽게 \"이 위에서 뭘 돌릴까?\"라는 고민이 생겼다.</p>\n<p>마침 Mac Mini M4 (32GB)를 새로 구입해서 홈 서버로 사용하게 되었다. Apple Silicon의 MLX 프레임워크가 눈에 들어왔는데, GPU 메모리 제약 없이 통합 메모리를 활용할 수 있어서 생각보다 큰 모델도 로컬에서 돌릴 수 있었다. 24시간 상시 가동해도 전력 소모가 적고, 팬 소음도 거의 없어서 AI 서버로 딱이었다.</p>\n<p>OpenAI API를 쓰면 편하지만, Self-hosted를 선택한 이유가 있다:</p>\n<table>\n<thead>\n<tr>\n<th>관점</th>\n<th>Cloud API</th>\n<th>Self-hosted</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td><strong>비용</strong></td>\n<td>호출당 과금 (이미지/음성은 비쌈)</td>\n<td>전기세만 (무제한 사용)</td>\n</tr>\n<tr>\n<td><strong>프라이버시</strong></td>\n<td>데이터가 외부 서버로</td>\n<td>내 데이터는 내 장비 안에</td>\n</tr>\n<tr>\n<td><strong>가용성</strong></td>\n<td>인터넷 필수, API 장애 영향</td>\n<td>오프라인 동작, 완전한 통제</td>\n</tr>\n<tr>\n<td><strong>커스터마이징</strong></td>\n<td>제공되는 모델만 사용</td>\n<td>원하는 모델 자유롭게 교체</td>\n</tr>\n<tr>\n<td><strong>개발 속도</strong></td>\n<td>API 키 관리, rate limit</td>\n<td>로컬이라 제약 없음</td>\n</tr>\n</tbody>\n</table>\n<p>특히 Vibe Coding으로 프로토타이핑할 때는 <strong>빠른 실험</strong>이 중요하다. API 비용 걱정 없이 수백 번 호출해보고, 다양한 모델을 바꿔가며 테스트하고 싶었다.</p>\n<p>그래서 직접 만들기로 했다.</p>\n<hr>\n<h2 id=\"아키텍처-개요\">아키텍처 개요</h2>\n<p><svg id=\"mermaid-1\" width=\"100%\" xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\" class=\"flowchart\" style=\"max-width: 1536.671875px;\" viewBox=\"0 0 1536.671875 826\" role=\"graphics-document document\" aria-roledescription=\"flowchart-v2\"><style>#mermaid-1{font-family:inherit;font-size:16px;fill:#333;}@keyframes edge-animation-frame{from{stroke-dashoffset:0;}}@keyframes dash{to{stroke-dashoffset:0;}}#mermaid-1 .edge-animation-slow{stroke-dasharray:9,5!important;stroke-dashoffset:900;animation:dash 50s linear infinite;stroke-linecap:round;}#mermaid-1 .edge-animation-fast{stroke-dasharray:9,5!important;stroke-dashoffset:900;animation:dash 20s linear infinite;stroke-linecap:round;}#mermaid-1 .error-icon{fill:#552222;}#mermaid-1 .error-text{fill:#552222;stroke:#552222;}#mermaid-1 .edge-thickness-normal{stroke-width:1px;}#mermaid-1 .edge-thickness-thick{stroke-width:3.5px;}#mermaid-1 .edge-pattern-solid{stroke-dasharray:0;}#mermaid-1 .edge-thickness-invisible{stroke-width:0;fill:none;}#mermaid-1 .edge-pattern-dashed{stroke-dasharray:3;}#mermaid-1 .edge-pattern-dotted{stroke-dasharray:2;}#mermaid-1 .marker{fill:#333333;stroke:#333333;}#mermaid-1 .marker.cross{stroke:#333333;}#mermaid-1 svg{font-family:inherit;font-size:16px;}#mermaid-1 p{margin:0;}#mermaid-1 .label{font-family:inherit;color:#333;}#mermaid-1 .cluster-label text{fill:#333;}#mermaid-1 .cluster-label span{color:#333;}#mermaid-1 .cluster-label span p{background-color:transparent;}#mermaid-1 .label text,#mermaid-1 span{fill:#333;color:#333;}#mermaid-1 .node rect,#mermaid-1 .node circle,#mermaid-1 .node ellipse,#mermaid-1 .node polygon,#mermaid-1 .node path{fill:#ECECFF;stroke:#9370DB;stroke-width:1px;}#mermaid-1 .rough-node .label text,#mermaid-1 .node .label text,#mermaid-1 .image-shape .label,#mermaid-1 .icon-shape .label{text-anchor:middle;}#mermaid-1 .node .katex path{fill:#000;stroke:#000;stroke-width:1px;}#mermaid-1 .rough-node .label,#mermaid-1 .node .label,#mermaid-1 .image-shape .label,#mermaid-1 .icon-shape .label{text-align:center;}#mermaid-1 .node.clickable{cursor:pointer;}#mermaid-1 .root .anchor path{fill:#333333!important;stroke-width:0;stroke:#333333;}#mermaid-1 .arrowheadPath{fill:#333333;}#mermaid-1 .edgePath .path{stroke:#333333;stroke-width:2.0px;}#mermaid-1 .flowchart-link{stroke:#333333;fill:none;}#mermaid-1 .edgeLabel{background-color:rgba(232,232,232, 0.8);text-align:center;}#mermaid-1 .edgeLabel p{background-color:rgba(232,232,232, 0.8);}#mermaid-1 .edgeLabel rect{opacity:0.5;background-color:rgba(232,232,232, 0.8);fill:rgba(232,232,232, 0.8);}#mermaid-1 .labelBkg{background-color:rgba(232, 232, 232, 0.5);}#mermaid-1 .cluster rect{fill:#ffffde;stroke:#aaaa33;stroke-width:1px;}#mermaid-1 .cluster text{fill:#333;}#mermaid-1 .cluster span{color:#333;}#mermaid-1 div.mermaidTooltip{position:absolute;text-align:center;max-width:200px;padding:2px;font-family:inherit;font-size:12px;background:hsl(80, 100%, 96.2745098039%);border:1px solid #aaaa33;border-radius:2px;pointer-events:none;z-index:100;}#mermaid-1 .flowchartTitleText{text-anchor:middle;font-size:18px;fill:#333;}#mermaid-1 rect.text{fill:none;stroke-width:0;}#mermaid-1 .icon-shape,#mermaid-1 .image-shape{background-color:rgba(232,232,232, 0.8);text-align:center;}#mermaid-1 .icon-shape p,#mermaid-1 .image-shape p{background-color:rgba(232,232,232, 0.8);padding:2px;}#mermaid-1 .icon-shape rect,#mermaid-1 .image-shape rect{opacity:0.5;background-color:rgba(232,232,232, 0.8);fill:rgba(232,232,232, 0.8);}#mermaid-1 .label-icon{display:inline-block;height:1em;overflow:visible;vertical-align:-0.125em;}#mermaid-1 .node .label-icon path{fill:currentColor;stroke:revert;stroke-width:revert;}#mermaid-1 :root{--mermaid-font-family:arial,sans-serif;}</style><g><marker id=\"mermaid-1_flowchart-v2-pointEnd\" class=\"marker flowchart-v2\" viewBox=\"0 0 10 10\" refX=\"5\" refY=\"5\" markerUnits=\"userSpaceOnUse\" markerWidth=\"8\" markerHeight=\"8\" orient=\"auto\"><path d=\"M 0 0 L 10 5 L 0 10 z\" class=\"arrowMarkerPath\" style=\"stroke-width: 1; stroke-dasharray: 1, 0;\"></path></marker><marker id=\"mermaid-1_flowchart-v2-pointStart\" class=\"marker flowchart-v2\" viewBox=\"0 0 10 10\" refX=\"4.5\" refY=\"5\" markerUnits=\"userSpaceOnUse\" markerWidth=\"8\" markerHeight=\"8\" orient=\"auto\"><path d=\"M 0 5 L 10 10 L 10 0 z\" class=\"arrowMarkerPath\" style=\"stroke-width: 1; stroke-dasharray: 1, 0;\"></path></marker><marker id=\"mermaid-1_flowchart-v2-circleEnd\" class=\"marker flowchart-v2\" viewBox=\"0 0 10 10\" refX=\"11\" refY=\"5\" markerUnits=\"userSpaceOnUse\" markerWidth=\"11\" markerHeight=\"11\" orient=\"auto\"><circle cx=\"5\" cy=\"5\" r=\"5\" class=\"arrowMarkerPath\" style=\"stroke-width: 1; stroke-dasharray: 1, 0;\"></circle></marker><marker id=\"mermaid-1_flowchart-v2-circleStart\" class=\"marker flowchart-v2\" viewBox=\"0 0 10 10\" refX=\"-1\" refY=\"5\" markerUnits=\"userSpaceOnUse\" markerWidth=\"11\" markerHeight=\"11\" orient=\"auto\"><circle cx=\"5\" cy=\"5\" r=\"5\" class=\"arrowMarkerPath\" style=\"stroke-width: 1; stroke-dasharray: 1, 0;\"></circle></marker><marker id=\"mermaid-1_flowchart-v2-crossEnd\" class=\"marker cross flowchart-v2\" viewBox=\"0 0 11 11\" refX=\"12\" refY=\"5.2\" markerUnits=\"userSpaceOnUse\" markerWidth=\"11\" markerHeight=\"11\" orient=\"auto\"><path d=\"M 1,1 l 9,9 M 10,1 l -9,9\" class=\"arrowMarkerPath\" style=\"stroke-width: 2; stroke-dasharray: 1, 0;\"></path></marker><marker id=\"mermaid-1_flowchart-v2-crossStart\" class=\"marker cross flowchart-v2\" viewBox=\"0 0 11 11\" refX=\"-1\" refY=\"5.2\" markerUnits=\"userSpaceOnUse\" markerWidth=\"11\" markerHeight=\"11\" orient=\"auto\"><path d=\"M 1,1 l 9,9 M 10,1 l -9,9\" class=\"arrowMarkerPath\" style=\"stroke-width: 2; stroke-dasharray: 1, 0;\"></path></marker><g class=\"root\"><g class=\"clusters\"><g class=\"cluster\" id=\"VOICE\" data-look=\"classic\"><rect style=\"\" x=\"8\" y=\"410\" width=\"858.078125\" height=\"408\"></rect><g class=\"cluster-label\" transform=\"translate(377, 410)\"><foreignObject width=\"120.078125\" height=\"24\"><div xmlns=\"http://www.w3.org/1999/xhtml\" style=\"display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;\"><span class=\"nodeLabel\"><p>Voice Insight API</p></span></div></foreignObject></g></g><g class=\"cluster\" id=\"VISION\" data-look=\"classic\"><rect style=\"\" x=\"886.078125\" y=\"410\" width=\"642.59375\" height=\"408\"></rect><g class=\"cluster-label\" transform=\"translate(1145.2578125, 410)\"><foreignObject width=\"124.234375\" height=\"24\"><div xmlns=\"http://www.w3.org/1999/xhtml\" style=\"display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;\"><span class=\"nodeLabel\"><p>Vision Insight API</p></span></div></foreignObject></g></g><g class=\"cluster\" id=\"DASHBOARD\" data-look=\"classic\"><rect style=\"\" x=\"344.32421875\" y=\"8\" width=\"949.05859375\" height=\"328\"></rect><g class=\"cluster-label\" transform=\"translate(718.853515625, 8)\"><foreignObject width=\"200\" height=\"48\"><div xmlns=\"http://www.w3.org/1999/xhtml\" style=\"display: table; white-space: break-spaces; line-height: 1.5; max-width: 200px; text-align: center; width: 200px;\"><span class=\"nodeLabel\"><p>Homelab Dashboard (Docker)</p></span></div></foreignObject></g></g></g><g class=\"edgePaths\"><path d=\"M889.094,139L889.094,144.5C889.094,150,889.094,161,889.094,172C889.094,183,889.094,194,889.094,199.5L889.094,205\" id=\"L_FE_BE_0\" class=\"edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link\" style=\";\" data-edge=\"true\" data-et=\"edge\" data-id=\"L_FE_BE_0\" data-points=\"W3sieCI6ODg5LjA5Mzc1LCJ5IjoxMzV9LHsieCI6ODg5LjA5Mzc1LCJ5IjoxNzJ9LHsieCI6ODg5LjA5Mzc1LCJ5IjoyMDl9XQ==\" marker-start=\"url(#mermaid-1_flowchart-v2-pointStart)\" marker-end=\"url(#mermaid-1_flowchart-v2-pointEnd)\"></path><path d=\"M1000.281,537L1000.281,541.167C1000.281,545.333,1000.281,553.667,1017.999,563.516C1035.717,573.365,1071.153,584.731,1088.871,590.413L1106.59,596.096\" id=\"L_VGW_VWM_0\" class=\"edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link\" style=\";\" data-edge=\"true\" data-et=\"edge\" data-id=\"L_VGW_VWM_0\" data-points=\"W3sieCI6MTAwMC4yODEyNSwieSI6NTM3fSx7IngiOjEwMDAuMjgxMjUsInkiOjU2Mn0seyJ4IjoxMTEwLjM5ODQzNzUsInkiOjU5Ny4zMTc1MTYyNDc3NDg4fV0=\" marker-end=\"url(#mermaid-1_flowchart-v2-pointEnd)\"></path><path d=\"M1110.398,654.389L1091.702,660.324C1073.005,666.259,1035.612,678.13,1016.915,687.565C998.219,697,998.219,704,998.219,707.5L998.219,711\" id=\"L_VWM_VW1_0\" class=\"edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link\" style=\";\" data-edge=\"true\" data-et=\"edge\" data-id=\"L_VWM_VW1_0\" data-points=\"W3sieCI6MTExMC4zOTg0Mzc1LCJ5Ijo2NTQuMzg5MDU2ODA4NDk0Mn0seyJ4Ijo5OTguMjE4NzUsInkiOjY5MH0seyJ4Ijo5OTguMjE4NzUsInkiOjcxNX1d\" marker-end=\"url(#mermaid-1_flowchart-v2-pointEnd)\"></path><path d=\"M1199.828,665L1199.828,669.167C1199.828,673.333,1199.828,681.667,1199.828,689.333C1199.828,697,1199.828,704,1199.828,707.5L1199.828,711\" id=\"L_VWM_VW2_0\" class=\"edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link\" style=\";\" data-edge=\"true\" data-et=\"edge\" data-id=\"L_VWM_VW2_0\" data-points=\"W3sieCI6MTE5OS44MjgxMjUsInkiOjY2NX0seyJ4IjoxMTk5LjgyODEyNSwieSI6NjkwfSx7IngiOjExOTkuODI4MTI1LCJ5Ijo3MTV9XQ==\" marker-end=\"url(#mermaid-1_flowchart-v2-pointEnd)\"></path><path d=\"M1289.258,653.365L1309.212,659.471C1329.167,665.576,1369.076,677.788,1389.03,687.394C1408.984,697,1408.984,704,1408.984,707.5L1408.984,711\" id=\"L_VWM_VW3_0\" class=\"edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link\" style=\";\" data-edge=\"true\" data-et=\"edge\" data-id=\"L_VWM_VW3_0\" data-points=\"W3sieCI6MTI4OS4yNTc4MTI1LCJ5Ijo2NTMuMzY0NzA5Mzk3ODc4NH0seyJ4IjoxNDA4Ljk4NDM3NSwieSI6NjkwfSx7IngiOjE0MDguOTg0Mzc1LCJ5Ijo3MTV9XQ==\" marker-end=\"url(#mermaid-1_flowchart-v2-pointEnd)\"></path><path d=\"M384.324,537L384.324,541.167C384.324,545.333,384.324,553.667,388.61,561.562C392.896,569.458,401.467,576.916,405.753,580.645L410.039,584.374\" id=\"L_SGW_SWM_0\" class=\"edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link\" style=\";\" data-edge=\"true\" data-et=\"edge\" data-id=\"L_SGW_SWM_0\" data-points=\"W3sieCI6Mzg0LjMyNDIxODc1LCJ5Ijo1Mzd9LHsieCI6Mzg0LjMyNDIxODc1LCJ5Ijo1NjJ9LHsieCI6NDEzLjA1NjUxODU1NDY4NzUsInkiOjU4N31d\" marker-end=\"url(#mermaid-1_flowchart-v2-pointEnd)\"></path><path d=\"M368.449,643.195L327.878,650.996C287.307,658.797,206.165,674.398,165.594,685.699C125.023,697,125.023,704,125.023,707.5L125.023,711\" id=\"L_SWM_SW1_0\" class=\"edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link\" style=\";\" data-edge=\"true\" data-et=\"edge\" data-id=\"L_SWM_SW1_0\" data-points=\"W3sieCI6MzY4LjQ0OTIxODc1LCJ5Ijo2NDMuMTk1MTUwODYwODA0M30seyJ4IjoxMjUuMDIzNDM3NSwieSI6NjkwfSx7IngiOjEyNS4wMjM0Mzc1LCJ5Ijo3MTV9XQ==\" marker-end=\"url(#mermaid-1_flowchart-v2-pointEnd)\"></path><path d=\"M391.983,665L384.943,669.167C377.903,673.333,363.822,681.667,356.782,689.333C349.742,697,349.742,704,349.742,707.5L349.742,711\" id=\"L_SWM_SW2_0\" class=\"edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link\" style=\";\" data-edge=\"true\" data-et=\"edge\" data-id=\"L_SWM_SW2_0\" data-points=\"W3sieCI6MzkxLjk4MzA5MzI2MTcxODc1LCJ5Ijo2NjV9LHsieCI6MzQ5Ljc0MjE4NzUsInkiOjY5MH0seyJ4IjozNDkuNzQyMTg3NSwieSI6NzE1fV0=\" marker-end=\"url(#mermaid-1_flowchart-v2-pointEnd)\"></path><path d=\"M523.775,665L530.815,669.167C537.855,673.333,551.935,681.667,558.975,689.333C566.016,697,566.016,704,566.016,707.5L566.016,711\" id=\"L_SWM_SW3_0\" class=\"edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link\" style=\";\" data-edge=\"true\" data-et=\"edge\" data-id=\"L_SWM_SW3_0\" data-points=\"W3sieCI6NTIzLjc3NDcxOTIzODI4MTIsInkiOjY2NX0seyJ4Ijo1NjYuMDE1NjI1LCJ5Ijo2OTB9LHsieCI6NTY2LjAxNTYyNSwieSI6NzE1fV0=\" marker-end=\"url(#mermaid-1_flowchart-v2-pointEnd)\"></path><path d=\"M547.309,644.923L582.813,652.436C618.318,659.949,689.327,674.974,724.831,685.987C760.336,697,760.336,704,760.336,707.5L760.336,711\" id=\"L_SWM_SW4_0\" class=\"edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link\" style=\";\" data-edge=\"true\" data-et=\"edge\" data-id=\"L_SWM_SW4_0\" data-points=\"W3sieCI6NTQ3LjMwODU5Mzc1LCJ5Ijo2NDQuOTIzMzQ5MTMyNzUzOX0seyJ4Ijo3NjAuMzM1OTM3NSwieSI6NjkwfSx7IngiOjc2MC4zMzU5Mzc1LCJ5Ijo3MTV9XQ==\" marker-end=\"url(#mermaid-1_flowchart-v2-pointEnd)\"></path><path d=\"M950.227,301.786L958.569,307.488C966.911,313.191,983.596,324.595,991.939,336.464C1000.281,348.333,1000.281,360.667,1000.281,373C1000.281,385.333,1000.281,397.667,1000.281,407.333C1000.281,417,1000.281,424,1000.281,427.5L1000.281,431\" id=\"L_BE_VGW_0\" class=\"edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link\" style=\";\" data-edge=\"true\" data-et=\"edge\" data-id=\"L_BE_VGW_0\" data-points=\"W3sieCI6OTUwLjIyNjU2MjUsInkiOjMwMS43ODYxMTU3OTUzOTA3fSx7IngiOjEwMDAuMjgxMjUsInkiOjMzNn0seyJ4IjoxMDAwLjI4MTI1LCJ5IjozNzN9LHsieCI6MTAwMC4yODEyNSwieSI6NDEwfSx7IngiOjEwMDAuMjgxMjUsInkiOjQzNX1d\" marker-end=\"url(#mermaid-1_flowchart-v2-pointEnd)\"></path><path d=\"M827.961,269.204L754.021,280.337C680.082,291.47,532.203,313.735,458.264,331.034C384.324,348.333,384.324,360.667,384.324,373C384.324,385.333,384.324,397.667,384.324,407.333C384.324,417,384.324,424,384.324,427.5L384.324,431\" id=\"L_BE_SGW_0\" class=\"edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link\" style=\";\" data-edge=\"true\" data-et=\"edge\" data-id=\"L_BE_SGW_0\" data-points=\"W3sieCI6ODI3Ljk2MDkzNzUsInkiOjI2OS4yMDQzODYyODM5NjMxfSx7IngiOjM4NC4zMjQyMTg3NSwieSI6MzM2fSx7IngiOjM4NC4zMjQyMTg3NSwieSI6MzczfSx7IngiOjM4NC4zMjQyMTg3NSwieSI6NDEwfSx7IngiOjM4NC4zMjQyMTg3NSwieSI6NDM1fV0=\" marker-end=\"url(#mermaid-1_flowchart-v2-pointEnd)\"></path><path d=\"M950.227,272.09L1004.086,282.742C1057.945,293.393,1165.664,314.697,1219.523,331.515C1273.383,348.333,1273.383,360.667,1273.383,373C1273.383,385.333,1273.383,397.667,1273.383,416.5C1273.383,435.333,1273.383,460.667,1273.383,486C1273.383,511.333,1273.383,536.667,1269.097,553.062C1264.811,569.458,1256.24,576.916,1251.954,580.645L1247.668,584.374\" id=\"L_BE_VWM_0\" class=\"edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link\" style=\";\" data-edge=\"true\" data-et=\"edge\" data-id=\"L_BE_VWM_0\" data-points=\"W3sieCI6OTUwLjIyNjU2MjUsInkiOjI3Mi4wOTAxMDE0NDU0NDUxfSx7IngiOjEyNzMuMzgyODEyNSwieSI6MzM2fSx7IngiOjEyNzMuMzgyODEyNSwieSI6MzczfSx7IngiOjEyNzMuMzgyODEyNSwieSI6NDEwfSx7IngiOjEyNzMuMzgyODEyNSwieSI6NDg2fSx7IngiOjEyNzMuMzgyODEyNSwieSI6NTYyfSx7IngiOjEyNDQuNjUwNTEyNjk1MzEyNSwieSI6NTg3fV0=\" marker-end=\"url(#mermaid-1_flowchart-v2-pointEnd)\"></path><path d=\"M827.961,297.813L817.671,304.177C807.382,310.542,786.802,323.271,776.512,335.802C766.223,348.333,766.223,360.667,766.223,373C766.223,385.333,766.223,397.667,766.223,416.5C766.223,435.333,766.223,460.667,766.223,486C766.223,511.333,766.223,536.667,730.39,556.771C694.557,576.875,622.891,591.75,587.058,599.188L551.225,606.625\" id=\"L_BE_SWM_0\" class=\"edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link\" style=\";\" data-edge=\"true\" data-et=\"edge\" data-id=\"L_BE_SWM_0\" data-points=\"W3sieCI6ODI3Ljk2MDkzNzUsInkiOjI5Ny44MTI3NDgzNzA2ODgyN30seyJ4Ijo3NjYuMjIyNjU2MjUsInkiOjMzNn0seyJ4Ijo3NjYuMjIyNjU2MjUsInkiOjM3M30seyJ4Ijo3NjYuMjIyNjU2MjUsInkiOjQxMH0seyJ4Ijo3NjYuMjIyNjU2MjUsInkiOjQ4Nn0seyJ4Ijo3NjYuMjIyNjU2MjUsInkiOjU2Mn0seyJ4Ijo1NDcuMzA4NTkzNzUsInkiOjYwNy40Mzc5MjQzOTQ0NDYxfV0=\" marker-end=\"url(#mermaid-1_flowchart-v2-pointEnd)\"></path></g><g class=\"edgeLabels\"><g class=\"edgeLabel\" transform=\"translate(889.09375, 172)\"><g class=\"label\" data-id=\"L_FE_BE_0\" transform=\"translate(-36.4453125, -12)\"><foreignObject width=\"72.890625\" height=\"24\"><div xmlns=\"http://www.w3.org/1999/xhtml\" class=\"labelBkg\" style=\"display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;\"><span class=\"edgeLabel\"><p>REST/WS</p></span></div></foreignObject></g></g><g class=\"edgeLabel\"><g class=\"label\" data-id=\"L_VGW_VWM_0\" transform=\"translate(0, 0)\"><foreignObject width=\"0\" height=\"0\"><div xmlns=\"http://www.w3.org/1999/xhtml\" class=\"labelBkg\" style=\"display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;\"><span class=\"edgeLabel\"></span></div></foreignObject></g></g><g class=\"edgeLabel\"><g class=\"label\" data-id=\"L_VWM_VW1_0\" transform=\"translate(0, 0)\"><foreignObject width=\"0\" height=\"0\"><div xmlns=\"http://www.w3.org/1999/xhtml\" class=\"labelBkg\" style=\"display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;\"><span class=\"edgeLabel\"></span></div></foreignObject></g></g><g class=\"edgeLabel\"><g class=\"label\" data-id=\"L_VWM_VW2_0\" transform=\"translate(0, 0)\"><foreignObject width=\"0\" height=\"0\"><div xmlns=\"http://www.w3.org/1999/xhtml\" class=\"labelBkg\" style=\"display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;\"><span class=\"edgeLabel\"></span></div></foreignObject></g></g><g class=\"edgeLabel\"><g class=\"label\" data-id=\"L_VWM_VW3_0\" transform=\"translate(0, 0)\"><foreignObject width=\"0\" height=\"0\"><div xmlns=\"http://www.w3.org/1999/xhtml\" class=\"labelBkg\" style=\"display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;\"><span class=\"edgeLabel\"></span></div></foreignObject></g></g><g class=\"edgeLabel\"><g class=\"label\" data-id=\"L_SGW_SWM_0\" transform=\"translate(0, 0)\"><foreignObject width=\"0\" height=\"0\"><div xmlns=\"http://www.w3.org/1999/xhtml\" class=\"labelBkg\" style=\"display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;\"><span class=\"edgeLabel\"></span></div></foreignObject></g></g><g class=\"edgeLabel\"><g class=\"label\" data-id=\"L_SWM_SW1_0\" transform=\"translate(0, 0)\"><foreignObject width=\"0\" height=\"0\"><div xmlns=\"http://www.w3.org/1999/xhtml\" class=\"labelBkg\" style=\"display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;\"><span class=\"edgeLabel\"></span></div></foreignObject></g></g><g class=\"edgeLabel\"><g class=\"label\" data-id=\"L_SWM_SW2_0\" transform=\"translate(0, 0)\"><foreignObject width=\"0\" height=\"0\"><div xmlns=\"http://www.w3.org/1999/xhtml\" class=\"labelBkg\" style=\"display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;\"><span class=\"edgeLabel\"></span></div></foreignObject></g></g><g class=\"edgeLabel\"><g class=\"label\" data-id=\"L_SWM_SW3_0\" transform=\"translate(0, 0)\"><foreignObject width=\"0\" height=\"0\"><div xmlns=\"http://www.w3.org/1999/xhtml\" class=\"labelBkg\" style=\"display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;\"><span class=\"edgeLabel\"></span></div></foreignObject></g></g><g class=\"edgeLabel\"><g class=\"label\" data-id=\"L_SWM_SW4_0\" transform=\"translate(0, 0)\"><foreignObject width=\"0\" height=\"0\"><div xmlns=\"http://www.w3.org/1999/xhtml\" class=\"labelBkg\" style=\"display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;\"><span class=\"edgeLabel\"></span></div></foreignObject></g></g><g class=\"edgeLabel\" transform=\"translate(1000.28125, 373)\"><g class=\"label\" data-id=\"L_BE_VGW_0\" transform=\"translate(-48.0234375, -12)\"><foreignObject width=\"96.046875\" height=\"24\"><div xmlns=\"http://www.w3.org/1999/xhtml\" class=\"labelBkg\" style=\"display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;\"><span class=\"edgeLabel\"><p>Health Check</p></span></div></foreignObject></g></g><g class=\"edgeLabel\" transform=\"translate(384.32421875, 373)\"><g class=\"label\" data-id=\"L_BE_SGW_0\" transform=\"translate(-48.0234375, -12)\"><foreignObject width=\"96.046875\" height=\"24\"><div xmlns=\"http://www.w3.org/1999/xhtml\" class=\"labelBkg\" style=\"display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;\"><span class=\"edgeLabel\"><p>Health Check</p></span></div></foreignObject></g></g><g class=\"edgeLabel\" transform=\"translate(1273.3828125, 486)\"><g class=\"label\" data-id=\"L_BE_VWM_0\" transform=\"translate(-50.5390625, -12)\"><foreignObject width=\"101.078125\" height=\"24\"><div xmlns=\"http://www.w3.org/1999/xhtml\" class=\"labelBkg\" style=\"display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;\"><span class=\"edgeLabel\"><p>Worker Status</p></span></div></foreignObject></g></g><g class=\"edgeLabel\" transform=\"translate(766.22265625, 486)\"><g class=\"label\" data-id=\"L_BE_SWM_0\" transform=\"translate(-50.5390625, -12)\"><foreignObject width=\"101.078125\" height=\"24\"><div xmlns=\"http://www.w3.org/1999/xhtml\" class=\"labelBkg\" style=\"display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;\"><span class=\"edgeLabel\"><p>Worker Status</p></span></div></foreignObject></g></g></g><g class=\"nodes\"><g class=\"node default\" id=\"flowchart-FE-0\" transform=\"translate(889.09375, 84)\"><rect class=\"basic label-container\" style=\"\" x=\"-73.65625\" y=\"-51\" width=\"147.3125\" height=\"102\"></rect><g class=\"label\" style=\"\" transform=\"translate(-43.65625, -36)\"><rect></rect><foreignObject width=\"87.3125\" height=\"72\"><div xmlns=\"http://www.w3.org/1999/xhtml\" style=\"display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;\"><span class=\"nodeLabel\"><p>Frontend<br></br>React + Vite<br></br>:4000</p></span></div></foreignObject></g></g><g class=\"node default\" id=\"flowchart-BE-1\" transform=\"translate(889.09375, 260)\"><rect class=\"basic label-container\" style=\"\" x=\"-61.1328125\" y=\"-51\" width=\"122.265625\" height=\"102\"></rect><g class=\"label\" style=\"\" transform=\"translate(-31.1328125, -36)\"><rect></rect><foreignObject width=\"62.265625\" height=\"72\"><div xmlns=\"http://www.w3.org/1999/xhtml\" style=\"display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;\"><span class=\"nodeLabel\"><p>Backend<br></br>FastAPI<br></br>:4010</p></span></div></foreignObject></g></g><g class=\"node default\" id=\"flowchart-VGW-4\" transform=\"translate(1000.28125, 486)\"><rect class=\"basic label-container\" style=\"\" x=\"-61.5703125\" y=\"-51\" width=\"123.140625\" height=\"102\"></rect><g class=\"label\" style=\"\" transform=\"translate(-31.5703125, -36)\"><rect></rect><foreignObject width=\"63.140625\" height=\"72\"><div xmlns=\"http://www.w3.org/1999/xhtml\" style=\"display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;\"><span class=\"nodeLabel\"><p>Gateway<br></br>FastAPI<br></br>:8000</p></span></div></foreignObject></g></g><g class=\"node default\" id=\"flowchart-VWM-5\" transform=\"translate(1199.828125, 626)\"><rect class=\"basic label-container\" style=\"\" x=\"-89.4296875\" y=\"-39\" width=\"178.859375\" height=\"78\"></rect><g class=\"label\" style=\"\" transform=\"translate(-59.4296875, -24)\"><rect></rect><foreignObject width=\"118.859375\" height=\"48\"><div xmlns=\"http://www.w3.org/1999/xhtml\" style=\"display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;\"><span class=\"nodeLabel\"><p>Worker Manager<br></br>:8100</p></span></div></foreignObject></g></g><g class=\"node default\" id=\"flowchart-VW1-6\" transform=\"translate(998.21875, 754)\"><rect class=\"basic label-container\" style=\"\" x=\"-77.140625\" y=\"-39\" width=\"154.28125\" height=\"78\"></rect><g class=\"label\" style=\"\" transform=\"translate(-47.140625, -24)\"><rect></rect><foreignObject width=\"94.28125\" height=\"48\"><div xmlns=\"http://www.w3.org/1999/xhtml\" style=\"display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;\"><span class=\"nodeLabel\"><p>vlm-fast<br></br>Moondream2</p></span></div></foreignObject></g></g><g class=\"node default\" id=\"flowchart-VW2-7\" transform=\"translate(1199.828125, 754)\"><rect class=\"basic label-container\" style=\"\" x=\"-74.46875\" y=\"-39\" width=\"148.9375\" height=\"78\"></rect><g class=\"label\" style=\"\" transform=\"translate(-44.46875, -24)\"><rect></rect><foreignObject width=\"88.9375\" height=\"48\"><div xmlns=\"http://www.w3.org/1999/xhtml\" style=\"display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;\"><span class=\"nodeLabel\"><p>vlm-best<br></br>Qwen2.5-VL</p></span></div></foreignObject></g></g><g class=\"node default\" id=\"flowchart-VW3-8\" transform=\"translate(1408.984375, 754)\"><rect class=\"basic label-container\" style=\"\" x=\"-84.6875\" y=\"-39\" width=\"169.375\" height=\"78\"></rect><g class=\"label\" style=\"\" transform=\"translate(-54.6875, -24)\"><rect></rect><foreignObject width=\"109.375\" height=\"48\"><div xmlns=\"http://www.w3.org/1999/xhtml\" style=\"display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;\"><span class=\"nodeLabel\"><p>image-gen<br></br>FLUX.1-schnell</p></span></div></foreignObject></g></g><g class=\"node default\" id=\"flowchart-SGW-17\" transform=\"translate(384.32421875, 486)\"><rect class=\"basic label-container\" style=\"\" x=\"-61.5703125\" y=\"-51\" width=\"123.140625\" height=\"102\"></rect><g class=\"label\" style=\"\" transform=\"translate(-31.5703125, -36)\"><rect></rect><foreignObject width=\"63.140625\" height=\"72\"><div xmlns=\"http://www.w3.org/1999/xhtml\" style=\"display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;\"><span class=\"nodeLabel\"><p>Gateway<br></br>FastAPI<br></br>:8200</p></span></div></foreignObject></g></g><g class=\"node default\" id=\"flowchart-SWM-18\" transform=\"translate(457.87890625, 626)\"><rect class=\"basic label-container\" style=\"\" x=\"-89.4296875\" y=\"-39\" width=\"178.859375\" height=\"78\"></rect><g class=\"label\" style=\"\" transform=\"translate(-59.4296875, -24)\"><rect></rect><foreignObject width=\"118.859375\" height=\"48\"><div xmlns=\"http://www.w3.org/1999/xhtml\" style=\"display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;\"><span class=\"nodeLabel\"><p>Worker Manager<br></br>:8210</p></span></div></foreignObject></g></g><g class=\"node default\" id=\"flowchart-SW1-19\" transform=\"translate(125.0234375, 754)\"><rect class=\"basic label-container\" style=\"\" x=\"-82.0234375\" y=\"-39\" width=\"164.046875\" height=\"78\"></rect><g class=\"label\" style=\"\" transform=\"translate(-52.0234375, -24)\"><rect></rect><foreignObject width=\"104.046875\" height=\"48\"><div xmlns=\"http://www.w3.org/1999/xhtml\" style=\"display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;\"><span class=\"nodeLabel\"><p>stt-fast<br></br>Whisper Turbo</p></span></div></foreignObject></g></g><g class=\"node default\" id=\"flowchart-SW2-20\" transform=\"translate(349.7421875, 754)\"><rect class=\"basic label-container\" style=\"\" x=\"-92.6953125\" y=\"-39\" width=\"185.390625\" height=\"78\"></rect><g class=\"label\" style=\"\" transform=\"translate(-62.6953125, -24)\"><rect></rect><foreignObject width=\"125.390625\" height=\"48\"><div xmlns=\"http://www.w3.org/1999/xhtml\" style=\"display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;\"><span class=\"nodeLabel\"><p>stt-best<br></br>Whisper Large v3</p></span></div></foreignObject></g></g><g class=\"node default\" id=\"flowchart-SW3-21\" transform=\"translate(566.015625, 754)\"><rect class=\"basic label-container\" style=\"\" x=\"-73.578125\" y=\"-39\" width=\"147.15625\" height=\"78\"></rect><g class=\"label\" style=\"\" transform=\"translate(-43.578125, -24)\"><rect></rect><foreignObject width=\"87.15625\" height=\"48\"><div xmlns=\"http://www.w3.org/1999/xhtml\" style=\"display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;\"><span class=\"nodeLabel\"><p>tts-fast<br></br>Kokoro-82M</p></span></div></foreignObject></g></g><g class=\"node default\" id=\"flowchart-SW4-22\" transform=\"translate(760.3359375, 754)\"><rect class=\"basic label-container\" style=\"\" x=\"-70.7421875\" y=\"-39\" width=\"141.484375\" height=\"78\"></rect><g class=\"label\" style=\"\" transform=\"translate(-40.7421875, -24)\"><rect></rect><foreignObject width=\"81.484375\" height=\"48\"><div xmlns=\"http://www.w3.org/1999/xhtml\" style=\"display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;\"><span class=\"nodeLabel\"><p>tts-stream<br></br>Marvis TTS</p></span></div></foreignObject></g></g></g></g></g></svg></p>\n<p>핵심 설계 원칙:</p>\n<table>\n<thead>\n<tr>\n<th>원칙</th>\n<th>구현</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td><strong>On-demand Loading</strong></td>\n<td>Worker는 요청이 들어올 때만 로드, idle 5분 후 자동 offload</td>\n</tr>\n<tr>\n<td><strong>Memory Management</strong></td>\n<td>32GB 통합 메모리를 LRU 기반으로 관리, 필요시 오래된 모델 evict</td>\n</tr>\n<tr>\n<td><strong>OpenAI 호환</strong></td>\n<td><code class=\"language-text\">/v1/chat/completions</code>, <code class=\"language-text\">/v1/audio/speech</code>, <code class=\"language-text\">/v1/audio/transcriptions</code> 엔드포인트</td>\n</tr>\n<tr>\n<td><strong>Gateway-Worker 분리</strong></td>\n<td>Gateway는 항상 떠있고, 무거운 모델은 Worker로 분리</td>\n</tr>\n</tbody>\n</table>\n<hr>\n<h2 id=\"vision-insight-api-이미지-분석과-생성\">Vision Insight API: 이미지 분석과 생성</h2>\n<h3 id=\"왜-vision-서비스인가\">왜 Vision 서비스인가</h3>\n<p>이미지 관련 AI 기능이 필요한 상황이 의외로 많았다:</p>\n<ul>\n<li>스크린샷을 Claude에게 보여주고 UI 피드백 받기</li>\n<li>사진에서 텍스트 추출하기 (OCR)</li>\n<li>간단한 이미지 생성 (다이어그램, 아이콘 등)</li>\n</ul>\n<p>OpenAI Vision API는 비용이 꽤 나가고, 이미지 생성(DALL-E)은 더 비싸다. 로컬에서 돌리면 무제한이다.</p>\n<h3 id=\"모델-선택\">모델 선택</h3>\n<table>\n<thead>\n<tr>\n<th>Worker</th>\n<th>모델</th>\n<th>용도</th>\n<th>메모리</th>\n<th>특징</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>vlm-fast</td>\n<td>Moondream2</td>\n<td>빠른 이미지 분석</td>\n<td>~1.5GB</td>\n<td>간단한 질문에 빠른 응답</td>\n</tr>\n<tr>\n<td>vlm-best</td>\n<td>Qwen2.5-VL-7B-4bit</td>\n<td>고품질 분석</td>\n<td>~4.5GB</td>\n<td>복잡한 이미지 이해, OCR</td>\n</tr>\n<tr>\n<td>image-gen</td>\n<td>FLUX.1-schnell-4bit</td>\n<td>이미지 생성</td>\n<td>~6GB</td>\n<td>텍스트→이미지 변환</td>\n</tr>\n</tbody>\n</table>\n<p>MLX 최적화 덕분에 4bit 양자화 모델도 품질 저하가 거의 없다.</p>\n<h3 id=\"사용-예시\">사용 예시</h3>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token comment\"># 이미지 분석 (OpenAI 호환)</span>\n<span class=\"token function\">curl</span> http://localhost:8000/v1/chat/completions <span class=\"token punctuation\">\\</span>\n  <span class=\"token parameter variable\">-H</span> <span class=\"token string\">\"Content-Type: application/json\"</span> <span class=\"token punctuation\">\\</span>\n  <span class=\"token parameter variable\">-d</span> <span class=\"token string\">'{\n    \"model\": \"vlm-fast\",\n    \"messages\": [{\n      \"role\": \"user\",\n      \"content\": [\n        {\"type\": \"text\", \"text\": \"이 이미지에 뭐가 있어?\"},\n        {\"type\": \"image_url\", \"image_url\": {\"url\": \"data:image/png;base64,...\"}}\n      ]\n    }]\n  }'</span>\n\n<span class=\"token comment\"># 이미지 생성</span>\n<span class=\"token function\">curl</span> http://localhost:8000/v1/images/generations <span class=\"token punctuation\">\\</span>\n  <span class=\"token parameter variable\">-H</span> <span class=\"token string\">\"Content-Type: application/json\"</span> <span class=\"token punctuation\">\\</span>\n  <span class=\"token parameter variable\">-d</span> <span class=\"token string\">'{\n    \"model\": \"image-gen\",\n    \"prompt\": \"a cute robot coding on a laptop\",\n    \"size\": \"512x512\"\n  }'</span></code></pre></div>\n<h3 id=\"구현-포인트-worker-manager\">구현 포인트: Worker Manager</h3>\n<p>Worker Manager가 핵심이다. Gateway는 요청만 받고, 실제 모델 로딩과 추론은 Worker가 담당한다.</p>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\"><span class=\"token comment\"># Worker Manager의 spawn 로직 (간략화)</span>\n<span class=\"token keyword\">async</span> <span class=\"token keyword\">def</span> <span class=\"token function\">spawn_worker</span><span class=\"token punctuation\">(</span>alias<span class=\"token punctuation\">:</span> <span class=\"token builtin\">str</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">-</span><span class=\"token operator\">></span> WorkerInfo<span class=\"token punctuation\">:</span>\n    config <span class=\"token operator\">=</span> WORKER_CONFIGS<span class=\"token punctuation\">[</span>alias<span class=\"token punctuation\">]</span>\n\n    <span class=\"token comment\"># 메모리 확보</span>\n    <span class=\"token keyword\">await</span> ensure_memory_available<span class=\"token punctuation\">(</span>config<span class=\"token punctuation\">.</span>memory_gb<span class=\"token punctuation\">)</span>\n\n    <span class=\"token comment\"># 동적 포트 할당</span>\n    port <span class=\"token operator\">=</span> find_available_port<span class=\"token punctuation\">(</span><span class=\"token number\">8001</span><span class=\"token punctuation\">,</span> <span class=\"token number\">8099</span><span class=\"token punctuation\">)</span>\n\n    <span class=\"token comment\"># subprocess로 Worker 실행</span>\n    process <span class=\"token operator\">=</span> <span class=\"token keyword\">await</span> asyncio<span class=\"token punctuation\">.</span>create_subprocess_exec<span class=\"token punctuation\">(</span>\n        sys<span class=\"token punctuation\">.</span>executable<span class=\"token punctuation\">,</span> <span class=\"token string\">\"-m\"</span><span class=\"token punctuation\">,</span> <span class=\"token string-interpolation\"><span class=\"token string\">f\"workers.</span><span class=\"token interpolation\"><span class=\"token punctuation\">{</span>config<span class=\"token punctuation\">.</span>worker_type<span class=\"token punctuation\">}</span></span><span class=\"token string\">\"</span></span><span class=\"token punctuation\">,</span>\n        <span class=\"token string\">\"--port\"</span><span class=\"token punctuation\">,</span> <span class=\"token builtin\">str</span><span class=\"token punctuation\">(</span>port<span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n        <span class=\"token string\">\"--model\"</span><span class=\"token punctuation\">,</span> config<span class=\"token punctuation\">.</span>model_name\n    <span class=\"token punctuation\">)</span>\n\n    <span class=\"token comment\"># Health check 대기</span>\n    <span class=\"token keyword\">await</span> wait_for_health<span class=\"token punctuation\">(</span><span class=\"token string-interpolation\"><span class=\"token string\">f\"http://localhost:</span><span class=\"token interpolation\"><span class=\"token punctuation\">{</span>port<span class=\"token punctuation\">}</span></span><span class=\"token string\">/health\"</span></span><span class=\"token punctuation\">)</span>\n\n    <span class=\"token keyword\">return</span> WorkerInfo<span class=\"token punctuation\">(</span>alias<span class=\"token operator\">=</span>alias<span class=\"token punctuation\">,</span> port<span class=\"token operator\">=</span>port<span class=\"token punctuation\">,</span> pid<span class=\"token operator\">=</span>process<span class=\"token punctuation\">.</span>pid<span class=\"token punctuation\">)</span></code></pre></div>\n<p>Worker는 5분간 idle 상태면 자동으로 offload된다. 메모리가 부족하면 LRU 순서로 evict한다.</p>\n<hr>\n<h2 id=\"voice-insight-api-음성-인식과-합성\">Voice Insight API: 음성 인식과 합성</h2>\n<h3 id=\"왜-voice-서비스인가\">왜 Voice 서비스인가</h3>\n<p>음성 관련 기능도 로컬에서 돌리고 싶었다:</p>\n<ul>\n<li>회의 녹음 → 텍스트 변환 (프라이버시)</li>\n<li>긴 문서를 음성으로 듣기 (멀티태스킹)</li>\n<li>음성 메모 빠르게 정리하기</li>\n</ul>\n<p>특히 STT(Speech-to-Text)는 민감한 내용을 외부로 보내고 싶지 않았다.</p>\n<h3 id=\"모델-선택-1\">모델 선택</h3>\n<table>\n<thead>\n<tr>\n<th>Worker</th>\n<th>모델</th>\n<th>용도</th>\n<th>메모리</th>\n<th>특징</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>stt-fast</td>\n<td>Whisper Large v3 Turbo</td>\n<td>빠른 음성 인식</td>\n<td>~2GB</td>\n<td>실시간에 가까운 속도</td>\n</tr>\n<tr>\n<td>stt-best</td>\n<td>Whisper Large v3</td>\n<td>고품질 음성 인식</td>\n<td>~3GB</td>\n<td>더 정확한 인식</td>\n</tr>\n<tr>\n<td>tts-fast</td>\n<td>Kokoro-82M</td>\n<td>빠른 음성 합성</td>\n<td>~0.5GB</td>\n<td>자연스러운 음성</td>\n</tr>\n<tr>\n<td>tts-stream</td>\n<td>Marvis TTS 250M</td>\n<td>스트리밍 TTS</td>\n<td>~1GB</td>\n<td>실시간 스트리밍 지원</td>\n</tr>\n</tbody>\n</table>\n<h3 id=\"사용-예시-1\">사용 예시</h3>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token comment\"># 음성 인식 (OpenAI 호환)</span>\n<span class=\"token function\">curl</span> http://localhost:8200/v1/audio/transcriptions <span class=\"token punctuation\">\\</span>\n  <span class=\"token parameter variable\">-F</span> <span class=\"token assign-left variable\">file</span><span class=\"token operator\">=</span>@meeting.mp3 <span class=\"token punctuation\">\\</span>\n  <span class=\"token parameter variable\">-F</span> <span class=\"token assign-left variable\">model</span><span class=\"token operator\">=</span>stt-fast\n\n<span class=\"token comment\"># 음성 합성</span>\n<span class=\"token function\">curl</span> http://localhost:8200/v1/audio/speech <span class=\"token punctuation\">\\</span>\n  <span class=\"token parameter variable\">-H</span> <span class=\"token string\">\"Content-Type: application/json\"</span> <span class=\"token punctuation\">\\</span>\n  <span class=\"token parameter variable\">-d</span> <span class=\"token string\">'{\n    \"model\": \"tts-fast\",\n    \"input\": \"안녕하세요, 오늘 날씨가 좋네요.\",\n    \"voice\": \"af_heart\"\n  }'</span> <span class=\"token punctuation\">\\</span>\n  <span class=\"token parameter variable\">--output</span> speech.mp3</code></pre></div>\n<h3 id=\"스트리밍-tts\">스트리밍 TTS</h3>\n<p>긴 텍스트를 음성으로 변환할 때 전체가 생성될 때까지 기다리면 UX가 안 좋다. Marvis TTS로 스트리밍을 구현했다:</p>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\"><span class=\"token decorator annotation punctuation\">@app<span class=\"token punctuation\">.</span>post</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"/v1/audio/speech\"</span><span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">async</span> <span class=\"token keyword\">def</span> <span class=\"token function\">create_speech</span><span class=\"token punctuation\">(</span>request<span class=\"token punctuation\">:</span> SpeechRequest<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n    <span class=\"token keyword\">if</span> request<span class=\"token punctuation\">.</span>stream<span class=\"token punctuation\">:</span>\n        <span class=\"token keyword\">return</span> StreamingResponse<span class=\"token punctuation\">(</span>\n            generate_audio_chunks<span class=\"token punctuation\">(</span>request<span class=\"token punctuation\">.</span><span class=\"token builtin\">input</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n            media_type<span class=\"token operator\">=</span><span class=\"token string\">\"audio/mpeg\"</span>\n        <span class=\"token punctuation\">)</span>\n    <span class=\"token keyword\">else</span><span class=\"token punctuation\">:</span>\n        audio <span class=\"token operator\">=</span> <span class=\"token keyword\">await</span> generate_full_audio<span class=\"token punctuation\">(</span>request<span class=\"token punctuation\">.</span><span class=\"token builtin\">input</span><span class=\"token punctuation\">)</span>\n        <span class=\"token keyword\">return</span> Response<span class=\"token punctuation\">(</span>content<span class=\"token operator\">=</span>audio<span class=\"token punctuation\">,</span> media_type<span class=\"token operator\">=</span><span class=\"token string\">\"audio/mpeg\"</span><span class=\"token punctuation\">)</span></code></pre></div>\n<hr>\n<h2 id=\"homelab-dashboard-통합-모니터링\">Homelab Dashboard: 통합 모니터링</h2>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 780px; border-radius: 5px; overflow: hidden;\"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 62.56410256410256%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAANCAIAAAAmMtkJAAAACXBIWXMAAAsTAAALEwEAmpwYAAACHUlEQVR42nVRaW/TQBD1f0dIJUWBqgq0HyCgNEkLoYlEK46fAM3ZWCYNTWI79+HE5x72bnibiCKQsEa7O/Nm3rwZa/Zodt8b3PfNIAy3262UcvufTwhBKGWMB5zYdOHHRCOUwVQsTuJE4OIxbhELuAlcFnO4KpIkACmlSIjikMZUiwjdE89c6frE83zUwl0LP2CRj4NzuKhxPd+0J3yH8mjIqKMl4FSfjBPJVNMEypUrBDz4mAMwwpQSb9lJwj5zf26ccUS5tnI2AMDHd4KVzp0hsj8hGkSMJ4qLY8KIsQgjAtLsmb9YLTautxe/XxiWMYrmAY2HS7qczlazOcQ8oCKM2HCI6TUvDLESIYUE9NvEViZSLc8PQhYEIoog/E+CVHNgIs1zfBqyf/6KKuUCg7iORyCAJ3/DWxlLVZypldI3hZft8km7kjWu1UOvPG9cFIyvaHbW/pz6ljuqXrxoX2aNq1O9goRM68Npq+KSUKvbnZr9o+NYsO56iPPOsfRFv7uywa2Pe1XbaI7uHlCYsTSNxYBwpmXqpXS1CGJQgls99PKzxnne+ILOOf1T6vvZUf1dpn352riCKCQct0onrbJLAq1l3t1a3cF6Yrkz253vz54zNp0pOncnVtPsGOO+5U73KAzJ/dWYMq6l6+cH9dxhI3/YKBzfvk/h0Sw8usm+0j9ibW+M68e1t4g8aeSBPm0WkXBQy6XrxQ0JfgHgR7/CBDdl9QAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"Homelab Dashboard\"\n        title=\"\"\n        src=\"/static/abed0c613a6f650ccf9ad3cadeec6572/a1792/dashboard.png\"\n        srcset=\"/static/abed0c613a6f650ccf9ad3cadeec6572/cb9a0/dashboard.png 195w,\n/static/abed0c613a6f650ccf9ad3cadeec6572/727ba/dashboard.png 390w,\n/static/abed0c613a6f650ccf9ad3cadeec6572/a1792/dashboard.png 780w,\n/static/abed0c613a6f650ccf9ad3cadeec6572/105d8/dashboard.png 1170w,\n/static/abed0c613a6f650ccf9ad3cadeec6572/21b4d/dashboard.png 1280w\"\n        sizes=\"(max-width: 780px) 100vw, 780px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<h3 id=\"왜-대시보드인가\">왜 대시보드인가</h3>\n<p>Vision API와 Voice API를 만들고 나니, 상태를 확인하려면 매번 curl로 health check를 해야 했다. 귀찮았다.</p>\n<ul>\n<li>Gateway가 살아있는지</li>\n<li>어떤 Worker가 로드되어 있는지</li>\n<li>메모리를 얼마나 쓰고 있는지</li>\n</ul>\n<p>이걸 한눈에 보고 싶었다.</p>\n<h3 id=\"기술-스택\">기술 스택</h3>\n<table>\n<thead>\n<tr>\n<th>레이어</th>\n<th>기술</th>\n<th>이유</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>Frontend</td>\n<td>React + Vite + Tailwind</td>\n<td>빠른 개발, 반응형 UI</td>\n</tr>\n<tr>\n<td>Backend</td>\n<td>FastAPI</td>\n<td>비동기 처리, OpenAPI 문서 자동 생성</td>\n</tr>\n<tr>\n<td>배포</td>\n<td>Docker Compose</td>\n<td>간단한 배포, 서비스 의존성 관리</td>\n</tr>\n</tbody>\n</table>\n<h3 id=\"주요-기능\">주요 기능</h3>\n<ol>\n<li><strong>Service Health</strong>: 각 API의 Gateway 상태 (healthy/unhealthy)</li>\n<li><strong>Worker Status</strong>: 현재 로드된 Worker, 메모리 사용량, idle 시간</li>\n<li><strong>Real-time Updates</strong>: WebSocket으로 상태 변화 즉시 반영</li>\n<li><strong>Worker Control</strong>: 대시보드에서 Worker 시작/중지 (TODO)</li>\n</ol>\n<h3 id=\"docker-연동-팁\">Docker 연동 팁</h3>\n<p>Dashboard는 Docker 컨테이너로 돌고, Vision/Voice API는 호스트에서 돈다. 컨테이너에서 호스트 서비스에 접근하려면 <code class=\"language-text\">host.docker.internal</code>을 사용해야 한다:</p>\n<div class=\"gatsby-highlight\" data-language=\"yaml\"><pre class=\"language-yaml\"><code class=\"language-yaml\"><span class=\"token comment\"># backend/config.yaml</span>\n<span class=\"token key atrule\">services</span><span class=\"token punctuation\">:</span>\n  <span class=\"token key atrule\">vision-insight</span><span class=\"token punctuation\">:</span>\n    <span class=\"token key atrule\">gateway</span><span class=\"token punctuation\">:</span>\n      <span class=\"token key atrule\">host</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"host.docker.internal\"</span>  <span class=\"token comment\"># localhost가 아님!</span>\n      <span class=\"token key atrule\">port</span><span class=\"token punctuation\">:</span> <span class=\"token number\">8000</span>\n    <span class=\"token key atrule\">worker_manager</span><span class=\"token punctuation\">:</span>\n      <span class=\"token key atrule\">host</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"host.docker.internal\"</span>\n      <span class=\"token key atrule\">port</span><span class=\"token punctuation\">:</span> <span class=\"token number\">8100</span></code></pre></div>\n<p>이걸 몰라서 처음에 \"Connection refused\" 에러와 한참 싸웠다.</p>\n<h3 id=\"대시보드-화면-설명\">대시보드 화면 설명</h3>\n<p>위 스크린샷에서 볼 수 있듯이:</p>\n<ul>\n<li><strong>상단 요약</strong>: Services(2개), Workers Running(0/7), Worker Managers(1/2), System Memory</li>\n<li><strong>Vision Insight API</strong>: Healthy 상태, Gateway 응답 7ms</li>\n<li><strong>Voice Insight API</strong>: Unhealthy (현재 서비스 중지 상태)</li>\n<li><strong>Worker 목록</strong>: 각 Worker별 상태와 Start 버튼</li>\n</ul>\n<p>Worker가 on-demand로 로드되기 때문에, 처음에는 \"Stopped\" 상태로 보인다. 요청이 들어오면 자동으로 \"Running\"으로 바뀌고, idle 타이머가 표시된다.</p>\n<hr>\n<h2 id=\"서비스-포트-정리\">서비스 포트 정리</h2>\n<p>최종적으로 이렇게 포트를 정리했다:</p>\n<table>\n<thead>\n<tr>\n<th>포트</th>\n<th>서비스</th>\n<th>설명</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>4000</td>\n<td>Dashboard Frontend</td>\n<td>React UI</td>\n</tr>\n<tr>\n<td>4010</td>\n<td>Dashboard Backend</td>\n<td>FastAPI</td>\n</tr>\n<tr>\n<td>8000</td>\n<td>Vision Gateway</td>\n<td>OpenAI 호환 Vision API</td>\n</tr>\n<tr>\n<td>8100</td>\n<td>Vision Worker Manager</td>\n<td>Worker 생명주기 관리</td>\n</tr>\n<tr>\n<td>8001-8003</td>\n<td>Vision Workers</td>\n<td>VLM, Image-gen</td>\n</tr>\n<tr>\n<td>8200</td>\n<td>Voice Gateway</td>\n<td>OpenAI 호환 Audio API</td>\n</tr>\n<tr>\n<td>8210</td>\n<td>Voice Worker Manager</td>\n<td>Worker 생명주기 관리</td>\n</tr>\n<tr>\n<td>8211+</td>\n<td>Voice Workers</td>\n<td>STT, TTS</td>\n</tr>\n</tbody>\n</table>\n<p><code class=\"language-text\">~/.agents/SERVICES.md</code>에 이 정보를 기록해두고 Service Manager 스킬로 관리한다.</p>\n<hr>\n<h2 id=\"배운-점\">배운 점</h2>\n<h3 id=\"1-mlx의-가능성\">1. MLX의 가능성</h3>\n<p>Apple Silicon에서 MLX는 정말 인상적이다. PyTorch보다 메모리 효율이 좋고, 4bit 양자화도 쉽게 적용된다. Mac Mini M4 32GB로도 VLM, 이미지 생성, STT, TTS를 동시에 서빙할 수 있다.</p>\n<h3 id=\"2-on-demand의-중요성\">2. On-demand의 중요성</h3>\n<p>처음에는 모든 Worker를 항상 띄워두려고 했다. 메모리가 금방 바닥났다. On-demand 로딩으로 바꾸니 필요할 때만 메모리를 쓰고, idle 시 자동 정리돼서 훨씬 효율적이다.</p>\n<h3 id=\"3-openai-호환의-편리함\">3. OpenAI 호환의 편리함</h3>\n<p>API를 OpenAI 호환으로 만들어두니, 기존에 OpenAI를 쓰던 코드에서 base_url만 바꾸면 바로 동작한다. 에코시스템의 힘이 크다.</p>\n<h3 id=\"4-docker와-호스트-통신\">4. Docker와 호스트 통신</h3>\n<p>컨테이너에서 호스트 서비스에 접근할 때 <code class=\"language-text\">localhost</code>가 안 된다는 걸 처음 알았다. <code class=\"language-text\">host.docker.internal</code>을 쓰거나, 네트워크 설정을 바꿔야 한다. 기본적인 것 같지만 처음 겪으면 헤맬 수 있다.</p>\n<hr>\n<h2 id=\"실제-활용-시나리오\">실제 활용 시나리오</h2>\n<p>이 인프라로 어떤 걸 할 수 있는지 몇 가지 예시:</p>\n<h3 id=\"1-이미지-기반-코드-생성\">1. 이미지 기반 코드 생성</h3>\n<p>스크린샷을 찍어서 Vision API로 분석하고, Claude에게 \"이 UI를 React로 만들어줘\"라고 하면 바로 코드가 나온다. OpenAI Vision을 쓰면 매번 비용이 드는데, 로컬이라 부담 없이 수십 번 반복할 수 있다.</p>\n<h3 id=\"2-음성-메모-정리-자동화\">2. 음성 메모 정리 자동화</h3>\n<p>회의 녹음 → STT → LLM 요약 → TTS 브리핑. 이 파이프라인을 iOS Shortcuts로 자동화하면, 녹음 버튼 하나로 정리된 요약을 음성으로 들을 수 있다.</p>\n<h3 id=\"3-프로토타입-에셋-생성\">3. 프로토타입 에셋 생성</h3>\n<p>새 프로젝트를 시작할 때 샘플 이미지가 필요하면 Image Gen으로 즉시 생성. 아이콘, 배경, 캐릭터 등을 빠르게 만들어서 프로토타입에 넣을 수 있다.</p>\n<hr>\n<h2 id=\"앞으로-할-것\">앞으로 할 것</h2>\n<ul class=\"contains-task-list\">\n<li class=\"task-list-item\"><input type=\"checkbox\" disabled> Dashboard에서 Worker 시작/중지 버튼 추가</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" disabled> Worker별 메트릭 그래프 (응답 시간, 처리량)</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" disabled> Prometheus exporter 추가해서 Grafana 연동</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" disabled> iOS Shortcuts로 음성 메모 → STT → 정리 자동화</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" disabled> 더 많은 모델 지원 (LLaMA, Gemma 등)</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" disabled> MCP(Model Context Protocol) 서버로 Claude Desktop과 연동</li>\n</ul>\n<hr>\n<h2 id=\"맺음말\">맺음말</h2>\n<p>이 프로젝트의 핵심은 <strong>Vibe Coding의 인프라</strong>를 만드는 것이었다. 새로운 서비스를 빠르게 프로토타이핑할 때, 이미지 생성이 필요하면 바로 Image Gen을, 음성 처리가 필요하면 바로 STT/TTS를 호출할 수 있다. API 비용 걱정 없이, 프라이버시 걱정 없이.</p>\n<p>Self-hosted의 가장 큰 장점은 <strong>완전한 통제권</strong>이다:</p>\n<ul>\n<li>내 데이터는 내 장비 안에서만 처리된다</li>\n<li>원하는 모델을 자유롭게 바꿔가며 실험할 수 있다</li>\n<li>비용은 전기세뿐, 무제한으로 사용할 수 있다</li>\n</ul>\n<p>물론 클라우드 API보다 번거로운 점도 있다. 모델 업데이트를 직접 해야 하고, 메모리 관리에 신경 써야 한다. 하지만 홈랩을 운영하면서 이런 삽질을 즐기는 사람이라면, 충분히 가치 있는 프로젝트라고 생각한다.</p>\n<p><a href=\"/posts/home-lab-iac\">Home Lab IaC</a>에서 인프라를 정리하고, 그 위에 실제로 서비스를 만들어 배포하니 뿌듯하다. \"서비스를 만들어서 배포하면 되겠다\"던 그 마무리를 드디어 했다.</p>\n<p>이제 진짜로, 신나게 서비스를 만들어볼 차례다.</p>\n<h2 id=\"관련-글\">관련 글</h2>\n<ul>\n<li><a href=\"/posts/home-dev\">Home Dev Environment</a></li>\n<li><a href=\"/posts/home-lab-iac\">Home Lab IaC</a></li>\n<li><a href=\"/posts/claude-code-agent-skills\">Claude Code Agent Skills</a></li>\n</ul>\n<hr>\n<h2 id=\"참고\">참고</h2>\n<ul>\n<li><a href=\"https://ml-explore.github.io/mlx/\">MLX Documentation</a></li>\n<li><a href=\"https://huggingface.co/mlx-community\">MLX Community Models (Hugging Face)</a></li>\n<li><a href=\"https://huggingface.co/vikhyatk/moondream2\">Moondream2</a></li>\n<li><a href=\"https://huggingface.co/Qwen/Qwen2.5-VL-7B-Instruct\">Qwen2.5-VL</a></li>\n<li><a href=\"https://huggingface.co/black-forest-labs/FLUX.1-schnell\">FLUX.1-schnell</a></li>\n<li><a href=\"https://huggingface.co/openai/whisper-large-v3\">Whisper Large v3</a></li>\n<li><a href=\"https://huggingface.co/hexgrad/Kokoro-82M\">Kokoro TTS</a></li>\n<li><a href=\"https://fastapi.tiangolo.com/\">FastAPI</a></li>\n<li><a href=\"https://docs.docker.com/desktop/networking/#i-want-to-connect-from-a-container-to-a-service-on-the-host\">Docker host.docker.internal</a></li>\n</ul>","excerpt":"Vibe Homelab: MLX 기반 AI 서비스와 대시보드 구축기 목표: Vibe Coding 중에 ML 모델을 즉시 활용할 수 있는 환경을 만들고, Self-hosted로 완전한 통제권을 갖기.\n결과: 이미지 ↔ 텍스트 ↔ 음성 변환이 자유로운 멀티모달 파이프라인과 통합 대시보드. TLDR; Vibe Coding의 인프라: 서비스를 빠르게 만들 때 M…","frontmatter":{"date":"26.01.30","dateISO":"2026-01-30","description":"Vibe Coding을 위한 멀티모달 AI 인프라 - Apple Silicon MLX로 이미지/음성 처리 서비스를 Self-host하고 통합 대시보드로 관리하는 과정","slug":"/vibe-homelab-ml-services","heroImage":null,"heroImageAlt":null,"tags":["Homelab","MLX","AI","Docker","FastAPI","VibeCoding"],"title":"Vibe Homelab: MLX 기반 AI 서비스와 대시보드 구축기"},"tableOfContents":"<ul>\n<li>\n<p><a href=\"#vibe-homelab-mlx-%EA%B8%B0%EB%B0%98-ai-%EC%84%9C%EB%B9%84%EC%8A%A4%EC%99%80-%EB%8C%80%EC%8B%9C%EB%B3%B4%EB%93%9C-%EA%B5%AC%EC%B6%95%EA%B8%B0\">Vibe Homelab: MLX 기반 AI 서비스와 대시보드 구축기</a></p>\n<ul>\n<li>\n<p><a href=\"#tldr\">TLDR;</a></p>\n</li>\n<li>\n<p><a href=\"#%EB%B0%B0%EA%B2%BD-vibe-coding%EC%9D%84-%EC%9C%84%ED%95%9C-ai-%EC%9D%B8%ED%94%84%EB%9D%BC\">배경: Vibe Coding을 위한 AI 인프라</a></p>\n<ul>\n<li><a href=\"#vibe-coding%EC%9D%B4%EB%9E%80\">Vibe Coding이란</a></li>\n<li><a href=\"#%EB%A9%80%ED%8B%B0%EB%AA%A8%EB%8B%AC-%ED%8C%8C%EC%9D%B4%ED%94%84%EB%9D%BC%EC%9D%B8%EC%9D%98-%ED%95%84%EC%9A%94%EC%84%B1\">멀티모달 파이프라인의 필요성</a></li>\n<li><a href=\"#%EC%99%9C-self-hosted%EC%9D%B8%EA%B0%80\">왜 Self-hosted인가</a></li>\n</ul>\n</li>\n<li>\n<p><a href=\"#%EC%95%84%ED%82%A4%ED%85%8D%EC%B2%98-%EA%B0%9C%EC%9A%94\">아키텍처 개요</a></p>\n</li>\n<li>\n<p><a href=\"#vision-insight-api-%EC%9D%B4%EB%AF%B8%EC%A7%80-%EB%B6%84%EC%84%9D%EA%B3%BC-%EC%83%9D%EC%84%B1\">Vision Insight API: 이미지 분석과 생성</a></p>\n<ul>\n<li><a href=\"#%EC%99%9C-vision-%EC%84%9C%EB%B9%84%EC%8A%A4%EC%9D%B8%EA%B0%80\">왜 Vision 서비스인가</a></li>\n<li><a href=\"#%EB%AA%A8%EB%8D%B8-%EC%84%A0%ED%83%9D\">모델 선택</a></li>\n<li><a href=\"#%EC%82%AC%EC%9A%A9-%EC%98%88%EC%8B%9C\">사용 예시</a></li>\n<li><a href=\"#%EA%B5%AC%ED%98%84-%ED%8F%AC%EC%9D%B8%ED%8A%B8-worker-manager\">구현 포인트: Worker Manager</a></li>\n</ul>\n</li>\n<li>\n<p><a href=\"#voice-insight-api-%EC%9D%8C%EC%84%B1-%EC%9D%B8%EC%8B%9D%EA%B3%BC-%ED%95%A9%EC%84%B1\">Voice Insight API: 음성 인식과 합성</a></p>\n<ul>\n<li><a href=\"#%EC%99%9C-voice-%EC%84%9C%EB%B9%84%EC%8A%A4%EC%9D%B8%EA%B0%80\">왜 Voice 서비스인가</a></li>\n<li><a href=\"#%EB%AA%A8%EB%8D%B8-%EC%84%A0%ED%83%9D-1\">모델 선택</a></li>\n<li><a href=\"#%EC%82%AC%EC%9A%A9-%EC%98%88%EC%8B%9C-1\">사용 예시</a></li>\n<li><a href=\"#%EC%8A%A4%ED%8A%B8%EB%A6%AC%EB%B0%8D-tts\">스트리밍 TTS</a></li>\n</ul>\n</li>\n<li>\n<p><a href=\"#homelab-dashboard-%ED%86%B5%ED%95%A9-%EB%AA%A8%EB%8B%88%ED%84%B0%EB%A7%81\">Homelab Dashboard: 통합 모니터링</a></p>\n<ul>\n<li><a href=\"#%EC%99%9C-%EB%8C%80%EC%8B%9C%EB%B3%B4%EB%93%9C%EC%9D%B8%EA%B0%80\">왜 대시보드인가</a></li>\n<li><a href=\"#%EA%B8%B0%EC%88%A0-%EC%8A%A4%ED%83%9D\">기술 스택</a></li>\n<li><a href=\"#%EC%A3%BC%EC%9A%94-%EA%B8%B0%EB%8A%A5\">주요 기능</a></li>\n<li><a href=\"#docker-%EC%97%B0%EB%8F%99-%ED%8C%81\">Docker 연동 팁</a></li>\n<li><a href=\"#%EB%8C%80%EC%8B%9C%EB%B3%B4%EB%93%9C-%ED%99%94%EB%A9%B4-%EC%84%A4%EB%AA%85\">대시보드 화면 설명</a></li>\n</ul>\n</li>\n<li>\n<p><a href=\"#%EC%84%9C%EB%B9%84%EC%8A%A4-%ED%8F%AC%ED%8A%B8-%EC%A0%95%EB%A6%AC\">서비스 포트 정리</a></p>\n</li>\n<li>\n<p><a href=\"#%EB%B0%B0%EC%9A%B4-%EC%A0%90\">배운 점</a></p>\n<ul>\n<li><a href=\"#1-mlx%EC%9D%98-%EA%B0%80%EB%8A%A5%EC%84%B1\">1. MLX의 가능성</a></li>\n<li><a href=\"#2-on-demand%EC%9D%98-%EC%A4%91%EC%9A%94%EC%84%B1\">2. On-demand의 중요성</a></li>\n<li><a href=\"#3-openai-%ED%98%B8%ED%99%98%EC%9D%98-%ED%8E%B8%EB%A6%AC%ED%95%A8\">3. OpenAI 호환의 편리함</a></li>\n<li><a href=\"#4-docker%EC%99%80-%ED%98%B8%EC%8A%A4%ED%8A%B8-%ED%86%B5%EC%8B%A0\">4. Docker와 호스트 통신</a></li>\n</ul>\n</li>\n<li>\n<p><a href=\"#%EC%8B%A4%EC%A0%9C-%ED%99%9C%EC%9A%A9-%EC%8B%9C%EB%82%98%EB%A6%AC%EC%98%A4\">실제 활용 시나리오</a></p>\n<ul>\n<li><a href=\"#1-%EC%9D%B4%EB%AF%B8%EC%A7%80-%EA%B8%B0%EB%B0%98-%EC%BD%94%EB%93%9C-%EC%83%9D%EC%84%B1\">1. 이미지 기반 코드 생성</a></li>\n<li><a href=\"#2-%EC%9D%8C%EC%84%B1-%EB%A9%94%EB%AA%A8-%EC%A0%95%EB%A6%AC-%EC%9E%90%EB%8F%99%ED%99%94\">2. 음성 메모 정리 자동화</a></li>\n<li><a href=\"#3-%ED%94%84%EB%A1%9C%ED%86%A0%ED%83%80%EC%9E%85-%EC%97%90%EC%85%8B-%EC%83%9D%EC%84%B1\">3. 프로토타입 에셋 생성</a></li>\n</ul>\n</li>\n<li>\n<p><a href=\"#%EC%95%9E%EC%9C%BC%EB%A1%9C-%ED%95%A0-%EA%B2%83\">앞으로 할 것</a></p>\n</li>\n<li>\n<p><a href=\"#%EB%A7%BA%EC%9D%8C%EB%A7%90\">맺음말</a></p>\n</li>\n<li>\n<p><a href=\"#%EA%B4%80%EB%A0%A8-%EA%B8%80\">관련 글</a></p>\n</li>\n<li>\n<p><a href=\"#%EC%B0%B8%EA%B3%A0\">참고</a></p>\n</li>\n</ul>\n</li>\n</ul>"}},"pageContext":{"id":"28f79789-5319-5363-b997-6b697f2e9a5d","frontmatter__slug":"/vibe-homelab-ml-services","previous":null,"previousTitle":null,"next":"/claude-hooks-english-study","nextTitle":"Claude Code Hooks로 영어 공부하기"}},"staticQueryHashes":["12962592","3399079524","3470099541","4097432363","76375841"],"slicesMap":{}}